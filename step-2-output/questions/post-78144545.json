{"Id": "78144545", "PostTypeId": "1", "CreationDate": "2024-03-12T03:40:02.477", "Score": "-1", "ViewCount": "26", "Body": "<pre><code>&quot;msg&quot;: &quot;Failed to create stack lambda-layer-test5: An error occurred (ValidationError) when calling the CreateStack operation: ParameterValue for ParameterKey Content is required\n</code></pre>\n<p>My vars are being past correctly according to <code>debug</code>:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>- name: Debug task to show CloudFormation parameters\n  debug:\n    msg: &quot;lambda layer: {{ item.0.name }}-{{ item.1 }}-layer&quot;\n  loop: &quot;{{ lambda_runtimes | subelements('layers') }}&quot;\n</code></pre>\n<p>Output:</p>\n<pre><code>ok: [localhost] =&gt; (item=[{'name': 'python310', 'layers': ['requests']}, 'requests']) =&gt; {\n    &quot;msg&quot;: &quot;lambda layer: python310-requests-layer&quot;\n}\nok: [localhost] =&gt; (item=[{'name': 'python311', 'layers': ['urllib3', 'requests']}, 'urllib3']) =&gt; {\n    &quot;msg&quot;: &quot;lambda layer: python311-urllib3-layer&quot;\n}\nok: [localhost] =&gt; (item=[{'name': 'python311', 'layers': ['urllib3', 'requests']}, 'requests']) =&gt; {\n    &quot;msg&quot;: &quot;lambda layer: python311-requests-layer&quot;\n</code></pre>\n<p>as expected, but the error:</p>\n<pre><code>An error occurred (ValidationError) when calling the CreateStack operation: ParameterValue for ParameterKey Content is required\nfailed: [localhost] (item=[{'name': 'python310', 'layers': ['requests']}, 'requests']) =&gt; {\n    &quot;ansible_loop_var&quot;: &quot;item&quot;,\n    &quot;boto3_version&quot;: &quot;1.34.32&quot;,\n    &quot;botocore_version&quot;: &quot;1.34.32&quot;,\n    &quot;changed&quot;: false,\n    &quot;error&quot;: {\n        &quot;code&quot;: &quot;ValidationError&quot;,\n        &quot;message&quot;: &quot;ParameterValue for ParameterKey Content is required&quot;,\n        &quot;type&quot;: &quot;Sender&quot;\n    },\n    &quot;invocation&quot;: {\n        &quot;module_args&quot;: {\n            &quot;access_key&quot;: null,\n            &quot;aws_ca_bundle&quot;: null,\n            &quot;aws_config&quot;: null,\n            &quot;backoff_delay&quot;: 3,\n            &quot;backoff_max_delay&quot;: 30,\n            &quot;backoff_retries&quot;: 10,\n            &quot;capabilities&quot;: [\n                &quot;CAPABILITY_IAM&quot;,\n                &quot;CAPABILITY_NAMED_IAM&quot;\n            ],\n            &quot;changeset_name&quot;: null,\n            &quot;create_changeset&quot;: false,\n            &quot;create_timeout&quot;: null,\n            &quot;debug_botocore_endpoint_logs&quot;: false,\n            &quot;disable_rollback&quot;: true,\n            &quot;endpoint_url&quot;: null,\n            &quot;events_limit&quot;: 200,\n            &quot;notification_arns&quot;: null,\n            &quot;on_create_failure&quot;: null,\n            &quot;profile&quot;: &quot;twe&quot;,\n            &quot;region&quot;: &quot;ap-southeast-2&quot;,\n            &quot;role_arn&quot;: null,\n            &quot;secret_key&quot;: null,\n            &quot;session_token&quot;: null,\n            &quot;stack_name&quot;: &quot;lambda-layer-test5&quot;,\n            &quot;stack_policy&quot;: null,\n            &quot;stack_policy_body&quot;: null,\n            &quot;stack_policy_on_update_body&quot;: null,\n            &quot;state&quot;: &quot;present&quot;,\n            &quot;tags&quot;: {\n                &quot;Environment&quot;: &quot;Dev&quot;,\n                &quot;Stack&quot;: &quot;stack_name&quot;\n            },\n            &quot;template&quot;: &quot;files/lambda_layer.yml&quot;,\n            &quot;template_body&quot;: null,\n            &quot;template_parameters&quot;: {\n                &quot;Content&quot;: {\n                    &quot;S3Bucket&quot;: &quot;twe-enc-common-test-lambdalayer-org&quot;,\n                    &quot;S3Key&quot;: &quot;python310-requests-layer.zip&quot;\n                },\n                &quot;LayerName&quot;: &quot;requests&quot;,\n                &quot;Runtime&quot;: &quot;python310&quot;\n            },\n            &quot;template_url&quot;: null,\n            &quot;termination_protection&quot;: null,\n            &quot;validate_certs&quot;: true\n        }\n    },\n    &quot;item&quot;: [\n        {\n            &quot;layers&quot;: [\n                &quot;requests&quot;\n            ],\n            &quot;name&quot;: &quot;python310&quot;\n        },\n        &quot;requests&quot;\n    ],\n</code></pre>\n<p>Can't find ANY information on this at all, can anyone help? please?</p>\n<p>that is above:</p>\n<ul>\n<li>i have tried hardcoding</li>\n<li>tried deployemnt via awscli</li>\n<li>tried to create stack manually</li>\n</ul>\n<p>ALL THE ABOVE WORKS, BUT when i pass those vars dynamically into cfn template, keeps saying NO content passed, very stumped.</p>\n<p>all help fully appreciated.</p>\n", "OwnerUserId": "23540816", "LastEditorUserId": "16417367", "LastEditDate": "2024-03-12T07:55:36.267", "LastActivityDate": "2024-03-12T07:55:36.267", "Title": "ParameterValue for ParameterKey Content required", "Tags": "|validation|parameters|ansible|aws-cloudformation|", "AnswerCount": "0", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "137766775", "PostId": "78144545", "Score": "1", "Text": "Welcome to StackOverflow! Please pay attention to the code formatting and create code fences with backticks ` or tildes ~ so that other community members could read and understand the question easier. This time I fixed the formatting for you - you can accept the edit to shorten the moderation queue. After that, please add the failing playbook code to the question. Thanks!", "CreationDate": "2024-03-12T06:16:45.720", "UserId": "16417367", "filtered-sentences": [{"source": "Text", "text": "Please pay attention to the code formatting and create code fences with backticks ` or tildes ~ so that other community members could read and understand the question easier. ", "keywords": ["pay"]}]}, {"Id": "137766800", "PostId": "78144545", "Score": "0", "Text": "You haven't provided the task which report this error. Can you add it? Best together with your playbook?", "CreationDate": "2024-03-12T06:21:55.647", "UserId": "6771046", "filtered-sentences": []}], "history": [{"Id": "304208774", "PostHistoryTypeId": "2", "PostId": "78144545", "RevisionGUID": "c9c5f28d-d5d8-476f-b5cc-976b08f8a58b", "CreationDate": "2024-03-12T03:40:02.477", "UserId": "23540816", "Text": "\"msg\": \"Failed to create stack lambda-layer-test5: An error occurred (ValidationError) when calling the CreateStack operation: ParameterValue for ParameterKey Content is required\r\n\r\nMy vars are being past correctly according to debug:\r\nname: Debug task to show CloudFormation parameters\r\n      debug:\r\n        msg: \"lambda layer: {{ item.0.name }}-{{ item.1 }}-layer\"\r\n      loop: \"{{ lambda_runtimes | subelements('layers') }}\"\r\n\r\noutput\r\n======\r\n\r\nok: [localhost] => (item=[{'name': 'python310', 'layers': ['requests']}, 'requests']) => {\r\n    \"msg\": \"lambda layer: python310-requests-layer\"\r\n}\r\nok: [localhost] => (item=[{'name': 'python311', 'layers': ['urllib3', 'requests']}, 'urllib3']) => {\r\n    \"msg\": \"lambda layer: python311-urllib3-layer\"\r\n}\r\nok: [localhost] => (item=[{'name': 'python311', 'layers': ['urllib3', 'requests']}, 'requests']) => {\r\n    \"msg\": \"lambda layer: python311-requests-layer\"\r\n\r\nas expected, but the error:\r\nAn error occurred (ValidationError) when calling the CreateStack operation: ParameterValue for ParameterKey Content is required\r\nfailed: [localhost] (item=[{'name': 'python310', 'layers': ['requests']}, 'requests']) => {\r\n    \"ansible_loop_var\": \"item\",\r\n    \"boto3_version\": \"1.34.32\",\r\n    \"botocore_version\": \"1.34.32\",\r\n    \"changed\": false,\r\n    \"error\": {\r\n        \"code\": \"ValidationError\",\r\n        \"message\": \"ParameterValue for ParameterKey Content is required\",\r\n        \"type\": \"Sender\"\r\n    },\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"access_key\": null,\r\n            \"aws_ca_bundle\": null,\r\n            \"aws_config\": null,\r\n            \"backoff_delay\": 3,\r\n            \"backoff_max_delay\": 30,\r\n            \"backoff_retries\": 10,\r\n            \"capabilities\": [\r\n                \"CAPABILITY_IAM\",\r\n                \"CAPABILITY_NAMED_IAM\"\r\n            ],\r\n            \"changeset_name\": null,\r\n            \"create_changeset\": false,\r\n            \"create_timeout\": null,\r\n            \"debug_botocore_endpoint_logs\": false,\r\n            \"disable_rollback\": true,\r\n            \"endpoint_url\": null,\r\n            \"events_limit\": 200,\r\n            \"notification_arns\": null,\r\n            \"on_create_failure\": null,\r\n            \"profile\": \"twe\",\r\n            \"region\": \"ap-southeast-2\",\r\n            \"role_arn\": null,\r\n            \"secret_key\": null,\r\n            \"session_token\": null,\r\n            \"stack_name\": \"lambda-layer-test5\",\r\n            \"stack_policy\": null,\r\n            \"stack_policy_body\": null,\r\n            \"stack_policy_on_update_body\": null,\r\n            \"state\": \"present\",\r\n            \"tags\": {\r\n                \"Environment\": \"Dev\",\r\n                \"Stack\": \"stack_name\"\r\n            },\r\n            \"template\": \"files/lambda_layer.yml\",\r\n            \"template_body\": null,\r\n            \"template_parameters\": {\r\n                \"Content\": {\r\n                    \"S3Bucket\": \"twe-enc-common-test-lambdalayer-org\",\r\n                    \"S3Key\": \"python310-requests-layer.zip\"\r\n                },\r\n                \"LayerName\": \"requests\",\r\n                \"Runtime\": \"python310\"\r\n            },\r\n            \"template_url\": null,\r\n            \"termination_protection\": null,\r\n            \"validate_certs\": true\r\n        }\r\n    },\r\n    \"item\": [\r\n        {\r\n            \"layers\": [\r\n                \"requests\"\r\n            ],\r\n            \"name\": \"python310\"\r\n        },\r\n        \"requests\"\r\n    ],\r\n\r\n\r\nCan't find ANY information on this at all, can anyone help? please?\r\n\r\nthat is above:\r\n- i have tried hardcoding\r\n- tried deployemnt via awscli\r\n- tried to create stack manually\r\n\r\nALL THE ABOVE WORKS, BUT when i pass those vars dynamically into cfn template, keeps saying NO content passed, very stumped.\r\n\r\nall help fully appreciated.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "\"msg\": \"Failed to create stack lambda-layer-test5: An error occurred (ValidationError) when calling the CreateStack operation: ParameterValue for ParameterKey Content is required My vars are being past correctly according to debug: name: Debug task to show CloudFormation parameters debug: msg: \"lambda layer: {{ item.0.name }}-{{ item.1 }}-layer\" loop: \"{{ lambda_runtimes | subelements('layers') }}\" output ====== ok: [localhost] => (item=[{'name': 'python310', 'layers': ['requests']}, 'requests']) => { \"msg\": \"lambda layer: python310-requests-layer\" } ok: [localhost] => (item=[{'name': 'python311', 'layers': ['urllib3', 'requests']}, 'urllib3']) => { \"msg\": \"lambda layer: python311-urllib3-layer\" } ok: [localhost] => (item=[{'name': 'python311', 'layers': ['urllib3', 'requests']}, 'requests']) => { \"msg\": \"lambda layer: python311-requests-layer\" as expected, but the error: An error occurred (ValidationError) when calling the CreateStack operation: ParameterValue for ParameterKey Content is required failed: [localhost] (item=[{'name': 'python310', 'layers': ['requests']}, 'requests']) => { \"ansible_loop_var\": \"item\", \"boto3_version\": \"1.34.32\", \"botocore_version\": \"1.34.32\", \"changed\": false, \"error\": { \"code\": \"ValidationError\", \"message\": \"ParameterValue for ParameterKey Content is required\", \"type\": \"Sender\" }, \"invocation\": { \"module_args\": { \"access_key\": null, \"aws_ca_bundle\": null, \"aws_config\": null, \"backoff_delay\": 3, \"backoff_max_delay\": 30, \"backoff_retries\": 10, \"capabilities\": [ \"CAPABILITY_IAM\", \"CAPABILITY_NAMED_IAM\" ], \"changeset_name\": null, \"create_changeset\": false, \"create_timeout\": null, \"debug_botocore_endpoint_logs\": false, \"disable_rollback\": true, \"endpoint_url\": null, \"events_limit\": 200, \"notification_arns\": null, \"on_create_failure\": null, \"profile\": \"twe\", \"region\": \"ap-southeast-2\", \"role_arn\": null, \"secret_key\": null, \"session_token\": null, \"stack_name\": \"lambda-layer-test5\", \"stack_policy\": null, \"stack_policy_body\": null, \"stack_policy_on_update_body\": null, \"state\": \"present\", \"tags\": { \"Environment\": \"Dev\", \"Stack\": \"stack_name\" }, \"template\": \"files/lambda_layer.yml\", \"template_body\": null, \"template_parameters\": { \"Content\": { \"S3Bucket\": \"twe-enc-common-test-lambdalayer-org\", \"S3Key\": \"python310-requests-layer.zip\" }, \"LayerName\": \"requests\", \"Runtime\": \"python310\" }, \"template_url\": null, \"termination_protection\": null, \"validate_certs\": true } }, \"item\": [ { \"layers\": [ \"requests\" ], \"name\": \"python310\" ", "keywords": ["change", "test"]}]}, {"Id": "304208776", "PostHistoryTypeId": "1", "PostId": "78144545", "RevisionGUID": "c9c5f28d-d5d8-476f-b5cc-976b08f8a58b", "CreationDate": "2024-03-12T03:40:02.477", "UserId": "23540816", "Text": "ParameterValue for ParameterKey Content required", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "304208777", "PostHistoryTypeId": "3", "PostId": "78144545", "RevisionGUID": "c9c5f28d-d5d8-476f-b5cc-976b08f8a58b", "CreationDate": "2024-03-12T03:40:02.477", "UserId": "23540816", "Text": "|validation|parameters|ansible|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "304208778", "PostHistoryTypeId": "66", "PostId": "78144545", "RevisionGUID": "c9c5f28d-d5d8-476f-b5cc-976b08f8a58b", "CreationDate": "2024-03-12T03:40:02.477", "UserId": "23540816", "filtered-sentences": []}, {"Id": "304213832", "PostHistoryTypeId": "5", "PostId": "78144545", "RevisionGUID": "1df118bb-6d3b-4f21-8420-db6894bc66f4", "CreationDate": "2024-03-12T07:55:36.267", "UserId": "16417367", "Comment": "Fixed formatting ", "Text": "```\r\n\"msg\": \"Failed to create stack lambda-layer-test5: An error occurred (ValidationError) when calling the CreateStack operation: ParameterValue for ParameterKey Content is required\r\n```\r\nMy vars are being past correctly according to `debug`:\r\n```yaml\r\n- name: Debug task to show CloudFormation parameters\r\n  debug:\r\n    msg: \"lambda layer: {{ item.0.name }}-{{ item.1 }}-layer\"\r\n  loop: \"{{ lambda_runtimes | subelements('layers') }}\"\r\n```\r\n\r\nOutput:\r\n\r\n```\r\nok: [localhost] => (item=[{'name': 'python310', 'layers': ['requests']}, 'requests']) => {\r\n    \"msg\": \"lambda layer: python310-requests-layer\"\r\n}\r\nok: [localhost] => (item=[{'name': 'python311', 'layers': ['urllib3', 'requests']}, 'urllib3']) => {\r\n    \"msg\": \"lambda layer: python311-urllib3-layer\"\r\n}\r\nok: [localhost] => (item=[{'name': 'python311', 'layers': ['urllib3', 'requests']}, 'requests']) => {\r\n    \"msg\": \"lambda layer: python311-requests-layer\"\r\n```\r\nas expected, but the error:\r\n```\r\nAn error occurred (ValidationError) when calling the CreateStack operation: ParameterValue for ParameterKey Content is required\r\nfailed: [localhost] (item=[{'name': 'python310', 'layers': ['requests']}, 'requests']) => {\r\n    \"ansible_loop_var\": \"item\",\r\n    \"boto3_version\": \"1.34.32\",\r\n    \"botocore_version\": \"1.34.32\",\r\n    \"changed\": false,\r\n    \"error\": {\r\n        \"code\": \"ValidationError\",\r\n        \"message\": \"ParameterValue for ParameterKey Content is required\",\r\n        \"type\": \"Sender\"\r\n    },\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"access_key\": null,\r\n            \"aws_ca_bundle\": null,\r\n            \"aws_config\": null,\r\n            \"backoff_delay\": 3,\r\n            \"backoff_max_delay\": 30,\r\n            \"backoff_retries\": 10,\r\n            \"capabilities\": [\r\n                \"CAPABILITY_IAM\",\r\n                \"CAPABILITY_NAMED_IAM\"\r\n            ],\r\n            \"changeset_name\": null,\r\n            \"create_changeset\": false,\r\n            \"create_timeout\": null,\r\n            \"debug_botocore_endpoint_logs\": false,\r\n            \"disable_rollback\": true,\r\n            \"endpoint_url\": null,\r\n            \"events_limit\": 200,\r\n            \"notification_arns\": null,\r\n            \"on_create_failure\": null,\r\n            \"profile\": \"twe\",\r\n            \"region\": \"ap-southeast-2\",\r\n            \"role_arn\": null,\r\n            \"secret_key\": null,\r\n            \"session_token\": null,\r\n            \"stack_name\": \"lambda-layer-test5\",\r\n            \"stack_policy\": null,\r\n            \"stack_policy_body\": null,\r\n            \"stack_policy_on_update_body\": null,\r\n            \"state\": \"present\",\r\n            \"tags\": {\r\n                \"Environment\": \"Dev\",\r\n                \"Stack\": \"stack_name\"\r\n            },\r\n            \"template\": \"files/lambda_layer.yml\",\r\n            \"template_body\": null,\r\n            \"template_parameters\": {\r\n                \"Content\": {\r\n                    \"S3Bucket\": \"twe-enc-common-test-lambdalayer-org\",\r\n                    \"S3Key\": \"python310-requests-layer.zip\"\r\n                },\r\n                \"LayerName\": \"requests\",\r\n                \"Runtime\": \"python310\"\r\n            },\r\n            \"template_url\": null,\r\n            \"termination_protection\": null,\r\n            \"validate_certs\": true\r\n        }\r\n    },\r\n    \"item\": [\r\n        {\r\n            \"layers\": [\r\n                \"requests\"\r\n            ],\r\n            \"name\": \"python310\"\r\n        },\r\n        \"requests\"\r\n    ],\r\n```\r\n\r\nCan't find ANY information on this at all, can anyone help? please?\r\n\r\nthat is above:\r\n- i have tried hardcoding\r\n- tried deployemnt via awscli\r\n- tried to create stack manually\r\n\r\nALL THE ABOVE WORKS, BUT when i pass those vars dynamically into cfn template, keeps saying NO content passed, very stumped.\r\n\r\nall help fully appreciated.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "``` \"msg\": \"Failed to create stack lambda-layer-test5: An error occurred (ValidationError) when calling the CreateStack operation: ParameterValue for ParameterKey Content is required ``` My vars are being past correctly according to `debug`: ```yaml - name: Debug task to show CloudFormation parameters debug: msg: \"lambda layer: {{ item.0.name }}-{{ item.1 }}-layer\" loop: \"{{ lambda_runtimes | subelements('layers') }}\" ``` Output: ``` ok: [localhost] => (item=[{'name': 'python310', 'layers': ['requests']}, 'requests']) => { \"msg\": \"lambda layer: python310-requests-layer\" } ok: [localhost] => (item=[{'name': 'python311', 'layers': ['urllib3', 'requests']}, 'urllib3']) => { \"msg\": \"lambda layer: python311-urllib3-layer\" } ok: [localhost] => (item=[{'name': 'python311', 'layers': ['urllib3', 'requests']}, 'requests']) => { \"msg\": \"lambda layer: python311-requests-layer\" ``` as expected, but the error: ``` ", "keywords": ["test"]}, {"source": "Text", "text": "An error occurred (ValidationError) when calling the CreateStack operation: ParameterValue for ParameterKey Content is required failed: [localhost] (item=[{'name': 'python310', 'layers': ['requests']}, 'requests']) => { \"ansible_loop_var\": \"item\", \"boto3_version\": \"1.34.32\", \"botocore_version\": \"1.34.32\", \"changed\": false, \"error\": { \"code\": \"ValidationError\", \"message\": \"ParameterValue for ParameterKey Content is required\", \"type\": \"Sender\" }, \"invocation\": { \"module_args\": { \"access_key\": null, \"aws_ca_bundle\": null, \"aws_config\": null, \"backoff_delay\": 3, \"backoff_max_delay\": 30, \"backoff_retries\": 10, \"capabilities\": [ \"CAPABILITY_IAM\", \"CAPABILITY_NAMED_IAM\" ], \"changeset_name\": null, \"create_changeset\": false, \"create_timeout\": null, \"debug_botocore_endpoint_logs\": false, \"disable_rollback\": true, \"endpoint_url\": null, \"events_limit\": 200, \"notification_arns\": null, \"on_create_failure\": null, \"profile\": \"twe\", \"region\": \"ap-southeast-2\", \"role_arn\": null, \"secret_key\": null, \"session_token\": null, \"stack_name\": \"lambda-layer-test5\", \"stack_policy\": null, \"stack_policy_body\": null, \"stack_policy_on_update_body\": null, \"state\": \"present\", \"tags\": { \"Environment\": \"Dev\", \"Stack\": \"stack_name\" }, \"template\": \"files/lambda_layer.yml\", \"template_body\": null, \"template_parameters\": { \"Content\": { \"S3Bucket\": \"twe-enc-common-test-lambdalayer-org\", \"S3Key\": \"python310-requests-layer.zip\" }, \"LayerName\": \"requests\", \"Runtime\": \"python310\" }, \"template_url\": null, \"termination_protection\": null, \"validate_certs\": true } }, \"item\": [ { \"layers\": [ \"requests\" ], \"name\": \"python310\" ", "keywords": ["change", "test"]}]}, {"Id": "304213833", "PostHistoryTypeId": "24", "PostId": "78144545", "RevisionGUID": "1df118bb-6d3b-4f21-8420-db6894bc66f4", "CreationDate": "2024-03-12T07:55:36.267", "Comment": "Proposed by 16417367 approved by 248823, 13867124 edit id of 5597605", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}