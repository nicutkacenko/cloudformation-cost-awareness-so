{"Id": "57869437", "PostTypeId": "1", "AcceptedAnswerId": "57879537", "CreationDate": "2019-09-10T11:02:36.273", "Score": "0", "ViewCount": "864", "Body": "<p>I am trying to create a EC2 Instance using CloudFormation.\nFollowing is my configuration file.</p>\n\n<pre><code>Description:  This script create EC2 with Public IP\n\nResources:\n\n  EC2CloudFormation:\n    Type: 'AWS::EC2::Instance'\n    Properties:\n      AvailabilityZone: !Select \n        - '0'\n        - !GetAZs ''\n      IamInstanceProfile: !Ref EC2CloudformationInstanceProfilee\n      ImageId: 'ami-06f1fab1ab342f0f7'\n      InstanceType: t2.medium\n      KeyName: mykey\n      NetworkInterfaces: \n        - AssociatePublicIpAddress: \"true\"\n          DeviceIndex: \"0\"\n          GroupSet: \n            - 'sg-XXXXXXXXXXXXX'\n          SubnetId: 'subnet-XXXXXXXXXXX'\n\n  EC2Role:\n    Type: 'AWS::IAM::Role'\n    Properties:\n      RoleName: EC2CloudFormationRole\n      Description: Role for CloudFormation EC2 Instance\n      AssumeRolePolicyDocument:\n        Statement:\n          - Effect: Allow\n            Principal:\n              Service:\n                - ec2.amazonaws.com\n            Action:\n              - 'sts:AssumeRole'\n      Path: /\n\n  EC2CloudformationInstanceProfilee:\n    Type: 'AWS::IAM::InstanceProfile'\n    Properties:\n      Path: /\n      Roles:\n        - !Ref EC2Role\n\n  EC2CloudFormationPolicies:\n    Type: 'AWS::IAM::Policy'\n    Properties:\n      PolicyName: EC2CloudFormationPolicy\n      PolicyDocument:\n        Statement:\n          - Sid: Stmt1566203227305\n            Action:\n              - 'cloudformation:*'\n            Effect: Allow\n            Resource: '*'\n      Roles:\n        - !Ref EC2Role\n</code></pre>\n\n<p>But I am facing the following error :</p>\n\n<pre><code>The requested configuration is currently not supported. Please check the documentation for supported configurations. (Service: AmazonEC2; Status Code: 400; Error Code: Unsupported; Request ID: c7edeeb4-14e1-48b3-a90a-4ea79498b1e8)\n</code></pre>\n\n<p>I am not able to understand root cause of the issue.\nThe other resources ( Role, Instance Profile and Policy ) are getting created only <code>EC2::Instance</code> is not getting created.</p>\n", "OwnerUserId": "4522512", "LastEditorUserId": "174777", "LastEditDate": "2019-09-11T00:11:50.580", "LastActivityDate": "2019-09-11T00:11:50.580", "Title": "CloudFormation: \"The requested configuration is currently not supported\"", "Tags": "|amazon-web-services|aws-cloudformation|", "AnswerCount": "1", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "102179372", "PostId": "57869437", "Score": "0", "Text": "Try it with a different AMI. See if you get the same error.", "CreationDate": "2019-09-10T19:45:31.717", "UserId": "2076060", "filtered-sentences": []}], "history": [{"Id": "205076924", "PostHistoryTypeId": "2", "PostId": "57869437", "RevisionGUID": "b1b5ad00-be9b-4512-8db4-7fe9227a194b", "CreationDate": "2019-09-10T11:02:36.273", "UserId": "4522512", "Text": "I am trying to create a EC2 Instance using CloudFormation.\r\nFollowing is my configuration file.\r\n\r\n    Description:  This script create EC2 with Public IP\r\n    \r\n    Resources:\r\n    \r\n      EC2CloudFormation:\r\n        Type: 'AWS::EC2::Instance'\r\n        Properties:\r\n          AvailabilityZone: !Select \r\n            - '0'\r\n            - !GetAZs ''\r\n          IamInstanceProfile: !Ref EC2CloudformationInstanceProfilee\r\n          ImageId: 'ami-06f1fab1ab342f0f7'\r\n          InstanceType: t2.medium\r\n          KeyName: mykey\r\n          NetworkInterfaces: \r\n            - AssociatePublicIpAddress: \"true\"\r\n              DeviceIndex: \"0\"\r\n              GroupSet: \r\n                - 'sg-XXXXXXXXXXXXX'\r\n              SubnetId: 'subnet-XXXXXXXXXXX'\r\n    \r\n      EC2Role:\r\n        Type: 'AWS::IAM::Role'\r\n        Properties:\r\n          RoleName: EC2CloudFormationRole\r\n          Description: Role for CloudFormation EC2 Instance\r\n          AssumeRolePolicyDocument:\r\n            Statement:\r\n              - Effect: Allow\r\n                Principal:\r\n                  Service:\r\n                    - ec2.amazonaws.com\r\n                Action:\r\n                  - 'sts:AssumeRole'\r\n          Path: /\r\n    \r\n      EC2CloudformationInstanceProfilee:\r\n        Type: 'AWS::IAM::InstanceProfile'\r\n        Properties:\r\n          Path: /\r\n          Roles:\r\n            - !Ref EC2Role\r\n    \r\n      EC2CloudFormationPolicies:\r\n        Type: 'AWS::IAM::Policy'\r\n        Properties:\r\n          PolicyName: EC2CloudFormationPolicy\r\n          PolicyDocument:\r\n            Statement:\r\n              - Sid: Stmt1566203227305\r\n                Action:\r\n                  - 'cloudformation:*'\r\n                Effect: Allow\r\n                Resource: '*'\r\n          Roles:\r\n            - !Ref EC2Role\r\n\r\n\r\nBut I am facing the following error :\r\n\r\n    The requested configuration is currently not supported. Please check the documentation for supported configurations. (Service: AmazonEC2; Status Code: 400; Error Code: Unsupported; Request ID: c7edeeb4-14e1-48b3-a90a-4ea79498b1e8)\r\n\r\nI am not able to understand root cause of the issue.\r\nThe other resources ( Role, Instance Profile and Policy ) are getting created only `EC2::Instance` is not getting created.\r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am trying to create a EC2 Instance using CloudFormation. ", "keywords": ["instance"]}, {"source": "Text", "text": "Description: This script create EC2 with Public IP Resources: EC2CloudFormation: Type: 'AWS::EC2::Instance' Properties: AvailabilityZone: !Select - '0' - !GetAZs '' IamInstanceProfile: !Ref EC2CloudformationInstanceProfilee ImageId: 'ami-06f1fab1ab342f0f7' InstanceType: t2.medium KeyName: mykey NetworkInterfaces: - AssociatePublicIpAddress: \"true\" DeviceIndex: \"0\" GroupSet: - 'sg-XXXXXXXXXXXXX' SubnetId: 'subnet-XXXXXXXXXXX' EC2Role: Type: 'AWS::IAM::Role' Properties: RoleName: EC2CloudFormationRole Description: Role for CloudFormation EC2 Instance AssumeRolePolicyDocument: Statement: - Effect: Allow Principal: Service: - ec2.amazonaws.com Action: - 'sts:AssumeRole' Path: / EC2CloudformationInstanceProfilee: Type: 'AWS::IAM::InstanceProfile' Properties: Path: / Roles: - !Ref EC2Role EC2CloudFormationPolicies: Type: 'AWS::IAM::Policy' Properties: PolicyName: EC2CloudFormationPolicy PolicyDocument: Statement: - Sid: Stmt1566203227305 Action: - 'cloudformation:*' Effect: Allow Resource: '*' Roles: - !Ref EC2Role But I am facing the following error : The requested configuration is currently not supported. ", "keywords": ["instance", "policy"]}, {"source": "Text", "text": "The other resources ( Role, Instance Profile and Policy ) are getting created only `EC2::Instance` is not getting created.", "keywords": ["instance", "policy"]}]}, {"Id": "205076925", "PostHistoryTypeId": "1", "PostId": "57869437", "RevisionGUID": "b1b5ad00-be9b-4512-8db4-7fe9227a194b", "CreationDate": "2019-09-10T11:02:36.273", "UserId": "4522512", "Text": "CloudFormation - Not able to create EC2", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "205076926", "PostHistoryTypeId": "3", "PostId": "57869437", "RevisionGUID": "b1b5ad00-be9b-4512-8db4-7fe9227a194b", "CreationDate": "2019-09-10T11:02:36.273", "UserId": "4522512", "Text": "|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "205117808", "PostHistoryTypeId": "6", "PostId": "57869437", "RevisionGUID": "3a2c4e43-acba-4e8b-93ee-7080e6ed9530", "CreationDate": "2019-09-11T00:11:50.580", "UserId": "174777", "Comment": "Improved title", "Text": "|amazon-web-services|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "205117815", "PostHistoryTypeId": "4", "PostId": "57869437", "RevisionGUID": "3a2c4e43-acba-4e8b-93ee-7080e6ed9530", "CreationDate": "2019-09-11T00:11:50.580", "UserId": "174777", "Comment": "Improved title", "Text": "CloudFormation: \"The requested configuration is currently not supported\"", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "57879537", "PostTypeId": "2", "ParentId": "57869437", "CreationDate": "2019-09-11T00:11:35.603", "Score": "1", "Body": "<p>Your template worked perfectly fine for me.</p>\n\n<p>I substituted:</p>\n\n<ul>\n<li>AMI (since yours is not public)</li>\n<li>Security Group</li>\n<li>Subnet (matching the first AZ)</li>\n</ul>\n\n<p>It ran just fine, so your issue is likely to be one of the above.</p>\n", "OwnerUserId": "174777", "LastActivityDate": "2019-09-11T00:11:35.603", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "102186869", "PostId": "57879537", "Score": "0", "Text": "Yes, the AMI ID  I was referring to was 64-bit Arm and those are supported with other instance types ( A series ). Thank you. But I would like to understand what is Arm types and normally they are not supported by all types of instances.", "CreationDate": "2019-09-11T04:15:26.880", "UserId": "4522512", "filtered-sentences": [{"source": "Text", "text": "Yes, the AMI ID I was referring to was 64-bit Arm and those are supported with other instance types ( A series ). ", "keywords": ["instance"]}]}, {"Id": "102196816", "PostId": "57879537", "Score": "1", "Text": "From [Amazon EC2 Instance Types - Amazon Web Services](https://aws.amazon.com/ec2/instance-types/): _Amazon EC2 A1 instances deliver significant cost savings and are ideally suited for scale-out and Arm-based workloads that are supported by the extensive Arm ecosystem. A1 instances are the first EC2 instances powered by AWS Graviton Processors that feature 64-bit Arm Neoverse cores and custom silicon designed by AWS._", "CreationDate": "2019-09-11T10:49:39.943", "UserId": "174777", "filtered-sentences": [{"source": "Text", "text": "From [Amazon EC2 Instance Types - Amazon Web Services](https://aws.amazon.com/ec2/instance-types/): _Amazon EC2 A1 instances deliver significant cost savings and are ideally suited for scale-out and Arm-based workloads that are supported by the extensive Arm ecosystem. ", "keywords": ["cost", "instance"]}, {"source": "Text", "text": "A1 instances are the first EC2 instances powered by AWS Graviton Processors that feature 64-bit Arm Neoverse cores and custom silicon designed by AWS._", "keywords": ["feature"]}]}], "history": [{"Id": "205117805", "PostHistoryTypeId": "2", "PostId": "57879537", "RevisionGUID": "9e93dc52-d349-4b7e-afc5-3225c7eac9ca", "CreationDate": "2019-09-11T00:11:35.603", "UserId": "174777", "Text": "Your template worked perfectly fine for me.\r\n\r\nI substituted:\r\n\r\n- AMI (since yours is not public)\r\n- Security Group\r\n- Subnet (matching the first AZ)\r\n\r\nIt ran just fine, so your issue is likely to be one of the above.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "I am trying to create a EC2 Instance using CloudFormation. ", "keywords": ["instance"]}, {"source": "Body", "text": "The other resources ( Role, Instance Profile and Policy ) are getting created only EC2::Instance is not getting created.", "keywords": ["instance", "policy"]}]}