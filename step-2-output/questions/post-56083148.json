{"Id": "56083148", "PostTypeId": "1", "AcceptedAnswerId": "56435992", "CreationDate": "2019-05-10T18:36:28.300", "Score": "1", "ViewCount": "1400", "Body": "<p>I am trying to create Sagemaker notebook instance using cloudformation template. Just wanted to see if there is any way i can associate codecommit repo to that note book instance.</p>\n\n<p>I know simple way to create repo and associate it using sagemaker via GUI easily.. However, is there any way we can associate via template. </p>\n\n<p>I found similar info on <a href=\"https://docs.aws.amazon.com/sagemaker/latest/dg/nbi-git-repo.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sagemaker/latest/dg/nbi-git-repo.html</a> But it doesn't show with cloudformation</p>\n", "OwnerUserId": "11244959", "LastEditorUserId": "11244959", "LastEditDate": "2019-05-13T17:39:31.263", "LastActivityDate": "2019-06-04T00:29:38.473", "Title": "Associate CodeCommit repo While creating Sagemaker notebook Instance", "Tags": "|aws-cloudformation|amazon-sagemaker|aws-codecommit|", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "197500849", "PostHistoryTypeId": "6", "PostId": "56083148", "RevisionGUID": "6d84aa37-0be5-405d-9884-73a63eef16b2", "CreationDate": "2019-05-10T19:13:50.407", "UserId": "1307905", "Comment": "edited tags", "Text": "|aws-cloudformation|amazon-sagemaker|aws-codecommit|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "197499115", "PostHistoryTypeId": "2", "PostId": "56083148", "RevisionGUID": "a3befa40-9268-40f4-82a3-1581a21b7712", "CreationDate": "2019-05-10T18:36:28.300", "UserId": "11244959", "Text": "I am trying to create Sagemaker notebook instance using cloudformation template. Just wanted to see if there is any way i can attach codecommit repo to that note book instance.\r\n\r\nI know simple way to create repo. However, is there any way we can associate via template. We can do it via GUI easily.\r\nHere is my template:\r\n \r\n\r\n    AWSTemplateFormatVersion: '2010-09-09'   \r\n    Parameters:\r\n        NotebookInstanceName:\r\n        AllowedPattern: '[A-Za-z0-9-]{1,63}'\r\n        ConstraintDescription: Maximum of 63 alphanumeric characters. Can include hyphens\r\n          (-), but not spaces. Must be unique within your account in an AWS Region.\r\n        Description: SageMaker Notebook instance name\r\n        MaxLength: '63'\r\n        MinLength: '1'\r\n        Type: String\r\n        Default: 'myNotebook'\r\n      NotebookInstanceType:\r\n        AllowedValues:\r\n          - ml.t2.medium\r\n        ConstraintDescription: Must select a valid notebook instance type.\r\n        Default: ml.t2.medium\r\n        Description: Select Instance type for the SageMaker Notebook\r\n        Type: String\r\n      KMSKeyId:\r\n        Description: AWS KMS key ID used to encrypt data at rest on the ML storage volume attached to notebook instance.\r\n        Type: String\r\n        Default: 'Replace it with your KMSKeyId'\r\n      CostCentre: \r\n        NoEcho: true   \r\n        Description: 'Cost centre will be used for tagging' \r\n        MaxLength: 8\r\n        MinLength: 2 \r\n        Type: String          \r\n    Resources:\r\n      SageMakerRole: \r\n        Type: AWS::IAM::Role\r\n        Properties:\r\n          AssumeRolePolicyDocument:\r\n            Version: 2012-10-17\r\n            Statement:\r\n              - Effect: Allow\r\n                Principal:\r\n                  Service:\r\n                    - \"sagemaker.amazonaws.com\"\r\n                Action:\r\n                  - \"sts:AssumeRole\"\r\n          ManagedPolicyArns:\r\n            - \r\n          Policies: \r\n            - PolicyName: \"AllowNotobookToPushCode\"\r\n              PolicyDocument: \r\n                  Statement:\r\n                  - Action:\r\n                    - codecommit:GetCommit\r\n                   \r\n                    Effect: Allow\r\n                    Resource: \r\n                    - arn:aws:codecommit:*\r\n                    \r\n            - PolicyName: \"KeyDecrypt\"\r\n              PolicyDocument: \r\n                  Statement:\r\n                  - Action:\r\n                    - kms:Decrypt\r\n                    - kms:Encrypt\r\n                    - kms:GenerateDataKey\r\n                    Effect: Allow\r\n                    Resource: \r\n                    - \r\n                \r\n                                \r\n                    \r\n      SageMakerNotebookInstance:\r\n        Type: \"AWS::SageMaker::NotebookInstance\"\r\n        Properties:\r\n          \r\n          KmsKeyId: !Ref KMSKeyId\r\n          NotebookInstanceName: !Ref NotebookInstanceName\r\n          InstanceType: !Ref NotebookInstanceType \r\n          Tags:\r\n         \r\n          - \r\n            Key: \"CostCentre\"\r\n            Value: !Ref \"CostCentre\"\r\n          RoleArn: \r\n            Fn::ImportValue: \r\n              !Sub \"SagemakerNotebookRole\" \r\n    Outputs:\r\n      SageMakerNoteBookURL:\r\n        Description: \"URL for the newly created SageMaker Notebook Instance\"\r\n        Value: !Sub 'https://${AWS::Region}.console.aws.amazon.com/sagemaker/home?region=${AWS::Region}#/notebook-instances/openNotebook/${NotebookInstanceName}'\r\n      SageMakerNoteBookTerminalURL:\r\n        Description: \"Terminal access URL for the newly created SageMaker Notebook Instance\"\r\n        Value: !Sub 'https://${NotebookInstanceName}.notebook.${AWS::Region}.sagemaker.aws/terminals/1'\r\n      SageMakerNotebookInstanceARN:\r\n        Description: \"ARN for the newly created SageMaker Notebook Instance\"\r\n        Value: !Ref SageMakerNotebookInstance", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am trying to create Sagemaker notebook instance using cloudformation template. ", "keywords": ["instance"]}, {"source": "Text", "text": "Just wanted to see if there is any way i can attach codecommit repo to that note book instance. ", "keywords": ["instance"]}, {"source": "Text", "text": "Description: SageMaker Notebook instance name MaxLength: '63' MinLength: '1' Type: String Default: 'myNotebook' NotebookInstanceType: AllowedValues: - ml.t2.medium ConstraintDescription: Must select a valid notebook instance type. ", "keywords": ["instance"]}, {"source": "Text", "text": "Default: ml.t2.medium Description: Select Instance type for the SageMaker Notebook Type: String KMSKeyId: Description: AWS KMS key ID used to encrypt data at rest on the ML storage volume attached to notebook instance. ", "keywords": ["instance", "storage"]}, {"source": "Text", "text": "Type: String Default: 'Replace it with your KMSKeyId' CostCentre: NoEcho: true Description: 'Cost centre will be used for tagging' MaxLength: 8 MinLength: 2 Type: String Resources: SageMakerRole: Type: AWS::IAM::Role Properties: AssumeRolePolicyDocument: Version: 2012-10-17 Statement: - Effect: Allow Principal: Service: - \"sagemaker.amazonaws.com\" Action: - \"sts:AssumeRole\" ManagedPolicyArns: - Policies: - PolicyName: \"AllowNotobookToPushCode\" PolicyDocument: Statement: - Action: - codecommit:GetCommit Effect: Allow Resource: - arn:aws:codecommit:* - PolicyName: \"KeyDecrypt\" PolicyDocument: Statement: - Action: - kms:Decrypt - kms:Encrypt - kms:GenerateDataKey Effect: Allow Resource: - SageMakerNotebookInstance: Type: \"AWS::SageMaker::NotebookInstance\" Properties: KmsKeyId: !Ref KMSKeyId NotebookInstanceName: !Ref NotebookInstanceName InstanceType: !Ref NotebookInstanceType Tags: - Key: \"CostCentre\" Value: !Ref \"CostCentre\" RoleArn: Fn::ImportValue: !Sub \"SagemakerNotebookRole\" Outputs: SageMakerNoteBookURL: Description: \"URL for the newly created SageMaker Notebook Instance\" Value: !Sub 'https://${AWS::Region}.console.aws.amazon.com/sagemaker/home?region=${AWS::Region}#/notebook-instances/openNotebook/${NotebookInstanceName}' SageMakerNoteBookTerminalURL: Description: \"Terminal access URL for the newly created SageMaker Notebook Instance\" Value: !Sub 'https://${NotebookInstanceName}.notebook.${AWS::Region}.sagemaker.aws/terminals/1' SageMakerNotebookInstanceARN: Description: \"ARN for the newly created SageMaker Notebook Instance\" Value: !Ref SageMakerNotebookInstance", "keywords": ["cost", "instance"]}]}, {"Id": "197499116", "PostHistoryTypeId": "1", "PostId": "56083148", "RevisionGUID": "a3befa40-9268-40f4-82a3-1581a21b7712", "CreationDate": "2019-05-10T18:36:28.300", "UserId": "11244959", "Text": "Associate CodeCommit repo While creating Sagemaker notebook Instance", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Associate CodeCommit repo While creating Sagemaker notebook Instance", "keywords": ["instance"]}]}, {"Id": "197499117", "PostHistoryTypeId": "3", "PostId": "56083148", "RevisionGUID": "a3befa40-9268-40f4-82a3-1581a21b7712", "CreationDate": "2019-05-10T18:36:28.300", "UserId": "11244959", "Text": "|yaml|aws-cloudformation|amazon-sagemaker|aws-codecommit|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "197499739", "PostHistoryTypeId": "5", "PostId": "56083148", "RevisionGUID": "2034fcf9-1903-43b7-bb1f-85c7362582c0", "CreationDate": "2019-05-10T18:50:11.357", "UserId": "11244959", "Comment": "added 219 characters in body", "Text": "I am trying to create Sagemaker notebook instance using cloudformation template. Just wanted to see if there is any way i can attach codecommit repo to that note book instance.\r\n\r\nI know simple way to create repo. However, is there any way we can associate via template. We can do it via GUI easily.\r\n\r\n I found similar info on [https://docs.aws.amazon.com/sagemaker/latest/dg/nbi-git-repo.html][1] But it doesn't show with cloudformation\r\n\r\nHere is my template:\r\n \r\n\r\n    AWSTemplateFormatVersion: '2010-09-09'   \r\n    Parameters:\r\n        NotebookInstanceName:\r\n        AllowedPattern: '[A-Za-z0-9-]{1,63}'\r\n        ConstraintDescription: Maximum of 63 alphanumeric characters. Can include hyphens\r\n          (-), but not spaces. Must be unique within your account in an AWS Region.\r\n        Description: SageMaker Notebook instance name\r\n        MaxLength: '63'\r\n        MinLength: '1'\r\n        Type: String\r\n        Default: 'myNotebook'\r\n      NotebookInstanceType:\r\n        AllowedValues:\r\n          - ml.t2.medium\r\n        ConstraintDescription: Must select a valid notebook instance type.\r\n        Default: ml.t2.medium\r\n        Description: Select Instance type for the SageMaker Notebook\r\n        Type: String\r\n      KMSKeyId:\r\n        Description: AWS KMS key ID used to encrypt data at rest on the ML storage volume attached to notebook instance.\r\n        Type: String\r\n        Default: 'Replace it with your KMSKeyId'\r\n      CostCentre: \r\n        NoEcho: true   \r\n        Description: 'Cost centre will be used for tagging' \r\n        MaxLength: 8\r\n        MinLength: 2 \r\n        Type: String          \r\n    Resources:\r\n      SageMakerRole: \r\n        Type: AWS::IAM::Role\r\n        Properties:\r\n          AssumeRolePolicyDocument:\r\n            Version: 2012-10-17\r\n            Statement:\r\n              - Effect: Allow\r\n                Principal:\r\n                  Service:\r\n                    - \"sagemaker.amazonaws.com\"\r\n                Action:\r\n                  - \"sts:AssumeRole\"\r\n          ManagedPolicyArns:\r\n            - \r\n          Policies: \r\n            - PolicyName: \"AllowNotobookToPushCode\"\r\n              PolicyDocument: \r\n                  Statement:\r\n                  - Action:\r\n                    - codecommit:GetCommit\r\n                   \r\n                    Effect: Allow\r\n                    Resource: \r\n                    - arn:aws:codecommit:*\r\n                    \r\n            - PolicyName: \"KeyDecrypt\"\r\n              PolicyDocument: \r\n                  Statement:\r\n                  - Action:\r\n                    - kms:Decrypt\r\n                    - kms:Encrypt\r\n                    - kms:GenerateDataKey\r\n                    Effect: Allow\r\n                    Resource: \r\n                    - \r\n                \r\n                                \r\n                    \r\n      SageMakerNotebookInstance:\r\n        Type: \"AWS::SageMaker::NotebookInstance\"\r\n        Properties:\r\n          \r\n          KmsKeyId: !Ref KMSKeyId\r\n          NotebookInstanceName: !Ref NotebookInstanceName\r\n          InstanceType: !Ref NotebookInstanceType \r\n          Tags:\r\n         \r\n          - \r\n            Key: \"CostCentre\"\r\n            Value: !Ref \"CostCentre\"\r\n          RoleArn: \r\n            Fn::ImportValue: \r\n              !Sub \"SagemakerNotebookRole\" \r\n    Outputs:\r\n      SageMakerNoteBookURL:\r\n        Description: \"URL for the newly created SageMaker Notebook Instance\"\r\n        Value: !Sub 'https://${AWS::Region}.console.aws.amazon.com/sagemaker/home?region=${AWS::Region}#/notebook-instances/openNotebook/${NotebookInstanceName}'\r\n      SageMakerNoteBookTerminalURL:\r\n        Description: \"Terminal access URL for the newly created SageMaker Notebook Instance\"\r\n        Value: !Sub 'https://${NotebookInstanceName}.notebook.${AWS::Region}.sagemaker.aws/terminals/1'\r\n      SageMakerNotebookInstanceARN:\r\n        Description: \"ARN for the newly created SageMaker Notebook Instance\"\r\n        Value: !Ref SageMakerNotebookInstance\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sagemaker/latest/dg/nbi-git-repo.html", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am trying to create Sagemaker notebook instance using cloudformation template. ", "keywords": ["instance"]}, {"source": "Text", "text": "Just wanted to see if there is any way i can attach codecommit repo to that note book instance. ", "keywords": ["instance"]}, {"source": "Text", "text": "Description: SageMaker Notebook instance name MaxLength: '63' MinLength: '1' Type: String Default: 'myNotebook' NotebookInstanceType: AllowedValues: - ml.t2.medium ConstraintDescription: Must select a valid notebook instance type. ", "keywords": ["instance"]}, {"source": "Text", "text": "Default: ml.t2.medium Description: Select Instance type for the SageMaker Notebook Type: String KMSKeyId: Description: AWS KMS key ID used to encrypt data at rest on the ML storage volume attached to notebook instance. ", "keywords": ["instance", "storage"]}, {"source": "Text", "text": "Type: String Default: 'Replace it with your KMSKeyId' CostCentre: NoEcho: true Description: 'Cost centre will be used for tagging' MaxLength: 8 MinLength: 2 Type: String Resources: SageMakerRole: Type: AWS::IAM::Role Properties: AssumeRolePolicyDocument: Version: 2012-10-17 Statement: - Effect: Allow Principal: Service: - \"sagemaker.amazonaws.com\" Action: - \"sts:AssumeRole\" ManagedPolicyArns: - Policies: - PolicyName: \"AllowNotobookToPushCode\" PolicyDocument: Statement: - Action: - codecommit:GetCommit Effect: Allow Resource: - arn:aws:codecommit:* - PolicyName: \"KeyDecrypt\" PolicyDocument: Statement: - Action: - kms:Decrypt - kms:Encrypt - kms:GenerateDataKey Effect: Allow Resource: - SageMakerNotebookInstance: Type: \"AWS::SageMaker::NotebookInstance\" Properties: KmsKeyId: !Ref KMSKeyId NotebookInstanceName: !Ref NotebookInstanceName InstanceType: !Ref NotebookInstanceType Tags: - Key: \"CostCentre\" Value: !Ref \"CostCentre\" RoleArn: Fn::ImportValue: !Sub \"SagemakerNotebookRole\" Outputs: SageMakerNoteBookURL: Description: \"URL for the newly created SageMaker Notebook Instance\" Value: !Sub 'https://${AWS::Region}.console.aws.amazon.com/sagemaker/home?region=${AWS::Region}#/notebook-instances/openNotebook/${NotebookInstanceName}' SageMakerNoteBookTerminalURL: Description: \"Terminal access URL for the newly created SageMaker Notebook Instance\" Value: !Sub 'https://${NotebookInstanceName}.notebook.${AWS::Region}.sagemaker.aws/terminals/1' SageMakerNotebookInstanceARN: Description: \"ARN for the newly created SageMaker Notebook Instance\" Value: !Ref SageMakerNotebookInstance [1]: https://docs.aws.amazon.com/sagemaker/latest/dg/nbi-git-repo.html", "keywords": ["cost", "instance"]}]}, {"Id": "197648993", "PostHistoryTypeId": "5", "PostId": "56083148", "RevisionGUID": "ad7e8fd5-24f9-41d9-9d73-211263a54f7d", "CreationDate": "2019-05-13T17:39:31.263", "UserId": "11244959", "Comment": "deleted 3507 characters in body", "Text": "I am trying to create Sagemaker notebook instance using cloudformation template. Just wanted to see if there is any way i can associate codecommit repo to that note book instance.\r\n\r\nI know simple way to create repo and associate it using sagemaker via GUI easily.. However, is there any way we can associate via template. \r\n\r\n I found similar info on [https://docs.aws.amazon.com/sagemaker/latest/dg/nbi-git-repo.html][1] But it doesn't show with cloudformation\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sagemaker/latest/dg/nbi-git-repo.html", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am trying to create Sagemaker notebook instance using cloudformation template. ", "keywords": ["instance"]}, {"source": "Text", "text": "Just wanted to see if there is any way i can associate codecommit repo to that note book instance. ", "keywords": ["instance"]}]}], "answers": [{"Id": "56435992", "PostTypeId": "2", "ParentId": "56083148", "CreationDate": "2019-06-04T00:29:38.473", "Score": "2", "Body": "<p>SageMaker now supports associating code repository including CodeCommit and any other Git repository with Notebook Instances via CloudFormation. </p>\n\n<p>Here's the link for more information: <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-sagemaker-coderepository.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-sagemaker-coderepository.html</a></p>\n", "OwnerUserId": "11596370", "LastActivityDate": "2019-06-04T00:29:38.473", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "198997615", "PostHistoryTypeId": "2", "PostId": "56435992", "RevisionGUID": "7f02d31d-02e9-45da-833a-39fdb64b7be2", "CreationDate": "2019-06-04T00:29:38.473", "UserId": "11596370", "Text": "SageMaker now supports associating code repository including CodeCommit and any other Git repository with Notebook Instances via CloudFormation. \r\n\r\nHere's the link for more information: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-sagemaker-coderepository.html", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Title", "text": "Associate CodeCommit repo While creating Sagemaker notebook Instance", "keywords": ["instance"]}, {"source": "Body", "text": "I am trying to create Sagemaker notebook instance using cloudformation template. ", "keywords": ["instance"]}, {"source": "Body", "text": "Just wanted to see if there is any way i can associate codecommit repo to that note book instance. ", "keywords": ["instance"]}]}