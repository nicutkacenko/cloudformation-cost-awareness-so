{"Id": "56530171", "PostTypeId": "1", "AcceptedAnswerId": "56534349", "CreationDate": "2019-06-10T16:29:43.267", "Score": "1", "ViewCount": "166", "Body": "<p>I have a key that is being shared among different services and it is currently stored in an s3 bucket inside a text file. \nMy goal is to read that variable and pass it to my lambda service through cloudformation. \nfor an ec2 instance it was easy because I could download the file and read it, and that was easily achievable by putting the scripts inside my cloudformation json file. But I don't have any idea how to do it for my lambdas....! </p>\n\n<p>I tried to put my credentials in gitlab pipeline but because of the access permissions it doesn't let gitlab pass it on, so my best and least expensive option right now is to do it in cloud formation.</p>\n", "OwnerUserId": "9188930", "LastEditorUserId": "174777", "LastEditDate": "2019-06-10T22:40:48.787", "LastActivityDate": "2019-06-10T22:40:48.787", "Title": "How to import a text from s3 to lambda through cloudformation?", "Tags": "|amazon-web-services|amazon-s3|aws-lambda|aws-cloudformation|", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "199396595", "PostHistoryTypeId": "2", "PostId": "56530171", "RevisionGUID": "cb20e828-30d4-43c2-9448-f62c5a613e31", "CreationDate": "2019-06-10T16:29:43.267", "UserId": "9188930", "Text": "I have a key that is being shared among different services and it is currently stored in an s3 bucket inside a text file. \r\nMy goal is to read that variable and pass it to my lambda service through cloudformation. \r\nfor an ec2 instance it was easy because I could download the file and read it, and that was easily achievable by putting the scripts inside my cloudformation json file. But I don't have any idea how to do it for my lambdas....! \r\n\r\n\r\nI tried to put my credentials in gitlab pipeline but because of the access permissions it doesn't let gitlab pass it on, so my best and least expensive option right now is to do it in cloud formation.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "for an ec2 instance it was easy because I could download the file and read it, and that was easily achievable by putting the scripts inside my cloudformation json file. ", "keywords": ["instance"]}, {"source": "Text", "text": "I tried to put my credentials in gitlab pipeline but because of the access permissions it doesn't let gitlab pass it on, so my best and least expensive option right now is to do it in cloud formation.", "keywords": ["expense", "permissions"]}]}, {"Id": "199396596", "PostHistoryTypeId": "1", "PostId": "56530171", "RevisionGUID": "cb20e828-30d4-43c2-9448-f62c5a613e31", "CreationDate": "2019-06-10T16:29:43.267", "UserId": "9188930", "Text": "How to import a text from s3 to lambda through cloudformation?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "199396597", "PostHistoryTypeId": "3", "PostId": "56530171", "RevisionGUID": "cb20e828-30d4-43c2-9448-f62c5a613e31", "CreationDate": "2019-06-10T16:29:43.267", "UserId": "9188930", "Text": "|amazon-s3|aws-lambda|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "199413899", "PostHistoryTypeId": "6", "PostId": "56530171", "RevisionGUID": "4bef9e1b-f72c-4c42-bdf0-3e9aff958904", "CreationDate": "2019-06-10T22:40:48.787", "UserId": "174777", "Comment": "edited tags", "Text": "|amazon-web-services|amazon-s3|aws-lambda|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "56534349", "PostTypeId": "2", "ParentId": "56530171", "CreationDate": "2019-06-10T22:40:31.770", "Score": "1", "Body": "<p>The easiest method would be to have the Lambda function read the information from Amazon S3.</p>\n\n<p>The only way to get CloudFormation to \"read\" some information from Amazon S3 would be to create a <strong>Custom Resource</strong>, which involves writing an AWS Lambda function. However, since you already have a Lambda function, it would be easier to simply have that function read the object.</p>\n\n<p>It's worth mentioning that, rather than storing such information in Amazon S3, you could use the <a href=\"https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html\" rel=\"nofollow noreferrer\">AWS Systems Manager Parameter Store</a>, which is a great place to store configuration information. Your various applications can then use Parameter Store to store and retrieve the configuration. CloudFormation can also <a href=\"https://aws.amazon.com/blogs/mt/integrating-aws-cloudformation-with-aws-systems-manager-parameter-store/\" rel=\"nofollow noreferrer\">access the Parameter Store</a>.</p>\n", "OwnerUserId": "174777", "LastActivityDate": "2019-06-10T22:40:31.770", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "199413892", "PostHistoryTypeId": "2", "PostId": "56534349", "RevisionGUID": "30eae828-8dee-4657-b335-f092f84c3a2a", "CreationDate": "2019-06-10T22:40:31.770", "UserId": "174777", "Text": "The easiest method would be to have the Lambda function read the information from Amazon S3.\r\n\r\nThe only way to get CloudFormation to \"read\" some information from Amazon S3 would be to create a **Custom Resource**, which involves writing an AWS Lambda function. However, since you already have a Lambda function, it would be easier to simply have that function read the object.\r\n\r\nIt's worth mentioning that, rather than storing such information in Amazon S3, you could use the [AWS Systems Manager Parameter Store](https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html), which is a great place to store configuration information. Your various applications can then use Parameter Store to store and retrieve the configuration. CloudFormation can also [access the Parameter Store](https://aws.amazon.com/blogs/mt/integrating-aws-cloudformation-with-aws-systems-manager-parameter-store/).", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "for an ec2 instance it was easy because I could download the file and read it, and that was easily achievable by putting the scripts inside my cloudformation json file. ", "keywords": ["instance"]}, {"source": "Body", "text": "I tried to put my credentials in gitlab pipeline but because of the access permissions it doesn't let gitlab pass it on, so my best and least expensive option right now is to do it in cloud formation.", "keywords": ["expense", "permissions"]}]}