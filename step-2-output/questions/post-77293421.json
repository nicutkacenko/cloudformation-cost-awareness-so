{"Id": "77293421", "PostTypeId": "1", "CreationDate": "2023-10-14T15:27:26.020", "Score": "1", "ViewCount": "50", "Body": "<p>I am trying to figure out the estimated cost of my simple CloudFormation template using CLI. But I am getting the error this error when I execute the command.</p>\n<pre><code>An error occurred (ValidationError) when calling the EstimateTemplateCost operation: Resource Type AWS::SecretsManager::Secret (Logical ID: MyRDSSecret) does not belong to resourceCostCalculator map.\n</code></pre>\n<p>This is my template (template.yaml).</p>\n<pre><code>AWSTemplateFormatVersion: &quot;2010-09-09&quot;\nDescription: &quot;Database using secret manager with rotation&quot;\nResources:\n  MyRDSSecret:\n    Type: AWS::SecretsManager::Secret\n    Properties:\n      Name: 'ProdDBSecret'\n      Description: 'Secret with dynamically generated password.'\n      GenerateSecretString:\n        RequireEachIncludedType: True\n        SecretStringTemplate: '{&quot;username&quot;: &quot;MyDBAdmin&quot;}'\n        GenerateStringKey: 'password'\n        PasswordLength: 25\n        ExcludePunctuation: True\n\n  MyRDSInstance:\n    Type: AWS::RDS::DBInstance\n    Properties:\n      AllocatedStorage: 20\n      DBInstanceClass: db.t2.micro\n      Engine: mysql\n      MasterUsername: !Join [ '', [ '{{resolve:secretsmanager:', !Ref MyRDSSecret, ':SecretString:username}}' ] ]\n      MasterUserPassword: !Join [ '', [ '{{resolve:secretsmanager:', !Ref MyRDSSecret, ':SecretString:password}}' ] ]\n      BackupRetentionPeriod: 3\n      DBInstanceIdentifier: 'prod-db-with-rotation'\n\n  SecretRDSInstanceAttachment:\n    Type: AWS::SecretsManager::SecretTargetAttachment\n    Properties:\n      SecretId: !Ref MyRDSSecret\n      TargetId: !Ref MyRDSInstance\n      TargetType: AWS::RDS::DBInstance\n</code></pre>\n<p>This is the command I run</p>\n<pre><code>aws cloudformation estimate-template-cost \\\n--template-body \\\nfile://template.yaml \\\n--query Url \\\n--output text\n</code></pre>\n<p>How can I fix the command to support AWS secret manager resources?</p>\n", "OwnerUserId": "4675736", "LastActivityDate": "2023-10-14T15:27:26.020", "Title": "How to resolve Resource Type does not belong to resourceCostCalculator map error in estimating AWS CloudFormation template cost", "Tags": "|amazon-web-services|aws-cloudformation|", "AnswerCount": "0", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "299003272", "PostHistoryTypeId": "2", "PostId": "77293421", "RevisionGUID": "6950465a-21ad-459f-a02e-ad3d07485150", "CreationDate": "2023-10-14T15:27:26.020", "UserId": "4675736", "Text": "I am trying to figure out the estimated cost of my simple CloudFormation template using CLI. But I am getting the error this error when I execute the command.\r\n\r\n    An error occurred (ValidationError) when calling the EstimateTemplateCost operation: Resource Type AWS::SecretsManager::Secret (Logical ID: MyRDSSecret) does not belong to resourceCostCalculator map.\r\n\r\nThis is my template (template.yaml).\r\n\r\n    AWSTemplateFormatVersion: \"2010-09-09\"\r\n    Description: \"Database using secret manager with rotation\"\r\n    Resources:\r\n      MyRDSSecret:\r\n        Type: AWS::SecretsManager::Secret\r\n        Properties:\r\n          Name: 'ProdDBSecret'\r\n          Description: 'Secret with dynamically generated password.'\r\n          GenerateSecretString:\r\n            RequireEachIncludedType: True\r\n            SecretStringTemplate: '{\"username\": \"MyDBAdmin\"}'\r\n            GenerateStringKey: 'password'\r\n            PasswordLength: 25\r\n            ExcludePunctuation: True\r\n    \r\n      MyRDSInstance:\r\n        Type: AWS::RDS::DBInstance\r\n        Properties:\r\n          AllocatedStorage: 20\r\n          DBInstanceClass: db.t2.micro\r\n          Engine: mysql\r\n          MasterUsername: !Join [ '', [ '{{resolve:secretsmanager:', !Ref MyRDSSecret, ':SecretString:username}}' ] ]\r\n          MasterUserPassword: !Join [ '', [ '{{resolve:secretsmanager:', !Ref MyRDSSecret, ':SecretString:password}}' ] ]\r\n          BackupRetentionPeriod: 3\r\n          DBInstanceIdentifier: 'prod-db-with-rotation'\r\n    \r\n      SecretRDSInstanceAttachment:\r\n        Type: AWS::SecretsManager::SecretTargetAttachment\r\n        Properties:\r\n          SecretId: !Ref MyRDSSecret\r\n          TargetId: !Ref MyRDSInstance\r\n          TargetType: AWS::RDS::DBInstance\r\n\r\nThis is the command I run\r\n\r\n    aws cloudformation estimate-template-cost \\\r\n    --template-body \\\r\n    file://template.yaml \\\r\n    --query Url \\\r\n    --output text\r\n\r\n\r\nHow can I fix the command to support AWS secret manager resources?\r\n\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am trying to figure out the estimated cost of my simple CloudFormation template using CLI. ", "keywords": ["cost"]}, {"source": "Text", "text": "AWSTemplateFormatVersion: \"2010-09-09\" Description: \"Database using secret manager with rotation\" Resources: MyRDSSecret: Type: AWS::SecretsManager::Secret Properties: Name: 'ProdDBSecret' Description: 'Secret with dynamically generated password.' GenerateSecretString: RequireEachIncludedType: True SecretStringTemplate: '{\"username\": \"MyDBAdmin\"}' GenerateStringKey: 'password' PasswordLength: 25 ExcludePunctuation: True MyRDSInstance: Type: AWS::RDS::DBInstance Properties: AllocatedStorage: 20 DBInstanceClass: db.t2.micro Engine: mysql MasterUsername: !Join [ '', [ '{{resolve:secretsmanager:', !Ref MyRDSSecret, ':SecretString:username}}' ] ] MasterUserPassword: !Join [ '', [ '{{resolve:secretsmanager:', !Ref MyRDSSecret, ':SecretString:password}}' ] ] BackupRetentionPeriod: 3 DBInstanceIdentifier: 'prod-db-with-rotation' SecretRDSInstanceAttachment: Type: AWS::SecretsManager::SecretTargetAttachment Properties: SecretId: !Ref MyRDSSecret TargetId: !Ref MyRDSInstance TargetType: AWS::RDS::DBInstance This is the command I run aws cloudformation estimate-template-cost \\ --template-body \\ file://template.yaml \\ --query Url \\ --output text How can I fix the command to support AWS secret manager resources?", "keywords": ["cost"]}]}, {"Id": "299003274", "PostHistoryTypeId": "1", "PostId": "77293421", "RevisionGUID": "6950465a-21ad-459f-a02e-ad3d07485150", "CreationDate": "2023-10-14T15:27:26.020", "UserId": "4675736", "Text": "How to resolve Resource Type does not belong to resourceCostCalculator map error in estimating AWS CloudFormation template cost", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "How to resolve Resource Type does not belong to resourceCostCalculator map error in estimating AWS CloudFormation template cost", "keywords": ["cost"]}]}, {"Id": "299003275", "PostHistoryTypeId": "3", "PostId": "77293421", "RevisionGUID": "6950465a-21ad-459f-a02e-ad3d07485150", "CreationDate": "2023-10-14T15:27:26.020", "UserId": "4675736", "Text": "|amazon-web-services|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "contains-topic": false, "filtered-sentences": [{"source": "Title", "text": "How to resolve Resource Type does not belong to resourceCostCalculator map error in estimating AWS CloudFormation template cost", "keywords": ["cost"]}, {"source": "Body", "text": "I am trying to figure out the estimated cost of my simple CloudFormation template using CLI. ", "keywords": ["cost"]}]}