{"Id": "67959096", "PostTypeId": "1", "CreationDate": "2021-06-13T14:03:34.853", "Score": "0", "ViewCount": "1215", "Body": "<p>I am using the <code>serverless</code> framework to manage the Lambda, DynamoDB and S3 resources creation for me.\nIn the <code>serverless.yml</code>, I had initially, provided some Read and Write capacity units to my DynamoDB table. Then, I changed it to <code>BillingMode: PAY_PER_REQUEST</code> and the update was successful.</p>\n<p>Now, when I have changed some other property in the yaml file, the <code>serverless deploy</code> command is throwing the following error:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>An error occurred: UsersTable - Subscriber limit exceeded: Update to PayPerRequest mode are limited to once in 1 day(s). Last update at Sun Jun 13 13:36:16 UTC 2021. Next update can be made at Mon Jun 14 13:36:16 UTC 2021 (Service: AmazonDynamoDBv2; Status Code: 400; Error Code: LimitExceededException; Request ID: S4TQTVVHGVJF66Q9ASJG; Proxy: null).\n</code></pre>\n<p>My question, why is it trying to update the UsersTable when there are no updates to it. AFAIK, there are changesets and they detect if there are any changes/updates to the resource. Have I missed something?</p>\n<p>A follow up question, how do I make sure that this doesn't happen again because I am in the initial phases of setting up the infra and would be doing lot of updates to the yaml file daily.</p>\n<p>For reference, following is the part of the yaml file that is causing the trouble.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>resources:\n  Resources:\n    UsersTable:\n      Type: AWS::DynamoDB::Table\n      Properties:\n        TableName: ${self:custom.usersTableName}\n        AttributeDefinitions:\n          - AttributeName: userId\n            AttributeType: S\n        KeySchema:\n          - AttributeName: userId\n            KeyType: HASH\n        BillingMode: PAY_PER_REQUEST\n</code></pre>\n", "OwnerUserId": "8822610", "LastActivityDate": "2021-06-15T15:16:48.487", "Title": "Serverless Subscriber limit exceeded", "Tags": "|amazon-web-services|amazon-dynamodb|aws-cloudformation|serverless-framework|", "AnswerCount": "1", "CommentCount": "3", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "120117792", "PostId": "67959096", "Score": "0", "Text": "Did you updated the billing mode for your table via the aws console?", "CreationDate": "2021-06-13T14:18:08.463", "UserId": "6493513", "filtered-sentences": [{"source": "Text", "text": "Did you updated the billing mode for your table via the aws console?", "keywords": ["bill", "billing mode"]}]}, {"Id": "120118077", "PostId": "67959096", "Score": "0", "Text": "No. I didn't. However, the first time it was updating from \"Provisioned\" to \"PAY_per_request\", it took around 30-40 minutes.", "CreationDate": "2021-06-13T14:34:59.760", "UserId": "8822610", "filtered-sentences": []}, {"Id": "120118325", "PostId": "67959096", "Score": "0", "Text": "Please recheck the code as this error comes only when you try to change the billing type of a DynamoDB table. AWS allows the billing type to be changed only once per day.", "CreationDate": "2021-06-13T14:51:03.190", "UserId": "6493513", "filtered-sentences": [{"source": "Text", "text": "Please recheck the code as this error comes only when you try to change the billing type of a DynamoDB table. ", "keywords": ["bill", "change"]}, {"source": "Text", "text": "AWS allows the billing type to be changed only once per day.", "keywords": ["bill", "change"]}]}], "history": [{"Id": "248402631", "PostHistoryTypeId": "2", "PostId": "67959096", "RevisionGUID": "0b323fd4-14cc-4ef2-8691-d752613fa5c6", "CreationDate": "2021-06-13T14:03:34.853", "UserId": "8822610", "Text": "I am using the `serverless` framework to manage the Lambda, DynamoDB and S3 resources creation for me. \r\nIn the `serverless.yml`, I had initially, provided some Read and Write capacity units to my DynamoDB table. Then, I changed it to `BillingMode: PAY_PER_REQUEST` and the update was successful.\r\n\r\nNow, when I have changed some other property in the yaml file, the `serverless deploy` command is throwing the following error:\r\n\r\n```sh\r\nAn error occurred: UsersTable - Subscriber limit exceeded: Update to PayPerRequest mode are limited to once in 1 day(s). Last update at Sun Jun 13 13:36:16 UTC 2021. Next update can be made at Mon Jun 14 13:36:16 UTC 2021 (Service: AmazonDynamoDBv2; Status Code: 400; Error Code: LimitExceededException; Request ID: S4TQTVVHGVJF66Q9ASJG; Proxy: null).\r\n```\r\n\r\nMy question, why is it trying to update the UsersTable when there are no updates to it. AFAIK, there are changesets and they detect if there are any changes/updates to the resource. Have I missed something?\r\n\r\nA follow up question, how do I make sure that this doesn't happen again because I am in the initial phases of setting up the infra and would be doing lot of updates to the yaml file daily.\r\n\r\nFor reference, following is the part of the yaml file that is causing the trouble.\r\n\r\n```yml\r\nresources:\r\n  Resources:\r\n    UsersTable:\r\n      Type: AWS::DynamoDB::Table\r\n      Properties:\r\n        TableName: ${self:custom.usersTableName}\r\n        AttributeDefinitions:\r\n          - AttributeName: userId\r\n            AttributeType: S\r\n        KeySchema:\r\n          - AttributeName: userId\r\n            KeyType: HASH\r\n        BillingMode: PAY_PER_REQUEST\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Then, I changed it to `BillingMode: PAY_PER_REQUEST` and the update was successful. ", "keywords": ["change"]}, {"source": "Text", "text": "Now, when I have changed some other property in the yaml file, the `serverless deploy` command is throwing the following error: ```sh ", "keywords": ["change"]}, {"source": "Text", "text": "An error occurred: UsersTable - Subscriber limit exceeded: Update to PayPerRequest mode are limited to once in 1 day(s). ", "keywords": ["billing mode"]}, {"source": "Text", "text": "AFAIK, there are changesets and they detect if there are any changes/updates to the resource. ", "keywords": ["change"]}]}, {"Id": "248402632", "PostHistoryTypeId": "1", "PostId": "67959096", "RevisionGUID": "0b323fd4-14cc-4ef2-8691-d752613fa5c6", "CreationDate": "2021-06-13T14:03:34.853", "UserId": "8822610", "Text": "Serverless Subscriber limit exceeded", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "248402633", "PostHistoryTypeId": "3", "PostId": "67959096", "RevisionGUID": "0b323fd4-14cc-4ef2-8691-d752613fa5c6", "CreationDate": "2021-06-13T14:03:34.853", "UserId": "8822610", "Text": "|amazon-web-services|amazon-dynamodb|aws-cloudformation|serverless-framework|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "67989001", "PostTypeId": "2", "ParentId": "67959096", "CreationDate": "2021-06-15T15:16:48.487", "Score": "1", "Body": "<p>Please open the AWS Console and inspect the table settings. If the billing mode is set to pay per request, try redeploying.</p>\n<p>If that fails again, please provided a detailed description, serverless version, plugin information, and any other information that might help the team track it down - and then open a bug ticket <a href=\"https://github.com/serverless/serverless\" rel=\"nofollow noreferrer\">in the project</a></p>\n", "OwnerUserId": "12160881", "LastActivityDate": "2021-06-15T15:16:48.487", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "120180773", "PostId": "67989001", "Score": "0", "Text": "I waited for a day and it works fine now. Not sure why it was causing that error initially.", "CreationDate": "2021-06-16T01:03:40.083", "UserId": "8822610", "filtered-sentences": []}], "history": [{"Id": "248530425", "PostHistoryTypeId": "2", "PostId": "67989001", "RevisionGUID": "472c4c7b-2dc6-4a95-a64f-a9d31c56e832", "CreationDate": "2021-06-15T15:16:48.487", "UserId": "12160881", "Text": "Please open the AWS Console and inspect the table settings. If the billing mode is set to pay per request, try redeploying.\r\n\r\nIf that fails again, please provided a detailed description, serverless version, plugin information, and any other information that might help the team track it down - and then open a bug ticket [in the project](https://github.com/serverless/serverless)", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "If the billing mode is set to pay per request, try redeploying. ", "keywords": ["bill", "pay", "billing mode"]}]}], "filtered-sentences": [{"source": "Body", "text": "If the billing mode is set to pay per request, try redeploying. ", "keywords": ["bill", "pay", "billing mode"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "Then, I changed it to BillingMode: PAY_PER_REQUEST and the update was successful. ", "keywords": ["change"]}, {"source": "Body", "text": "Now, when I have changed some other property in the yaml file, the serverless deploy command is throwing the following error: My question, why is it trying to update the UsersTable when there are no updates to it. ", "keywords": ["change"]}, {"source": "Body", "text": "AFAIK, there are changesets and they detect if there are any changes/updates to the resource. ", "keywords": ["change"]}]}