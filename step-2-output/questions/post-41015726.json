{"Id": "41015726", "PostTypeId": "1", "AcceptedAnswerId": "41016283", "CreationDate": "2016-12-07T11:01:28.247", "Score": "-1", "ViewCount": "39", "Body": "<p>I would like to build a solution where user uploads a file to S3, then I register it using a lambda function in a DB, and start processing it.</p>\n\n<p>Processing means that I would like to run an EC2 instance with some custom apps installed, having the file available from S3. For each file I would like to start a separate EC2 instance. Basically, I need a Centos server with 1 rpm installed that I've created separately.</p>\n\n<p>What would be the recommended aws service to scale this way? I've read through the docs of OpsWorks and CloudFormation, but can not really decide. Probably I could create custom AMIs too, and start EC2 instances using the SDK, but it does not seem to be an easy solution to keep updated regularly and I might have a few variants of the installation.</p>\n", "OwnerUserId": "245493", "LastActivityDate": "2016-12-07T11:28:01.833", "Title": "What aws service would you recommend for dynamic instance creation?", "Tags": "|amazon-web-services|amazon-ec2|aws-cloudformation|", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 3.0", "history": [{"Id": "133297360", "PostHistoryTypeId": "2", "PostId": "41015726", "RevisionGUID": "b3cb5746-16b8-499b-9986-3865a33c5966", "CreationDate": "2016-12-07T11:01:28.247", "UserId": "245493", "Text": "I would like to build a solution where user uploads a file to S3, then I register it using a lambda function in a DB, and start processing it.\r\n\r\nProcessing means that I would like to run an EC2 instance with some custom apps installed, having the file available from S3. For each file I would like to start a separate EC2 instance. Basically, I need a Centos server with 1 rpm installed that I've created separately.\r\n\r\nWhat would be the recommended aws service to scale this way? I've read through the docs of OpsWorks and CloudFormation, but can not really decide. Probably I could create custom AMIs too, and start EC2 instances using the SDK, but it does not seem to be an easy solution to keep updated regularly and I might have a few variants of the installation.", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": [{"source": "Text", "text": "Processing means that I would like to run an EC2 instance with some custom apps installed, having the file available from S3. ", "keywords": ["instance"]}, {"source": "Text", "text": "For each file I would like to start a separate EC2 instance. ", "keywords": ["instance"]}]}, {"Id": "133297361", "PostHistoryTypeId": "1", "PostId": "41015726", "RevisionGUID": "b3cb5746-16b8-499b-9986-3865a33c5966", "CreationDate": "2016-12-07T11:01:28.247", "UserId": "245493", "Text": "What aws service would you recommend for dynamic instance creation?", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": [{"source": "Text", "text": "What aws service would you recommend for dynamic instance creation?", "keywords": ["instance"]}]}, {"Id": "133297362", "PostHistoryTypeId": "3", "PostId": "41015726", "RevisionGUID": "b3cb5746-16b8-499b-9986-3865a33c5966", "CreationDate": "2016-12-07T11:01:28.247", "UserId": "245493", "Text": "|amazon-web-services|amazon-ec2|aws-cloudformation|", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}], "answers": [{"Id": "41016283", "PostTypeId": "2", "ParentId": "41015726", "CreationDate": "2016-12-07T11:28:01.833", "Score": "1", "Body": "<p>CloudFormation will help you build your insfrastructure layer (VPC, subnet, EC2 itself) but won't be able to install specific software on your machine. For the second task, you will need OpsWorks.</p>\n\n<p>Anyway, I think custom AMI + User Data to small modifications (as downloading a new version of something or starting a service) is the best option so you can try it fast. No big investments in time upfront. If the UserData gets too complex, just configure a new AMI version and keep it evolving.</p>\n\n<p>I'm just curious about the \"each file a new instance\". How long will it take to process 1 file? I mean: you'll pay the full hour, is it cost effective for you? Have you considered using Lambda?</p>\n\n<p>Good luck!</p>\n", "OwnerUserId": "226642", "LastActivityDate": "2016-12-07T11:28:01.833", "CommentCount": "4", "ContentLicense": "CC BY-SA 3.0", "comments": [{"Id": "69240866", "PostId": "41016283", "Score": "0", "Text": "Processing a single file depends on many things. I'm creating a prototype  on top of the Shell Control Box product from Balabit. Basically, I would like to process network traffic data of various lengths, the time of the processing is proportional with the network data saved (length, usage, etc). Thanks for your help!", "CreationDate": "2016-12-07T12:00:16.147", "UserId": "245493", "filtered-sentences": []}, {"Id": "69255927", "PostId": "41016283", "Score": "0", "Text": "@Akasha if 1 file processing is a matter of minutes, but not hours, and you can deal with some delay to start another file, it would be more cost effective to create an event (CloudWatch), drop a message in a queue (SQS) and reuse the same EC2 instance to process multiple files. Hope it helps!", "CreationDate": "2016-12-07T18:07:54.483", "UserId": "226642", "filtered-sentences": [{"source": "Text", "text": "@Akasha if 1 file processing is a matter of minutes, but not hours, and you can deal with some delay to start another file, it would be more cost effective to create an event (CloudWatch), drop a message in a queue (SQS) and reuse the same EC2 instance to process multiple files. ", "keywords": ["cost", "instance"]}]}, {"Id": "69423661", "PostId": "41016283", "Score": "0", "Text": "why would it be more cost-effective? I would still need the same processing time in total, and if I pay per minute, then it should not matter whether I run 10 boxes for 10 minutes or 1 box for 100 minutes, should it?", "CreationDate": "2016-12-12T21:12:23.127", "UserId": "245493", "filtered-sentences": [{"source": "Text", "text": "why would it be more cost-effective? ", "keywords": ["cost"]}, {"source": "Text", "text": "I would still need the same processing time in total, and if I pay per minute, then it should not matter whether I run 10 boxes for 10 minutes or 1 box for 100 minutes, should it?", "keywords": ["pay"]}]}, {"Id": "69423749", "PostId": "41016283", "Score": "0", "Text": "@Akasha from the docs: \"Partial instance-hours consumed are billed as full hours. \" https://aws.amazon.com/ec2/faqs/", "CreationDate": "2016-12-12T21:14:59.783", "UserId": "226642", "filtered-sentences": [{"source": "Text", "text": "@Akasha from the docs: \"Partial instance-hours consumed are billed as full hours. ", "keywords": ["bill", "instance"]}]}], "history": [{"Id": "133299534", "PostHistoryTypeId": "2", "PostId": "41016283", "RevisionGUID": "39b2191e-9054-4e12-879b-fdf3e46e725d", "CreationDate": "2016-12-07T11:28:01.833", "UserId": "226642", "Text": "CloudFormation will help you build your insfrastructure layer (VPC, subnet, EC2 itself) but won't be able to install specific software on your machine. For the second task, you will need OpsWorks.\r\n\r\nAnyway, I think custom AMI + User Data to small modifications (as downloading a new version of something or starting a service) is the best option so you can try it fast. No big investments in time upfront. If the UserData gets too complex, just configure a new AMI version and keep it evolving.\r\n\r\nI'm just curious about the \"each file a new instance\". How long will it take to process 1 file? I mean: you'll pay the full hour, is it cost effective for you? Have you considered using Lambda?\r\n\r\nGood luck!", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": [{"source": "Text", "text": "I'm just curious about the \"each file a new instance\". ", "keywords": ["instance"]}, {"source": "Text", "text": "I mean: you'll pay the full hour, is it cost effective for you? ", "keywords": ["cost", "pay"]}]}], "filtered-sentences": [{"source": "Body", "text": "I'm just curious about the \"each file a new instance\". ", "keywords": ["instance"]}, {"source": "Body", "text": "I mean: you'll pay the full hour, is it cost effective for you? ", "keywords": ["cost", "pay"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Title", "text": "What aws service would you recommend for dynamic instance creation?", "keywords": ["instance"]}, {"source": "Body", "text": "Processing means that I would like to run an EC2 instance with some custom apps installed, having the file available from S3. ", "keywords": ["instance"]}, {"source": "Body", "text": "For each file I would like to start a separate EC2 instance. ", "keywords": ["instance"]}]}