{"Id": "52722043", "PostTypeId": "1", "CreationDate": "2018-10-09T13:17:13.420", "Score": "2", "ViewCount": "3011", "Body": "<p>I'm trying to get the estimated cost for a given stack. e.g.</p>\n\n<p><code>aws cloudformation get-template --stack-name MyStack | aws cloudformation estimate-template-cost --template-body -\n</code></p>\n\n<p>The above is returning a <code>Template format error: unsupported structure.</code>. I would expect it to accept the template considering it is a valid CF template. Is there a workaround?</p>\n\n<p>Additionally, passing the template itself as a file results in the API returning an error due to the template being too long</p>\n\n<p><code>aws cloudformation get-template --stack-name MyStack &gt; template.yml &amp;&amp; aws cloudformation estimate-template-cost --template-body file://template.yml\n</code></p>\n\n<p>error:</p>\n\n<p><code>' at 'templateBody' failed to satisfy constraint: Member must have length less than or equal to 51200\n</code></p>\n\n<p>I suppose the template could be manually edited to remove the longer parts but that makes it very manual and I'm looking for a more straight forward way to get an estimated cost.</p>\n", "OwnerUserId": "2564199", "LastEditorUserId": "2564199", "LastEditDate": "2018-10-09T13:22:36.013", "LastActivityDate": "2018-10-09T14:03:14.063", "Title": "Using AWS CloudFormation estimate-template-cost to get the estimated cost of a live CloudFormation stack", "Tags": "|amazon-web-services|aws-cloudformation|", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "183393165", "PostHistoryTypeId": "4", "PostId": "52722043", "RevisionGUID": "9cf662ec-a5a7-4516-91e9-735335d3707a", "CreationDate": "2018-10-09T13:22:36.013", "UserId": "2564199", "Comment": "added 523 characters in body", "Text": "Using AWS CloudFormation estimate-template-cost to get the estimated cost of a live CloudFormation stack", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Using AWS CloudFormation estimate-template-cost to get the estimated cost of a live CloudFormation stack", "keywords": ["cost"]}]}, {"Id": "183392540", "PostHistoryTypeId": "2", "PostId": "52722043", "RevisionGUID": "3ceb4fd7-9e46-4326-b636-6e962d72f1f0", "CreationDate": "2018-10-09T13:17:13.420", "UserId": "2564199", "Text": "I'm trying to get the estimated cost for a given stack. e.g.\r\n\r\n```\r\naws cloudformation get-template --stack-name MyStack | aws cloudformation estimate-template-cost --template-body -\r\n```\r\n\r\nThe above is returning a `Template format error: unsupported structure.`. I would expect it to accept the template considering it is a valid CF template. Is there a workaround?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I'm trying to get the estimated cost for a given stack. ", "keywords": ["cost"]}, {"source": "Text", "text": "e.g. ``` aws cloudformation get-template --stack-name MyStack | aws cloudformation estimate-template-cost --template-body - ``` ", "keywords": ["cost"]}]}, {"Id": "183392541", "PostHistoryTypeId": "1", "PostId": "52722043", "RevisionGUID": "3ceb4fd7-9e46-4326-b636-6e962d72f1f0", "CreationDate": "2018-10-09T13:17:13.420", "UserId": "2564199", "Text": "AWS CloudFormation estimate-template-cost returns \"unsupported structure\" on valid CloudFormation templates", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "AWS CloudFormation estimate-template-cost returns \"unsupported structure\" on valid CloudFormation templates", "keywords": ["cost"]}]}, {"Id": "183392542", "PostHistoryTypeId": "3", "PostId": "52722043", "RevisionGUID": "3ceb4fd7-9e46-4326-b636-6e962d72f1f0", "CreationDate": "2018-10-09T13:17:13.420", "UserId": "2564199", "Text": "|amazon-web-services|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "183392971", "PostHistoryTypeId": "5", "PostId": "52722043", "RevisionGUID": "9cf662ec-a5a7-4516-91e9-735335d3707a", "CreationDate": "2018-10-09T13:22:36.013", "UserId": "2564199", "Comment": "added 523 characters in body", "Text": "I'm trying to get the estimated cost for a given stack. e.g.\r\n\r\n```aws cloudformation get-template --stack-name MyStack | aws cloudformation estimate-template-cost --template-body -\r\n```\r\n\r\nThe above is returning a `Template format error: unsupported structure.`. I would expect it to accept the template considering it is a valid CF template. Is there a workaround?\r\n\r\nAdditionally, passing the template itself as a file results in the API returning an error due to the template being too long\r\n\r\n```aws cloudformation get-template --stack-name MyStack > template.yml && aws cloudformation estimate-template-cost --template-body file://template.yml\r\n```\r\n\r\nerror:\r\n\r\n```' at 'templateBody' failed to satisfy constraint: Member must have length less than or equal to 51200\r\n```\r\n\r\nI suppose the template could be manually edited to remove the longer parts but that makes it very manual and I'm looking for a more straight forward way to get an estimated cost.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I'm trying to get the estimated cost for a given stack. ", "keywords": ["cost"]}, {"source": "Text", "text": "e.g. ```aws cloudformation get-template --stack-name MyStack | aws cloudformation estimate-template-cost --template-body - ``` ", "keywords": ["cost"]}, {"source": "Text", "text": "Additionally, passing the template itself as a file results in the API returning an error due to the template being too long ```aws cloudformation get-template --stack-name MyStack > template.yml && aws cloudformation estimate-template-cost --template-body file://template.yml ``` error: ```' at 'templateBody' failed to satisfy constraint: Member must have length less than or equal to 51200 ``` ", "keywords": ["cost"]}, {"source": "Text", "text": "I suppose the template could be manually edited to remove the longer parts but that makes it very manual and I'm looking for a more straight forward way to get an estimated cost.", "keywords": ["cost"]}]}], "answers": [{"Id": "52722979", "PostTypeId": "2", "ParentId": "52722043", "CreationDate": "2018-10-09T14:03:14.063", "Score": "4", "Body": "<p>The maximum size of a template body that you can pass in a CreateStack, UpdateStack, or ValidateTemplate request is 51,200 bytes.</p>\n\n<p>To use a larger template body, do one of the following:</p>\n\n<ul>\n<li>upload the template to an Amazon S3 bucket, or</li>\n<li>separate your template into multiple templates by using nested stacks</li>\n</ul>\n", "OwnerUserId": "271415", "LastActivityDate": "2018-10-09T14:03:14.063", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "183396366", "PostHistoryTypeId": "2", "PostId": "52722979", "RevisionGUID": "1dbc6b47-4006-4364-b494-5427189bd749", "CreationDate": "2018-10-09T14:03:14.063", "UserId": "271415", "Text": "The maximum size of a template body that you can pass in a CreateStack, UpdateStack, or ValidateTemplate request is 51,200 bytes.\r\n\r\nTo use a larger template body, do one of the following:\r\n\r\n  * upload the template to an Amazon S3 bucket, or\r\n  * separate your template into multiple templates by using nested stacks", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": false, "filtered-sentences": [{"source": "Title", "text": "Using AWS CloudFormation estimate-template-cost to get the estimated cost of a live CloudFormation stack", "keywords": ["cost"]}, {"source": "Body", "text": "I'm trying to get the estimated cost for a given stack. e.g. aws cloudformation get-template --stack-name MyStack | aws cloudformation estimate-template-cost --template-body - The above is returning a Template format error: unsupported structure.. ", "keywords": ["cost"]}, {"source": "Body", "text": "Additionally, passing the template itself as a file results in the API returning an error due to the template being too long aws cloudformation get-template --stack-name MyStack > template.yml && aws cloudformation estimate-template-cost --template-body file://template.yml error: ' at 'templateBody' failed to satisfy constraint: Member must have length less than or equal to 51200 I suppose the template could be manually edited to remove the longer parts but that makes it very manual and I'm looking for a more straight forward way to get an estimated cost.", "keywords": ["cost"]}]}