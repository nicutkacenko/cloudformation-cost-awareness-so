{"Id": "60067032", "PostTypeId": "1", "CreationDate": "2020-02-04T23:30:33.457", "Score": "1", "ViewCount": "3946", "Body": "<p>I have an AWS Organization with three AWS Accounts underneath:</p>\n\n<ol>\n<li><code>master</code> \u2013 contains <code>master-bus</code> (EventBridge bus) for the entire application</li>\n<li><code>order-service</code> \u2013 contains lambdas publishing to the <code>master-bus</code></li>\n<li><code>shipping-service</code> \u2013 contains lambdas triggered by some rules from <code>master-bus</code></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/CmqNA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CmqNA.png\" alt=\"Cross-account events using Amazon EventBridge\"></a></p>\n\n<p><strong>The green flow is ideal.</strong> The red is what I currently have working:</p>\n\n<ol>\n<li><code>order-service</code> put events to its own local <code>order-bus</code></li>\n<li><code>order-bus</code> sends all events to <code>master-bus</code></li>\n<li><code>master-bus</code> sends all events to all child buses (<code>order-bus</code>, <code>shipping-bus</code>)</li>\n<li><code>shipping-bus</code> has a rule filtering for the initial event and sends to target <code>shipping-service</code></li>\n</ol>\n\n<p>Is it possible to stick to a single event bus in the master account? And then, have different accounts directly interact with it, without intermediate event buses in each separate account?</p>\n", "OwnerUserId": "4916475", "LastActivityDate": "2022-07-21T18:30:56.300", "Title": "Using Amazon EventBridge for cross-account event publishing and receiving within an organization", "Tags": "|amazon-web-services|aws-cloudformation|amazon-cloudwatch|event-driven|aws-organizations|", "AnswerCount": "2", "CommentCount": "3", "FavoriteCount": "0", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "106237338", "PostId": "60067032", "Score": "0", "Text": "You can't. All account events go to the account eventbus and they can additionally be forwarded to other account event buses. It is not possible to prevent the default event bus from receiving the events.", "CreationDate": "2020-02-05T03:26:09.403", "UserId": "5660156", "filtered-sentences": []}, {"Id": "106242693", "PostId": "60067032", "Score": "0", "Text": "@victorm so basically each event pushed actually counts as 2 + count(child buses) in terms of pricing (from lambda to local bus, from local bus to master bus, from master bus to local buses) \u2013 am I counting right?", "CreationDate": "2020-02-05T08:26:58.540", "UserId": "4916475", "filtered-sentences": []}, {"Id": "106299708", "PostId": "60067032", "Score": "2", "Text": "Not necessarily. You don't pay for the default event bus for the account - you pay for the lambda. But you do pay for additional events coming from other buses. You add rules to your bus to limit which events you send to other accounts and the other accounts can filter what they allow in their buses. This way you limit your expenses.", "CreationDate": "2020-02-06T19:53:44.060", "UserId": "5660156", "filtered-sentences": [{"source": "Text", "text": "You don't pay for the default event bus for the account - you pay for the lambda. ", "keywords": ["pay"]}, {"source": "Text", "text": "But you do pay for additional events coming from other buses. ", "keywords": ["pay"]}, {"source": "Text", "text": "This way you limit your expenses.", "keywords": ["expense"]}]}], "history": [{"Id": "214316402", "PostHistoryTypeId": "2", "PostId": "60067032", "RevisionGUID": "f6f96e7c-5ff2-46ef-a52e-4654be230175", "CreationDate": "2020-02-04T23:30:33.457", "UserId": "4916475", "Text": "I have an AWS Organization with three AWS Accounts underneath:\r\n\r\n1. `master` \u2013 contains `master-bus` (EventBridge bus) for the entire application\r\n2. `order-service` \u2013 contains lambdas publishing to the `master-bus`\r\n3. `shipping-service` \u2013 contains lambdas triggered by some rules from `master-bus`\r\n\r\n[![Cross-account events using Amazon EventBridge][1]][1]\r\n\r\n**The green flow is ideal.** The red is what I currently have working:\r\n\r\n1. `order-service` put events to its own local `order-bus`\r\n2. `order-bus` sends all events to `master-bus`\r\n3. `master-bus` sends all events to all child buses (`order-bus`, `shipping-bus`)\r\n4. `shipping-bus` has a rule filtering for the initial event and sends to target `shipping-service`\r\n\r\nIs it possible to stick to a single event bus in the master account? And then, have different accounts directly interact with it, without intermediate event buses in each separate account?\r\n\r\n  [1]: https://i.stack.imgur.com/CmqNA.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "214316403", "PostHistoryTypeId": "1", "PostId": "60067032", "RevisionGUID": "f6f96e7c-5ff2-46ef-a52e-4654be230175", "CreationDate": "2020-02-04T23:30:33.457", "UserId": "4916475", "Text": "Using Amazon EventBridge for cross-account event publishing and receiving within an organization", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "214316404", "PostHistoryTypeId": "3", "PostId": "60067032", "RevisionGUID": "f6f96e7c-5ff2-46ef-a52e-4654be230175", "CreationDate": "2020-02-04T23:30:33.457", "UserId": "4916475", "Text": "|amazon-web-services|aws-cloudformation|amazon-cloudwatch|event-driven|aws-organizations|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "60272951", "PostTypeId": "2", "ParentId": "60067032", "CreationDate": "2020-02-18T02:30:55.640", "Score": "0", "Body": "<p>Yes, you don't need a unique bus in each account -- simply create a bus i.e 'master-bus' in all accounts and grants all accounts to put events into it... in each account, you would have a rule that forwards the events to the master account. In the master account, you would then create rules to filter and catch the events you need.</p>\n", "OwnerUserId": "9525122", "LastActivityDate": "2020-02-18T02:30:55.640", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "215184455", "PostHistoryTypeId": "2", "PostId": "60272951", "RevisionGUID": "fe765d88-d3e4-4b4b-9baa-08ca03df8c4d", "CreationDate": "2020-02-18T02:30:55.640", "UserId": "9525122", "Text": "Yes, you don't need a unique bus in each account -- simply create a bus i.e 'master-bus' in all accounts and grants all accounts to put events into it... in each account, you would have a rule that forwards the events to the master account. In the master account, you would then create rules to filter and catch the events you need.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}, {"Id": "60610592", "PostTypeId": "2", "ParentId": "60067032", "CreationDate": "2020-03-10T01:56:48.093", "Score": "1", "Body": "<p>A few things here. . . . </p>\n\n<ol>\n<li>An EventBus cannot trigger a target in another account, other than another account's event bus, as far as I'm aware.</li>\n<li>Do you need <code>order-bus</code>? Why don't you have your lambda  from the order service assume a role in the master account to call PutEvents directly in the <code>master-bus</code>. </li>\n</ol>\n\n<p>This suggestion doesn't get rid of all the red lines, but simplifies it a little.</p>\n", "OwnerUserId": "1641451", "LastActivityDate": "2020-03-10T01:56:48.093", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "108664275", "PostId": "60610592", "Score": "0", "Text": "So I'd still need to keep the master and all the child buses but would only use the child buses to receive/filter events?", "CreationDate": "2020-04-25T14:51:27.700", "UserId": "4916475", "filtered-sentences": []}], "history": [{"Id": "216620985", "PostHistoryTypeId": "2", "PostId": "60610592", "RevisionGUID": "945f34f5-fc14-44b0-8fbd-ef1308980829", "CreationDate": "2020-03-10T01:56:48.093", "UserId": "1641451", "Text": "A few things here. . . . \r\n\r\n1. An EventBus cannot trigger a target in another account, other than another account's event bus, as far as I'm aware.\r\n2. Do you need `order-bus`? Why don't you have your lambda  from the order service assume a role in the master account to call PutEvents directly in the `master-bus`. \r\n\r\nThis suggestion doesn't get rid of all the red lines, but simplifies it a little.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": false, "filtered-sentences": []}