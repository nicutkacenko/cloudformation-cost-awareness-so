{"Id": "66050456", "PostTypeId": "1", "AcceptedAnswerId": "66051198", "CreationDate": "2021-02-04T17:10:11.643", "Score": "2", "ViewCount": "7727", "Body": "<p>I am trying to create a Budget in an AWS account by deploying the following AWS CloudFormation Template (with Azure DevOps):</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>Parameters:\n  EmailRecipients:\n    Type: String\n    Description: Name of the Email Recipient\n  BudgetAmount:\n    Type: Number\n    Default: 500\n    Description: Budget Amount\n  AmountThreshold:\n    Type: Number\n    Default: 80\n    Description: Budget Threshold\n\nResources:\n  BudgetExample:\n    Type: &quot;AWS::Budgets::Budget&quot;\n    Properties:\n      Budget:\n        BudgetLimit:\n          Amount: !Sub ${BudgetAmount}\n          Unit: USD\n        TimeUnit: MONTHLY\n        BudgetType: COST\n      NotificationsWithSubscribers:\n        - Notification:\n            NotificationType: ACTUAL\n            ComparisonOperator: GREATER_THAN\n            Threshold: !Sub ${AmountThreshold}\n          Subscribers:\n            - SubscriptionType: EMAIL\n              Address: !Sub ${EmailRecipients}\n</code></pre>\n<p>But get the following error:</p>\n<pre><code>##[error]MultipleValidationErrors: There were 2 validation errors:\n* InvalidParameterType: Expected params.Parameters[1].ParameterValue to be a string\n* InvalidParameterType: Expected params.Parameters[2].ParameterValue to be a string\n</code></pre>\n<p>I have tried changing the <code>Type</code> from <code>Number</code> to <code>String</code> but with the same error.\nAlso tried resolving the parameter by the other intrinsic function <code>!Ref</code> without luck.\nThis is how I set the parameters for the CloudFormation template from a azure-pipelines.yml file:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>variables:\n  email_recipients: &quot;example@gmail.com&quot;\n  budget_amount: 100\n  amount_threshold: 80\n</code></pre>\n<p>And this is how they get passed them to template:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>            - task: CloudFormationCreateOrUpdateStack@1\n              displayName: budgets\n              inputs:\n                awsCredentials: ${{parameters.aws_credentials}}\n                regionName: ${{parameters.aws_region}}\n                stackName: ${{parameters.stack_name}}\n                templateSource: 'file'\n                templateFile: $(Pipeline.Workspace)/${{parameters.project_name}}-templates/budgets.yml\n                templateParametersSource: &quot;inline&quot;\n                templateParameters: |\n                  - ParameterKey: EmailRecipients\n                    ParameterValue: ${{parameters.email_recipients}}\n                  - ParameterKey: BudgetAmount\n                    ParameterValue: ${{parameters.budget_amount}}\n                  - ParameterKey: AmountThreshold\n                    ParameterValue: ${{parameters.amount_threshold}}\n                useChangeSet: true\n                changeSetName: 'role-changeset'\n                captureStackOutputs: asVariables\n                captureAsSecuredVars: false\n</code></pre>\n", "OwnerUserId": "7445528", "LastEditorUserId": "6840517", "LastEditDate": "2021-02-07T06:59:58.670", "LastActivityDate": "2021-02-07T06:59:58.670", "Title": "How to pass CloudFormation parameter as Type: Number?", "Tags": "|amazon-web-services|aws-cloudformation|", "AnswerCount": "1", "CommentCount": "10", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "116787077", "PostId": "66050456", "Score": "1", "Text": "How do you set the parameters when you want to deploy your template?", "CreationDate": "2021-02-04T22:27:48.080", "UserId": "248823", "filtered-sentences": []}, {"Id": "116795426", "PostId": "66050456", "Score": "0", "Text": "Thanks, @Marcin , I have an azure-pipelines.yml file where I pass down the parameters. I tried both setting them as strings and as integers. Keep getting the same `InvalidParameterType` error though. Any thoughts ?", "CreationDate": "2021-02-05T08:31:30.253", "UserId": "7445528", "filtered-sentences": []}, {"Id": "116795964", "PostId": "66050456", "Score": "1", "Text": "Does using `!Ref` instead of `!Sub` solve the issue as in the answer given?", "CreationDate": "2021-02-05T08:54:17.707", "UserId": "248823", "filtered-sentences": []}, {"Id": "116796107", "PostId": "66050456", "Score": "0", "Text": "@Marcin Unfortunately not, I gave it a shot.", "CreationDate": "2021-02-05T08:59:26.940", "UserId": "7445528", "filtered-sentences": []}, {"Id": "116796127", "PostId": "66050456", "Score": "1", "Text": "I though so :-( The error is not about Ref or Sub. I think its something to do with how the arguments are passed to the template.", "CreationDate": "2021-02-05T09:00:17.987", "UserId": "248823", "filtered-sentences": []}, {"Id": "116796137", "PostId": "66050456", "Score": "0", "Text": "I think you are right. Maybe I need to look into the Azure Pipelines YAML reference a bit more ? See if there is a way to enforce type to be number or so.", "CreationDate": "2021-02-05T09:00:50.210", "UserId": "7445528", "filtered-sentences": []}, {"Id": "116796213", "PostId": "66050456", "Score": "1", "Text": "I'm not too familiar with azure pipelines, so can't suggest what could be the cause.", "CreationDate": "2021-02-05T09:03:33.980", "UserId": "248823", "filtered-sentences": []}, {"Id": "116796457", "PostId": "66050456", "Score": "0", "Text": "@Marcin fair enough, but you helped me to realize that the issue is at least on the Azure Pipeline side. I much appreciate it.", "CreationDate": "2021-02-05T09:13:05.177", "UserId": "7445528", "filtered-sentences": []}, {"Id": "116797323", "PostId": "66050456", "Score": "1", "Text": "Could you have a look at [this question](https://stackoverflow.com/questions/63959555/assigning-aws-cloudformation-output-variables-in-azure-devops-pipelines). They pass the `templateParameters` as  enitre strings blocks using `|` in yaml.", "CreationDate": "2021-02-05T09:47:12.130", "UserId": "248823", "filtered-sentences": []}, {"Id": "116797459", "PostId": "66050456", "Score": "0", "Text": "Thanks, @Marcin . I also created a new question to better reflect that my issue is actually on the Azure side: https://stackoverflow.com/questions/66061022/pass-azure-pipeline-variable-to-aws-cloudformation-template-as-parameter-with-ty . In your example, I think they only pass string parameters, maybe I am missing something ..", "CreationDate": "2021-02-05T09:52:31.907", "UserId": "7445528", "filtered-sentences": []}], "history": [{"Id": "240164855", "PostHistoryTypeId": "2", "PostId": "66050456", "RevisionGUID": "3ead73e4-6b99-47a1-b3a5-6882898e5c24", "CreationDate": "2021-02-04T17:10:11.643", "UserId": "7445528", "Text": "I am trying to create a Budget in an AWS account by deploying the following AWS CloudFormation Template (with Azure DevOps):\r\n```\r\nParameters:\r\n  EmailRecipients:\r\n    Type: String\r\n    Description: Name of the Email Recipient\r\n  BudgetAmount:\r\n    Type: Number\r\n    Default: 500\r\n    Description: Budget Amount\r\n  AmountThreshold:\r\n    Type: Number\r\n    Default: 80\r\n    Description: Budget Threshold\r\n\r\nResources:\r\n  BudgetExample:\r\n    Type: \"AWS::Budgets::Budget\"\r\n    Properties:\r\n      Budget:\r\n        BudgetLimit:\r\n          Amount: !Sub ${BudgetAmount}\r\n          Unit: USD\r\n        TimeUnit: MONTHLY\r\n        BudgetType: COST\r\n      NotificationsWithSubscribers:\r\n        - Notification:\r\n            NotificationType: ACTUAL\r\n            ComparisonOperator: GREATER_THAN\r\n            Threshold: !Sub ${AmountThreshold}\r\n          Subscribers:\r\n            - SubscriptionType: EMAIL\r\n              Address: !Sub ${EmailRecipients}\r\n```\r\nBut get the following error:\r\n```\r\n##[error]MultipleValidationErrors: There were 2 validation errors:\r\n* InvalidParameterType: Expected params.Parameters[1].ParameterValue to be a string\r\n* InvalidParameterType: Expected params.Parameters[2].ParameterValue to be a string\r\n```\r\nI have tried changing the `Type` from `Number` to `String` but with the same error.\r\nAlso tried resolving the parameter by the other intrinsic function `!Ref` without luck.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am trying to create a Budget in an AWS account by deploying the following AWS CloudFormation Template (with Azure DevOps): ``` Parameters: EmailRecipients: Type: String Description: Name of the Email Recipient BudgetAmount: Type: Number Default: 500 Description: Budget Amount AmountThreshold: Type: Number Default: 80 Description: Budget Threshold Resources: BudgetExample: Type: \"AWS::Budgets::Budget\" Properties: Budget: BudgetLimit: Amount: !Sub ${BudgetAmount} Unit: USD TimeUnit: MONTHLY BudgetType: COST NotificationsWithSubscribers: - Notification: NotificationType: ACTUAL ComparisonOperator: GREATER_THAN Threshold: !Sub ${AmountThreshold} Subscribers: - SubscriptionType: EMAIL Address: !Sub ${EmailRecipients} ``` But get the following error: ``` ##[error]MultipleValidationErrors: There were 2 validation errors: * InvalidParameterType: Expected params.Parameters[1].ParameterValue to be a string * InvalidParameterType: Expected params.Parameters[2].ParameterValue to be a string ``` I have tried changing the `Type` from `Number` to `String` but with the same error. ", "keywords": ["cost", "change"]}]}, {"Id": "240164856", "PostHistoryTypeId": "1", "PostId": "66050456", "RevisionGUID": "3ead73e4-6b99-47a1-b3a5-6882898e5c24", "CreationDate": "2021-02-04T17:10:11.643", "UserId": "7445528", "Text": "How to pass CloudFormation parameter as Type: Number?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "240164857", "PostHistoryTypeId": "3", "PostId": "66050456", "RevisionGUID": "3ead73e4-6b99-47a1-b3a5-6882898e5c24", "CreationDate": "2021-02-04T17:10:11.643", "UserId": "7445528", "Text": "|amazon-web-services|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "240205320", "PostHistoryTypeId": "5", "PostId": "66050456", "RevisionGUID": "3408fdf1-cfc7-40db-b867-c283a873a9a4", "CreationDate": "2021-02-05T08:49:48.890", "UserId": "7445528", "Comment": "deleted 45 characters in body", "Text": "I am trying to create a Budget in an AWS account by deploying the following AWS CloudFormation Template (with Azure DevOps):\r\n```\r\nParameters:\r\n  EmailRecipients:\r\n    Type: String\r\n    Description: Name of the Email Recipient\r\n  BudgetAmount:\r\n    Type: Number\r\n    Default: 500\r\n    Description: Budget Amount\r\n  AmountThreshold:\r\n    Type: Number\r\n    Default: 80\r\n    Description: Budget Threshold\r\n\r\nResources:\r\n  BudgetExample:\r\n    Type: \"AWS::Budgets::Budget\"\r\n    Properties:\r\n      Budget:\r\n        BudgetLimit:\r\n          Amount: !Sub ${BudgetAmount}\r\n          Unit: USD\r\n        TimeUnit: MONTHLY\r\n        BudgetType: COST\r\n      NotificationsWithSubscribers:\r\n        - Notification:\r\n            NotificationType: ACTUAL\r\n            ComparisonOperator: GREATER_THAN\r\n            Threshold: !Sub ${AmountThreshold}\r\n          Subscribers:\r\n            - SubscriptionType: EMAIL\r\n              Address: !Sub ${EmailRecipients}\r\n```\r\nBut get the following error:\r\n```\r\n##[error]MultipleValidationErrors: There were 2 validation errors:\r\n* InvalidParameterType: Expected params.Parameters[1].ParameterValue to be a string\r\n* InvalidParameterType: Expected params.Parameters[2].ParameterValue to be a string\r\n```\r\nI have tried changing the `Type` from `Number` to `String` but with the same error.\r\nAlso tried resolving the parameter by the other intrinsic function `!Ref` without luck.\r\nThis is how I set the parameters for the CloudFormation template from a azure-pipelines.yml file:\r\n```\r\nvariables:\r\n  email_recipients: \"example@gmail.com\"\r\n  budget_amount: 100\r\n  amount_threshold: 80\r\n```\r\nAnd this is how they get passed them to template:\r\n```\r\n            - task: CloudFormationCreateOrUpdateStack@1\r\n              displayName: budgets\r\n              inputs:\r\n                awsCredentials: ${{parameters.aws_credentials}}\r\n                regionName: ${{parameters.aws_region}}\r\n                stackName: ${{parameters.stack_name}}\r\n                templateSource: 'file'\r\n                templateFile: $(Pipeline.Workspace)/${{parameters.project_name}}-templates/budgets.yml\r\n                templateParametersSource: \"inline\"\r\n                templateParameters: |\r\n                  - ParameterKey: EmailRecipients\r\n                    ParameterValue: ${{parameters.email_recipients}}\r\n                  - ParameterKey: BudgetAmount\r\n                    ParameterValue: ${{parameters.budget_amount}}\r\n                  - ParameterKey: AmountThreshold\r\n                    ParameterValue: ${{parameters.amount_threshold}}\r\n                useChangeSet: true\r\n                changeSetName: 'role-changeset'\r\n                captureStackOutputs: asVariables\r\n                captureAsSecuredVars: false\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am trying to create a Budget in an AWS account by deploying the following AWS CloudFormation Template (with Azure DevOps): ``` Parameters: EmailRecipients: Type: String Description: Name of the Email Recipient BudgetAmount: Type: Number Default: 500 Description: Budget Amount AmountThreshold: Type: Number Default: 80 Description: Budget Threshold Resources: BudgetExample: Type: \"AWS::Budgets::Budget\" Properties: Budget: BudgetLimit: Amount: !Sub ${BudgetAmount} Unit: USD TimeUnit: MONTHLY BudgetType: COST NotificationsWithSubscribers: - Notification: NotificationType: ACTUAL ComparisonOperator: GREATER_THAN Threshold: !Sub ${AmountThreshold} Subscribers: - SubscriptionType: EMAIL Address: !Sub ${EmailRecipients} ``` But get the following error: ``` ##[error]MultipleValidationErrors: There were 2 validation errors: * InvalidParameterType: Expected params.Parameters[1].ParameterValue to be a string * InvalidParameterType: Expected params.Parameters[2].ParameterValue to be a string ``` I have tried changing the `Type` from `Number` to `String` but with the same error. ", "keywords": ["cost", "change"]}, {"source": "Text", "text": "And this is how they get passed them to template: ``` - task: CloudFormationCreateOrUpdateStack@1 displayName: budgets inputs: awsCredentials: ${{parameters.aws_credentials}} regionName: ${{parameters.aws_region}} stackName: ${{parameters.stack_name}} templateSource: 'file' templateFile: $(Pipeline.Workspace)/${{parameters.project_name}}-templates/budgets.yml templateParametersSource: \"inline\" templateParameters: | - ParameterKey: EmailRecipients ParameterValue: ${{parameters.email_recipients}} - ParameterKey: BudgetAmount ParameterValue: ${{parameters.budget_amount}} - ParameterKey: AmountThreshold ParameterValue: ${{parameters.amount_threshold}} useChangeSet: true changeSetName: 'role-changeset' captureStackOutputs: asVariables captureAsSecuredVars: false ```", "keywords": ["change"]}]}, {"Id": "240204658", "PostHistoryTypeId": "5", "PostId": "66050456", "RevisionGUID": "28b68a9b-9a8e-48f5-8b36-f592112fcc6e", "CreationDate": "2021-02-05T08:36:58.103", "UserId": "7445528", "Comment": "added 213 characters in body", "Text": "I am trying to create a Budget in an AWS account by deploying the following AWS CloudFormation Template (with Azure DevOps):\r\n```\r\nParameters:\r\n  EmailRecipients:\r\n    Type: String\r\n    Description: Name of the Email Recipient\r\n  BudgetAmount:\r\n    Type: Number\r\n    Default: 500\r\n    Description: Budget Amount\r\n  AmountThreshold:\r\n    Type: Number\r\n    Default: 80\r\n    Description: Budget Threshold\r\n\r\nResources:\r\n  BudgetExample:\r\n    Type: \"AWS::Budgets::Budget\"\r\n    Properties:\r\n      Budget:\r\n        BudgetLimit:\r\n          Amount: !Sub ${BudgetAmount}\r\n          Unit: USD\r\n        TimeUnit: MONTHLY\r\n        BudgetType: COST\r\n      NotificationsWithSubscribers:\r\n        - Notification:\r\n            NotificationType: ACTUAL\r\n            ComparisonOperator: GREATER_THAN\r\n            Threshold: !Sub ${AmountThreshold}\r\n          Subscribers:\r\n            - SubscriptionType: EMAIL\r\n              Address: !Sub ${EmailRecipients}\r\n```\r\nBut get the following error:\r\n```\r\n##[error]MultipleValidationErrors: There were 2 validation errors:\r\n* InvalidParameterType: Expected params.Parameters[1].ParameterValue to be a string\r\n* InvalidParameterType: Expected params.Parameters[2].ParameterValue to be a string\r\n```\r\nI have tried changing the `Type` from `Number` to `String` but with the same error.\r\nAlso tried resolving the parameter by the other intrinsic function `!Ref` without luck.\r\nThis is how I pass the parameters down to the CloudFormation template from a azure-pipelines.yml file:\r\n```\r\nvariables:\r\n  email_recipients: \"example@gmail.com\"\r\n  budget_amount: 100\r\n  amount_threshold: 80\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am trying to create a Budget in an AWS account by deploying the following AWS CloudFormation Template (with Azure DevOps): ``` Parameters: EmailRecipients: Type: String Description: Name of the Email Recipient BudgetAmount: Type: Number Default: 500 Description: Budget Amount AmountThreshold: Type: Number Default: 80 Description: Budget Threshold Resources: BudgetExample: Type: \"AWS::Budgets::Budget\" Properties: Budget: BudgetLimit: Amount: !Sub ${BudgetAmount} Unit: USD TimeUnit: MONTHLY BudgetType: COST NotificationsWithSubscribers: - Notification: NotificationType: ACTUAL ComparisonOperator: GREATER_THAN Threshold: !Sub ${AmountThreshold} Subscribers: - SubscriptionType: EMAIL Address: !Sub ${EmailRecipients} ``` But get the following error: ``` ##[error]MultipleValidationErrors: There were 2 validation errors: * InvalidParameterType: Expected params.Parameters[1].ParameterValue to be a string * InvalidParameterType: Expected params.Parameters[2].ParameterValue to be a string ``` I have tried changing the `Type` from `Number` to `String` but with the same error. ", "keywords": ["cost", "change"]}]}, {"Id": "240205008", "PostHistoryTypeId": "5", "PostId": "66050456", "RevisionGUID": "6f9e2921-b382-4d62-aced-90f7b7b46e76", "CreationDate": "2021-02-05T08:43:57.580", "UserId": "7445528", "Comment": "added 1169 characters in body", "Text": "I am trying to create a Budget in an AWS account by deploying the following AWS CloudFormation Template (with Azure DevOps):\r\n```\r\nParameters:\r\n  EmailRecipients:\r\n    Type: String\r\n    Description: Name of the Email Recipient\r\n  BudgetAmount:\r\n    Type: Number\r\n    Default: 500\r\n    Description: Budget Amount\r\n  AmountThreshold:\r\n    Type: Number\r\n    Default: 80\r\n    Description: Budget Threshold\r\n\r\nResources:\r\n  BudgetExample:\r\n    Type: \"AWS::Budgets::Budget\"\r\n    Properties:\r\n      Budget:\r\n        BudgetLimit:\r\n          Amount: !Sub ${BudgetAmount}\r\n          Unit: USD\r\n        TimeUnit: MONTHLY\r\n        BudgetType: COST\r\n      NotificationsWithSubscribers:\r\n        - Notification:\r\n            NotificationType: ACTUAL\r\n            ComparisonOperator: GREATER_THAN\r\n            Threshold: !Sub ${AmountThreshold}\r\n          Subscribers:\r\n            - SubscriptionType: EMAIL\r\n              Address: !Sub ${EmailRecipients}\r\n```\r\nBut get the following error:\r\n```\r\n##[error]MultipleValidationErrors: There were 2 validation errors:\r\n* InvalidParameterType: Expected params.Parameters[1].ParameterValue to be a string\r\n* InvalidParameterType: Expected params.Parameters[2].ParameterValue to be a string\r\n```\r\nI have tried changing the `Type` from `Number` to `String` but with the same error.\r\nAlso tried resolving the parameter by the other intrinsic function `!Ref` without luck.\r\nThis is how I set the parameters for the CloudFormation template from a azure-pipelines.yml file:\r\n```\r\nvariables:\r\n  email_recipients: \"example@gmail.com\"\r\n  budget_amount: 100\r\n  amount_threshold: 80\r\n```\r\nAnd this is how they get passed them to template:\r\n```\r\n            - task: CloudFormationCreateOrUpdateStack@1\r\n              displayName: budgets\r\n              inputs:\r\n                awsCredentials: ${{parameters.aws_credentials}}\r\n                regionName: ${{parameters.aws_region}}\r\n                stackName: ${{parameters.stack_name}}\r\n                templateSource: 'file'\r\n                templateFile: $(Pipeline.Workspace)/${{parameters.project_name}}-templates/budgets.yml\r\n                templateParametersSource: \"inline\"\r\n                warnWhenNoWorkNeeded: false\r\n                templateParameters: |\r\n                  - ParameterKey: EmailRecipients\r\n                    ParameterValue: ${{parameters.email_recipients}}\r\n                  - ParameterKey: BudgetAmount\r\n                    ParameterValue: ${{parameters.budget_amount}}\r\n                  - ParameterKey: AmountThreshold\r\n                    ParameterValue: ${{parameters.amount_threshold}}\r\n                useChangeSet: true\r\n                changeSetName: 'role-changeset'\r\n                captureStackOutputs: asVariables\r\n                captureAsSecuredVars: false\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am trying to create a Budget in an AWS account by deploying the following AWS CloudFormation Template (with Azure DevOps): ``` Parameters: EmailRecipients: Type: String Description: Name of the Email Recipient BudgetAmount: Type: Number Default: 500 Description: Budget Amount AmountThreshold: Type: Number Default: 80 Description: Budget Threshold Resources: BudgetExample: Type: \"AWS::Budgets::Budget\" Properties: Budget: BudgetLimit: Amount: !Sub ${BudgetAmount} Unit: USD TimeUnit: MONTHLY BudgetType: COST NotificationsWithSubscribers: - Notification: NotificationType: ACTUAL ComparisonOperator: GREATER_THAN Threshold: !Sub ${AmountThreshold} Subscribers: - SubscriptionType: EMAIL Address: !Sub ${EmailRecipients} ``` But get the following error: ``` ##[error]MultipleValidationErrors: There were 2 validation errors: * InvalidParameterType: Expected params.Parameters[1].ParameterValue to be a string * InvalidParameterType: Expected params.Parameters[2].ParameterValue to be a string ``` I have tried changing the `Type` from `Number` to `String` but with the same error. ", "keywords": ["cost", "change"]}, {"source": "Text", "text": "And this is how they get passed them to template: ``` - task: CloudFormationCreateOrUpdateStack@1 displayName: budgets inputs: awsCredentials: ${{parameters.aws_credentials}} regionName: ${{parameters.aws_region}} stackName: ${{parameters.stack_name}} templateSource: 'file' templateFile: $(Pipeline.Workspace)/${{parameters.project_name}}-templates/budgets.yml templateParametersSource: \"inline\" warnWhenNoWorkNeeded: false templateParameters: | - ParameterKey: EmailRecipients ParameterValue: ${{parameters.email_recipients}} - ParameterKey: BudgetAmount ParameterValue: ${{parameters.budget_amount}} - ParameterKey: AmountThreshold ParameterValue: ${{parameters.amount_threshold}} useChangeSet: true changeSetName: 'role-changeset' captureStackOutputs: asVariables captureAsSecuredVars: false ```", "keywords": ["change"]}]}, {"Id": "240322880", "PostHistoryTypeId": "5", "PostId": "66050456", "RevisionGUID": "04b7276c-b5a1-4265-9fe8-f13cb5aa6f8f", "CreationDate": "2021-02-07T06:59:58.670", "UserId": "6840517", "Comment": "Added yaml sintax highlightning", "Text": "I am trying to create a Budget in an AWS account by deploying the following AWS CloudFormation Template (with Azure DevOps):\r\n```yaml\r\nParameters:\r\n  EmailRecipients:\r\n    Type: String\r\n    Description: Name of the Email Recipient\r\n  BudgetAmount:\r\n    Type: Number\r\n    Default: 500\r\n    Description: Budget Amount\r\n  AmountThreshold:\r\n    Type: Number\r\n    Default: 80\r\n    Description: Budget Threshold\r\n\r\nResources:\r\n  BudgetExample:\r\n    Type: \"AWS::Budgets::Budget\"\r\n    Properties:\r\n      Budget:\r\n        BudgetLimit:\r\n          Amount: !Sub ${BudgetAmount}\r\n          Unit: USD\r\n        TimeUnit: MONTHLY\r\n        BudgetType: COST\r\n      NotificationsWithSubscribers:\r\n        - Notification:\r\n            NotificationType: ACTUAL\r\n            ComparisonOperator: GREATER_THAN\r\n            Threshold: !Sub ${AmountThreshold}\r\n          Subscribers:\r\n            - SubscriptionType: EMAIL\r\n              Address: !Sub ${EmailRecipients}\r\n```\r\nBut get the following error:\r\n```\r\n##[error]MultipleValidationErrors: There were 2 validation errors:\r\n* InvalidParameterType: Expected params.Parameters[1].ParameterValue to be a string\r\n* InvalidParameterType: Expected params.Parameters[2].ParameterValue to be a string\r\n```\r\nI have tried changing the `Type` from `Number` to `String` but with the same error.\r\nAlso tried resolving the parameter by the other intrinsic function `!Ref` without luck.\r\nThis is how I set the parameters for the CloudFormation template from a azure-pipelines.yml file:\r\n```yaml\r\nvariables:\r\n  email_recipients: \"example@gmail.com\"\r\n  budget_amount: 100\r\n  amount_threshold: 80\r\n```\r\nAnd this is how they get passed them to template:\r\n```yaml\r\n            - task: CloudFormationCreateOrUpdateStack@1\r\n              displayName: budgets\r\n              inputs:\r\n                awsCredentials: ${{parameters.aws_credentials}}\r\n                regionName: ${{parameters.aws_region}}\r\n                stackName: ${{parameters.stack_name}}\r\n                templateSource: 'file'\r\n                templateFile: $(Pipeline.Workspace)/${{parameters.project_name}}-templates/budgets.yml\r\n                templateParametersSource: \"inline\"\r\n                templateParameters: |\r\n                  - ParameterKey: EmailRecipients\r\n                    ParameterValue: ${{parameters.email_recipients}}\r\n                  - ParameterKey: BudgetAmount\r\n                    ParameterValue: ${{parameters.budget_amount}}\r\n                  - ParameterKey: AmountThreshold\r\n                    ParameterValue: ${{parameters.amount_threshold}}\r\n                useChangeSet: true\r\n                changeSetName: 'role-changeset'\r\n                captureStackOutputs: asVariables\r\n                captureAsSecuredVars: false\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am trying to create a Budget in an AWS account by deploying the following AWS CloudFormation Template (with Azure DevOps): ```yaml Parameters: EmailRecipients: Type: String Description: Name of the Email Recipient BudgetAmount: Type: Number Default: 500 Description: Budget Amount AmountThreshold: Type: Number Default: 80 Description: Budget Threshold Resources: BudgetExample: Type: \"AWS::Budgets::Budget\" Properties: Budget: BudgetLimit: Amount: !Sub ${BudgetAmount} Unit: USD TimeUnit: MONTHLY BudgetType: COST NotificationsWithSubscribers: - Notification: NotificationType: ACTUAL ComparisonOperator: GREATER_THAN Threshold: !Sub ${AmountThreshold} Subscribers: - SubscriptionType: EMAIL Address: !Sub ${EmailRecipients} ``` But get the following error: ``` ##[error]MultipleValidationErrors: There were 2 validation errors: * InvalidParameterType: Expected params.Parameters[1].ParameterValue to be a string * InvalidParameterType: Expected params.Parameters[2].ParameterValue to be a string ``` I have tried changing the `Type` from `Number` to `String` but with the same error. ", "keywords": ["cost", "change"]}, {"source": "Text", "text": "And this is how they get passed them to template: ```yaml - task: CloudFormationCreateOrUpdateStack@1 displayName: budgets inputs: awsCredentials: ${{parameters.aws_credentials}} regionName: ${{parameters.aws_region}} stackName: ${{parameters.stack_name}} templateSource: 'file' templateFile: $(Pipeline.Workspace)/${{parameters.project_name}}-templates/budgets.yml templateParametersSource: \"inline\" templateParameters: | - ParameterKey: EmailRecipients ParameterValue: ${{parameters.email_recipients}} - ParameterKey: BudgetAmount ParameterValue: ${{parameters.budget_amount}} - ParameterKey: AmountThreshold ParameterValue: ${{parameters.amount_threshold}} useChangeSet: true changeSetName: 'role-changeset' captureStackOutputs: asVariables captureAsSecuredVars: false ```", "keywords": ["change"]}]}, {"Id": "240322881", "PostHistoryTypeId": "24", "PostId": "66050456", "RevisionGUID": "04b7276c-b5a1-4265-9fe8-f13cb5aa6f8f", "CreationDate": "2021-02-07T06:59:58.670", "Comment": "Proposed by 6840517 approved by 9515207, 3025856 edit id of 5085980", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "66051198", "PostTypeId": "2", "ParentId": "66050456", "CreationDate": "2021-02-04T17:56:48.100", "Score": "4", "Body": "<p><a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/parameters-section-structure.html#parameters-section-structure-properties\" rel=\"nofollow noreferrer\">Parameters</a></p>\n<p><code>Number</code>:</p>\n<blockquote>\n<p>An integer or float. AWS CloudFormation validates the parameter value as a number; however, when you use the parameter elsewhere in your template (for example, by using the Ref intrinsic function), the parameter value becomes a string.</p>\n</blockquote>\n<pre class=\"lang-yaml prettyprint-override\"><code>---\nAWSTemplateFormatVersion: 2010-09-09\nDescription: &gt;-\n    Deploy an instance of wallaby api to your AWS Organization.\nParameters:\n  EmailRecipients:\n    Type: String\n    Description: Name of the Email Recipient\n  BudgetAmount:\n    Type: Number\n    Default: 500\n    Description: Budget Amount\n  AmountThreshold:\n    Type: Number\n    Default: 80\n    Description: Budget Threshold\n\nResources:\n  BudgetExample:\n    Type: &quot;AWS::Budgets::Budget&quot;\n    Properties:\n      Budget:\n        BudgetLimit:\n          Amount: !Ref BudgetAmount\n          Unit: USD\n        TimeUnit: MONTHLY\n        BudgetType: COST\n      NotificationsWithSubscribers:\n        - Notification:\n            NotificationType: ACTUAL\n            ComparisonOperator: GREATER_THAN\n            Threshold: !Ref AmountThreshold\n          Subscribers:\n            - SubscriptionType: EMAIL\n              Address: !Ref EmailRecipients\n</code></pre>\n<p><a href=\"https://github.com/aws-cloudformation/cfn-python-lint\" rel=\"nofollow noreferrer\">cfn-lint</a> check</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ cfn-lint cfn.yml\n$ echo $?\n0\n</code></pre>\n<p>UPDATE:</p>\n<p>As the original post got updated. User created another post <a href=\"https://stackoverflow.com/questions/66061022/pass-azure-pipeline-variable-to-aws-cloudformation-template-as-parameter-with-ty\">Pass Azure pipeline variable to AWS Cloudformation template as parameter with type: Number</a></p>\n", "OwnerUserId": "2246345", "LastEditorUserId": "2246345", "LastEditDate": "2021-02-05T10:24:33.047", "LastActivityDate": "2021-02-05T10:24:33.047", "CommentCount": "4", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "116796185", "PostId": "66051198", "Score": "1", "Text": "Could you please revisit the answer. It is not about use of Ref or Sub.", "CreationDate": "2021-02-05T09:02:32.737", "UserId": "248823", "filtered-sentences": []}, {"Id": "116796360", "PostId": "66051198", "Score": "0", "Text": "@Marcin sure seems like the question got updated. I answered it based on the initial facts being shared in the OP regarding passing the number as it is saying right now too. Plus it is not yet accepted as the answer. I can check  `Azure Pipeline Yaml` syntax and update. Like you I too am not acquainted with `Azure Pipeline Yaml`.", "CreationDate": "2021-02-05T09:09:24.063", "UserId": "2246345", "filtered-sentences": []}, {"Id": "116796511", "PostId": "66051198", "Score": "1", "Text": "No problem. Just wanted to let you know as you may better idea about azure that I have:-)", "CreationDate": "2021-02-05T09:14:52.453", "UserId": "248823", "filtered-sentences": []}, {"Id": "116796603", "PostId": "66051198", "Score": "0", "Text": "@Marcin really appreciated the mention.  I am learning from your answers here.  As I mentioned in my earlier comment, I too am like you in the case of  `Azure` :) Have a good day!!", "CreationDate": "2021-02-05T09:18:03.577", "UserId": "2246345", "filtered-sentences": []}], "history": [{"Id": "240168052", "PostHistoryTypeId": "2", "PostId": "66051198", "RevisionGUID": "c5dbb427-2cf4-4fc4-b37d-32b7cc48b6fa", "CreationDate": "2021-02-04T17:56:48.100", "UserId": "2246345", "Text": "[Parameters](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/parameters-section-structure.html#parameters-section-structure-properties)\r\n\r\n`Number`:\r\n\r\n>An integer or float. AWS CloudFormation validates the parameter value as a number; however, when you use the parameter elsewhere in your template (for example, by using the Ref intrinsic function), the parameter value becomes a string.\r\n\r\n\r\n```yaml\r\n---\r\nAWSTemplateFormatVersion: 2010-09-09\r\nDescription: >-\r\n    Deploy an instance of wallaby api to your AWS Organization.\r\nParameters:\r\n  EmailRecipients:\r\n    Type: String\r\n    Description: Name of the Email Recipient\r\n  BudgetAmount:\r\n    Type: Number\r\n    Default: 500\r\n    Description: Budget Amount\r\n  AmountThreshold:\r\n    Type: Number\r\n    Default: 80\r\n    Description: Budget Threshold\r\n\r\nResources:\r\n  BudgetExample:\r\n    Type: \"AWS::Budgets::Budget\"\r\n    Properties:\r\n      Budget:\r\n        BudgetLimit:\r\n          Amount: !Ref BudgetAmount\r\n          Unit: USD\r\n        TimeUnit: MONTHLY\r\n        BudgetType: COST\r\n      NotificationsWithSubscribers:\r\n        - Notification:\r\n            NotificationType: ACTUAL\r\n            ComparisonOperator: GREATER_THAN\r\n            Threshold: !Ref AmountThreshold\r\n          Subscribers:\r\n            - SubscriptionType: EMAIL\r\n              Address: !Ref EmailRecipients\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "```yaml --- AWSTemplateFormatVersion: 2010-09-09 Description: >- Deploy an instance of wallaby api to your AWS Organization. ", "keywords": ["instance"]}, {"source": "Text", "text": "Parameters: EmailRecipients: Type: String Description: Name of the Email Recipient BudgetAmount: Type: Number Default: 500 Description: Budget Amount AmountThreshold: Type: Number Default: 80 Description: Budget Threshold Resources: BudgetExample: Type: \"AWS::Budgets::Budget\" Properties: Budget: BudgetLimit: Amount: !Ref BudgetAmount Unit: USD TimeUnit: MONTHLY BudgetType: COST NotificationsWithSubscribers: - Notification: NotificationType: ACTUAL ComparisonOperator: GREATER_THAN Threshold: !Ref AmountThreshold Subscribers: - SubscriptionType: EMAIL Address: !Ref EmailRecipients ```", "keywords": ["cost"]}]}, {"Id": "240168605", "PostHistoryTypeId": "5", "PostId": "66051198", "RevisionGUID": "b709abba-4b43-4079-84f8-931ef1b6a57f", "CreationDate": "2021-02-04T18:05:35.893", "UserId": "2246345", "Comment": "added 123 characters in body", "Text": "[Parameters](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/parameters-section-structure.html#parameters-section-structure-properties)\r\n\r\n`Number`:\r\n\r\n>An integer or float. AWS CloudFormation validates the parameter value as a number; however, when you use the parameter elsewhere in your template (for example, by using the Ref intrinsic function), the parameter value becomes a string.\r\n\r\n\r\n```yaml\r\n---\r\nAWSTemplateFormatVersion: 2010-09-09\r\nDescription: >-\r\n    Deploy an instance of wallaby api to your AWS Organization.\r\nParameters:\r\n  EmailRecipients:\r\n    Type: String\r\n    Description: Name of the Email Recipient\r\n  BudgetAmount:\r\n    Type: Number\r\n    Default: 500\r\n    Description: Budget Amount\r\n  AmountThreshold:\r\n    Type: Number\r\n    Default: 80\r\n    Description: Budget Threshold\r\n\r\nResources:\r\n  BudgetExample:\r\n    Type: \"AWS::Budgets::Budget\"\r\n    Properties:\r\n      Budget:\r\n        BudgetLimit:\r\n          Amount: !Ref BudgetAmount\r\n          Unit: USD\r\n        TimeUnit: MONTHLY\r\n        BudgetType: COST\r\n      NotificationsWithSubscribers:\r\n        - Notification:\r\n            NotificationType: ACTUAL\r\n            ComparisonOperator: GREATER_THAN\r\n            Threshold: !Ref AmountThreshold\r\n          Subscribers:\r\n            - SubscriptionType: EMAIL\r\n              Address: !Ref EmailRecipients\r\n```\r\n\r\n[cfn-lint](https://github.com/aws-cloudformation/cfn-python-lint) check\r\n\r\n```sh\r\n$ cfn-lint cfn.yml\r\n$ echo $?\r\n0\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "```yaml --- AWSTemplateFormatVersion: 2010-09-09 Description: >- Deploy an instance of wallaby api to your AWS Organization. ", "keywords": ["instance"]}, {"source": "Text", "text": "Parameters: EmailRecipients: Type: String Description: Name of the Email Recipient BudgetAmount: Type: Number Default: 500 Description: Budget Amount AmountThreshold: Type: Number Default: 80 Description: Budget Threshold Resources: BudgetExample: Type: \"AWS::Budgets::Budget\" Properties: Budget: BudgetLimit: Amount: !Ref BudgetAmount Unit: USD TimeUnit: MONTHLY BudgetType: COST NotificationsWithSubscribers: - Notification: NotificationType: ACTUAL ComparisonOperator: GREATER_THAN Threshold: !Ref AmountThreshold Subscribers: - SubscriptionType: EMAIL Address: !Ref EmailRecipients ``` [cfn-lint](https://github.com/aws-cloudformation/cfn-python-lint) check ```sh $ cfn-lint cfn.yml $ echo $? 0 ```", "keywords": ["cost"]}]}, {"Id": "240210908", "PostHistoryTypeId": "5", "PostId": "66051198", "RevisionGUID": "d8d5524a-55e4-4858-a71a-62cd9f45eb42", "CreationDate": "2021-02-05T10:24:33.047", "UserId": "2246345", "Comment": "updating the reference to the question user created.", "Text": "[Parameters](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/parameters-section-structure.html#parameters-section-structure-properties)\r\n\r\n`Number`:\r\n\r\n>An integer or float. AWS CloudFormation validates the parameter value as a number; however, when you use the parameter elsewhere in your template (for example, by using the Ref intrinsic function), the parameter value becomes a string.\r\n\r\n\r\n```yaml\r\n---\r\nAWSTemplateFormatVersion: 2010-09-09\r\nDescription: >-\r\n    Deploy an instance of wallaby api to your AWS Organization.\r\nParameters:\r\n  EmailRecipients:\r\n    Type: String\r\n    Description: Name of the Email Recipient\r\n  BudgetAmount:\r\n    Type: Number\r\n    Default: 500\r\n    Description: Budget Amount\r\n  AmountThreshold:\r\n    Type: Number\r\n    Default: 80\r\n    Description: Budget Threshold\r\n\r\nResources:\r\n  BudgetExample:\r\n    Type: \"AWS::Budgets::Budget\"\r\n    Properties:\r\n      Budget:\r\n        BudgetLimit:\r\n          Amount: !Ref BudgetAmount\r\n          Unit: USD\r\n        TimeUnit: MONTHLY\r\n        BudgetType: COST\r\n      NotificationsWithSubscribers:\r\n        - Notification:\r\n            NotificationType: ACTUAL\r\n            ComparisonOperator: GREATER_THAN\r\n            Threshold: !Ref AmountThreshold\r\n          Subscribers:\r\n            - SubscriptionType: EMAIL\r\n              Address: !Ref EmailRecipients\r\n```\r\n\r\n[cfn-lint](https://github.com/aws-cloudformation/cfn-python-lint) check\r\n\r\n```sh\r\n$ cfn-lint cfn.yml\r\n$ echo $?\r\n0\r\n```\r\n\r\n\r\nUPDATE:\r\n\r\nAs the original post got updated. User created another post [Pass Azure pipeline variable to AWS Cloudformation template as parameter with type: Number](https://stackoverflow.com/questions/66061022/pass-azure-pipeline-variable-to-aws-cloudformation-template-as-parameter-with-ty)", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "```yaml --- AWSTemplateFormatVersion: 2010-09-09 Description: >- Deploy an instance of wallaby api to your AWS Organization. ", "keywords": ["instance"]}, {"source": "Text", "text": "Parameters: EmailRecipients: Type: String Description: Name of the Email Recipient BudgetAmount: Type: Number Default: 500 Description: Budget Amount AmountThreshold: Type: Number Default: 80 Description: Budget Threshold Resources: BudgetExample: Type: \"AWS::Budgets::Budget\" Properties: Budget: BudgetLimit: Amount: !Ref BudgetAmount Unit: USD TimeUnit: MONTHLY BudgetType: COST NotificationsWithSubscribers: - Notification: NotificationType: ACTUAL ComparisonOperator: GREATER_THAN Threshold: !Ref AmountThreshold Subscribers: - SubscriptionType: EMAIL Address: !Ref EmailRecipients ``` [cfn-lint](https://github.com/aws-cloudformation/cfn-python-lint) check ```sh $ cfn-lint cfn.yml $ echo $? 0 ``` UPDATE: As the original post got updated. User created another post [Pass Azure pipeline variable to AWS Cloudformation template as parameter with type: Number](https://stackoverflow.com/questions/66061022/pass-azure-pipeline-variable-to-aws-cloudformation-template-as-parameter-with-ty)", "keywords": ["cost"]}]}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "I am trying to create a Budget in an AWS account by deploying the following AWS CloudFormation Template (with Azure DevOps): But get the following error: I have tried changing the Type from Number to String but with the same error. ", "keywords": ["change"]}]}