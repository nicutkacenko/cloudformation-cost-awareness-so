{"Id": "72175775", "PostTypeId": "1", "AcceptedAnswerId": "72177812", "CreationDate": "2022-05-09T17:05:51.983", "Score": "5", "ViewCount": "5441", "Body": "<p>I've created and deployed a production stack:</p>\n<pre class=\"lang-js prettyprint-override\"><code>const app = new cdk.App();\nconst stack = new cdk.Stack(app, 'myorg-production-api');\n</code></pre>\n<p>Now It's important to change the naming schema, and I need this stack to be <code>myorg-api-production-root</code>.</p>\n<p>Of course, I can do it by manually destroying the old one, and deploying the new one (both can't exist at the same time, because of the &quot;singleton&quot; resources like DNS records), but this means a huge downtime, which I need to avoid at all cost.</p>\n<p>Can I somehow intervene into CDK's stack identity determination process and change stack names without the downtime?</p>\n", "OwnerUserId": "1943849", "LastEditorUserId": "1103511", "LastEditDate": "2022-05-09T20:23:16.600", "LastActivityDate": "2022-05-09T20:23:16.600", "Title": "AWS CDK: How to rename existing stacks without losing the ability to update?", "Tags": "|amazon-web-services|aws-cloudformation|rename|aws-cdk|downtime|", "AnswerCount": "1", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "127526760", "PostId": "72175775", "Score": "0", "Text": "You generally cannot rename any resource in AWS if the name in question is actually the resource ID, which it is in the case of stacks. Renaming is typically restricted to scenarios where the name is actually a tag (called 'Name'), not a resource ID.", "CreationDate": "2022-05-09T20:28:34.080", "UserId": "271415", "filtered-sentences": []}], "history": [{"Id": "269803229", "PostHistoryTypeId": "2", "PostId": "72175775", "RevisionGUID": "d783fa89-23f6-4042-bab1-992eb7bf6835", "CreationDate": "2022-05-09T17:05:51.983", "UserId": "1943849", "Text": "I've created and deployed a production stack:\r\n\r\n```typescript\r\nconst app = new cdk.App();\r\nconst stack = new cdk.Stack(app, 'myorg-production-api');\r\n```\r\n\r\nNow It's important to change the naming schema, and I need this stack to be `myorg-api-production-root`.\r\n\r\nOf course, I can do it by manually destroying the old one, and deploying the new one (both can't exist at the same time, because of the \"singleton\" resources like DNS records), but this means a huge downtime, which I need to avoid at all cost.\r\n\r\nCan I somehow intervene into CDK's stack identity determination process and change stack names without the downtime?\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Now It's important to change the naming schema, and I need this stack to be `myorg-api-production-root`. ", "keywords": ["change"]}, {"source": "Text", "text": "Of course, I can do it by manually destroying the old one, and deploying the new one (both can't exist at the same time, because of the \"singleton\" resources like DNS records), but this means a huge downtime, which I need to avoid at all cost. ", "keywords": ["cost"]}, {"source": "Text", "text": "Can I somehow intervene into CDK's stack identity determination process and change stack names without the downtime?", "keywords": ["change"]}]}, {"Id": "269803231", "PostHistoryTypeId": "1", "PostId": "72175775", "RevisionGUID": "d783fa89-23f6-4042-bab1-992eb7bf6835", "CreationDate": "2022-05-09T17:05:51.983", "UserId": "1943849", "Text": "AWS CDK: How to rename existing stacks without loosing the ability to update?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "269803232", "PostHistoryTypeId": "3", "PostId": "72175775", "RevisionGUID": "d783fa89-23f6-4042-bab1-992eb7bf6835", "CreationDate": "2022-05-09T17:05:51.983", "UserId": "1943849", "Text": "|amazon-web-services|aws-cloudformation|rename|aws-cdk|downtime|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "269814072", "PostHistoryTypeId": "4", "PostId": "72175775", "RevisionGUID": "295b6c11-2169-425c-8f0d-9d702004e568", "CreationDate": "2022-05-09T20:23:16.600", "UserId": "1103511", "Comment": "fix typo", "Text": "AWS CDK: How to rename existing stacks without losing the ability to update?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "72177812", "PostTypeId": "2", "ParentId": "72175775", "CreationDate": "2022-05-09T20:22:47.207", "Score": "9", "Body": "<p>No, it's not possible to change an existing stack's name, either with or without the CDK.</p>\n<p>Under the hood, <code>cdk deploy</code> sets the stack name with the CloudFormation <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateChangeSet.html\" rel=\"noreferrer\">CreateChangeSet</a> API (then <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_ExecuteChangeSet.html\" rel=\"noreferrer\">ExecuteChangeSet</a>) on create.  The stack name is a unique, immutable id in CloudFormation.</p>\n", "OwnerUserId": "1103511", "LastActivityDate": "2022-05-09T20:22:47.207", "CommentCount": "3", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "127547956", "PostId": "72177812", "Score": "2", "Text": "You're right. Probably, in my case, the best approach would be not to use meaningful ids from the very beginning, but some kind of random ids, and keep meaningful information in tags.", "CreationDate": "2022-05-10T17:09:59.640", "UserId": "1943849", "filtered-sentences": []}, {"Id": "132337900", "PostId": "72177812", "Score": "0", "Text": "@astef that's actually a pretty good idea. thx!", "CreationDate": "2023-01-03T10:04:55.833", "UserId": "185097", "filtered-sentences": []}, {"Id": "132338071", "PostId": "72177812", "Score": "5", "Text": "@astef except that when looking in the aws console you wouldn't have a clue what is going on.. ", "CreationDate": "2023-01-03T10:13:10.337", "UserId": "185097", "filtered-sentences": []}], "history": [{"Id": "269814048", "PostHistoryTypeId": "2", "PostId": "72177812", "RevisionGUID": "af4f72cc-a90d-405d-bf9a-b8198ff08fb9", "CreationDate": "2022-05-09T20:22:47.207", "UserId": "1103511", "Text": "No, it's not possible to change an existing stack's name, either with or without the CDK.\r\n\r\nUnder the hood, `cdk deploy` sets the stack name with the CloudFormation [CreateChangeSet](https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_CreateChangeSet.html) API (then [ExecuteChangeSet](https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_ExecuteChangeSet.html)) on create.  The stack name is a unique, immutable id in CloudFormation.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "No, it's not possible to change an existing stack's name, either with or without the CDK. ", "keywords": ["change"]}]}], "filtered-sentences": [{"source": "Body", "text": "No, it's not possible to change an existing stack's name, either with or without the CDK. ", "keywords": ["change"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "I've created and deployed a production stack: Now It's important to change the naming schema, and I need this stack to be myorg-api-production-root. ", "keywords": ["change"]}, {"source": "Body", "text": "Of course, I can do it by manually destroying the old one, and deploying the new one (both can't exist at the same time, because of the \"singleton\" resources like DNS records), but this means a huge downtime, which I need to avoid at all cost. ", "keywords": ["cost"]}, {"source": "Body", "text": "Can I somehow intervene into CDK's stack identity determination process and change stack names without the downtime?", "keywords": ["change"]}]}