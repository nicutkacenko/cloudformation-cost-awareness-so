{"Id": "72157118", "PostTypeId": "1", "AcceptedAnswerId": "72157186", "CreationDate": "2022-05-07T23:47:44.643", "Score": "0", "ViewCount": "193", "Body": "<p>I asked question about how to code cost-efficient way with CDK in here.</p>\n<p><a href=\"https://stackoverflow.com/questions/71836274/what-is-the-cost-efficient-approach-for-aws-serverless-team-development?noredirect=1#comment127052075_71836274\">https://stackoverflow.com/questions/71836274/what-is-the-cost-efficient-approach-for-aws-serverless-team-development?noredirect=1#comment127052075_71836274</a></p>\n<p>But the question is closed with [Questions related to pricing or costs of services are not acceptable here].</p>\n<p><a href=\"https://stackoverflow.com/users/405555/elliveny\">https://stackoverflow.com/users/405555/elliveny</a> and\n<a href=\"https://stackoverflow.com/users/174777/john-rotenstein\">https://stackoverflow.com/users/174777/john-rotenstein</a></p>\n<p>advised me to share a single account for developers and I did.</p>\n<p>But now my team says if they create 2 separate branches and deploy, they are overwriting each other's work on AWS.</p>\n<ol>\n<li>developer A creates branchA from develop</li>\n<li>developer B creates branchB from develop</li>\n<li>developer A develops API (appsync + lambda)</li>\n<li>developer b develops API (appsync + lambda)</li>\n<li>developer A deploy branchA</li>\n<li>developer B deploy branchB</li>\n</ol>\n<p>and on aws developer A work is overwritten. only developer B work stays.</p>\n<p>my question :</p>\n<ol>\n<li>Is this how aws cloudformation work? or our team doing something wrong?</li>\n<li>if yes, on what level does it overwrite? for example if it is stack level, we can make <code>[2 developer chan't change same cdk stack same time]</code> rule</li>\n</ol>\n", "OwnerUserId": "18124005", "LastEditorUserId": "10418515", "LastEditDate": "2022-05-10T09:13:16.057", "LastActivityDate": "2022-05-10T09:13:16.057", "Title": "How to share cloudformation or cdk with shared development infrastructure?", "Tags": "|aws-cloudformation|", "AnswerCount": "1", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "127495357", "PostId": "72157118", "Score": "0", "Text": "This has nothing to do with CDK but with how you manage infrastructure for multiple envs", "CreationDate": "2022-05-08T08:14:17.663", "UserId": "4800344", "filtered-sentences": []}, {"Id": "127509088", "PostId": "72157118", "Score": "0", "Text": "Sorry. my question was a little confusing. \n\nThat is exactly what I want to know. How do you guys manage your development infrastructure for 10 developers", "CreationDate": "2022-05-09T06:18:11.130", "UserId": "18124005", "filtered-sentences": []}], "history": [{"Id": "269703738", "PostHistoryTypeId": "2", "PostId": "72157118", "RevisionGUID": "174597b3-6baa-42da-812c-75e8f036d08a", "CreationDate": "2022-05-07T23:47:44.643", "UserId": "18124005", "Text": "I asked question about how to code cost-efficient way with CDK in here.\r\n\r\nhttps://stackoverflow.com/questions/71836274/what-is-the-cost-efficient-approach-for-aws-serverless-team-development?noredirect=1#comment127052075_71836274 \r\n\r\nBut the question is closed with [Questions related to pricing or costs of services are not acceptable here].\r\n\r\n\r\nhttps://stackoverflow.com/users/405555/elliveny and \r\nhttps://stackoverflow.com/users/174777/john-rotenstein\r\n\r\nadvised me to share a single account for developers and I did.\r\n\r\nBut now my team says if they create 2 separate branches and deploy, they are overwriting each other's work on AWS.\r\n\r\n1. developer A creates branchA from develop\r\n2. developer B creates branchB from develop\r\n3. developer A develops API (appsync + lambda)\r\n4. developer b develops API (appsync + lambda)\r\n5. developer A deploy branchA\r\n6. developer B deploy branchB\r\n\r\nand on aws developer A work is overwritten. only developer B work stays.\r\n\r\nmy question : \r\n\r\n1. Is this how aws cloudformation work? or our team doing something wrong?\r\n2. if yes, on what level does it overwrite? for example if it is stack level, we can make `[2 developer chan't change same cdk stack same time]` rule", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I asked question about how to code cost-efficient way with CDK in here. ", "keywords": ["cost", "efficient"]}, {"source": "Text", "text": "https://stackoverflow.com/questions/71836274/what-is-the-cost-efficient-approach-for-aws-serverless-team-development?noredirect=1#comment127052075_71836274 But the question is closed with [Questions related to pricing or costs of services are not acceptable here]. ", "keywords": ["cost", "efficient"]}, {"source": "Text", "text": "for example if it is stack level, we can make `[2 developer chan't change same cdk stack same time]` rule", "keywords": ["change"]}]}, {"Id": "269703740", "PostHistoryTypeId": "1", "PostId": "72157118", "RevisionGUID": "174597b3-6baa-42da-812c-75e8f036d08a", "CreationDate": "2022-05-07T23:47:44.643", "UserId": "18124005", "Text": "How to share cloudformation or cdk with shared development infrastructure?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "269703741", "PostHistoryTypeId": "3", "PostId": "72157118", "RevisionGUID": "174597b3-6baa-42da-812c-75e8f036d08a", "CreationDate": "2022-05-07T23:47:44.643", "UserId": "18124005", "Text": "|aws-cloudformation|aws-cdk|cdk|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "269834345", "PostHistoryTypeId": "6", "PostId": "72157118", "RevisionGUID": "26830eab-8820-4278-97fd-22cc9d83f367", "CreationDate": "2022-05-10T06:36:37.550", "UserId": "1103511", "Comment": "remove the cdk tag", "Text": "|aws-cloudformation|aws-cdk|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "269844292", "PostHistoryTypeId": "6", "PostId": "72157118", "RevisionGUID": "09fbdd5a-c5fd-4424-8999-57baf001ac2d", "CreationDate": "2022-05-10T09:13:16.057", "UserId": "10418515", "Comment": "edited tags", "Text": "|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "72157186", "PostTypeId": "2", "ParentId": "72157118", "CreationDate": "2022-05-08T00:03:33.120", "Score": "1", "Body": "<p>Depending on what kind of recurses they are using in their branches. If the resources are regional such as lambda and API gateway, then they can depoly their branches to <strong>different regions</strong>. CloudFormation is regional, so they will not clash with each other.</p>\n<p>But ideally, the developers A and B should have their <strong>own sandbox accounts</strong> for testing and development for maximum separation. Once their branches gets merged into <code>master</code> (or equivalent) then you, and only you, deploy these changes to a dedicated test/development account for further testing.</p>\n", "OwnerUserId": "248823", "LastActivityDate": "2022-05-08T00:03:33.120", "CommentCount": "3", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "127509042", "PostId": "72157186", "Score": "0", "Text": "I see. Then the best approach is 10 developers 10 accounts 10 separate infra.\n\nIt may cost 10 times but it is faster and safer.", "CreationDate": "2022-05-09T06:15:28.450", "UserId": "18124005", "filtered-sentences": [{"source": "Text", "text": "It may cost 10 times but it is faster and safer.", "keywords": ["cost"]}]}, {"Id": "127509701", "PostId": "72157186", "Score": "0", "Text": "@matar No - the best approach is i.e. development, pre-production & production. Maybe even sandbox there.", "CreationDate": "2022-05-09T07:00:52.110", "UserId": "4800344", "filtered-sentences": []}, {"Id": "127583393", "PostId": "72157186", "Score": "0", "Text": "OK. I try to make sure CDK is not overwriting other deployments.\n\nMaybe We are failing to properly sync git code. We will check our git flow again.", "CreationDate": "2022-05-12T07:10:12.533", "UserId": "18124005", "filtered-sentences": []}], "history": [{"Id": "269704082", "PostHistoryTypeId": "2", "PostId": "72157186", "RevisionGUID": "39344c9b-df1c-4a94-b494-9d918a8dceec", "CreationDate": "2022-05-08T00:03:33.120", "UserId": "248823", "Text": "Depending on what kind of recurses they are using in their branches. If the resources are regional such as lambda and API gateway, then they can depoly their branches to **different regions**. CloudFormation is regional, so they will not clash with each other. \r\n\r\nBut ideally, the developers A and B should have their **own sandbox accounts** for testing and development for maximum separation. Once their branches gets merged into `master` (or equivalent) then you, and only you, deploy these changes to a dedicated test/development account for further testing.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "But ideally, the developers A and B should have their **own sandbox accounts** for testing and development for maximum separation. ", "keywords": ["test"]}, {"source": "Text", "text": "Once their branches gets merged into `master` (or equivalent) then you, and only you, deploy these changes to a dedicated test/development account for further testing.", "keywords": ["change", "test"]}]}], "filtered-sentences": [{"source": "Body", "text": "But ideally, the developers A and B should have their own sandbox accounts for testing and development for maximum separation. ", "keywords": ["test"]}, {"source": "Body", "text": "Once their branches gets merged into master (or equivalent) then you, and only you, deploy these changes to a dedicated test/development account for further testing.", "keywords": ["change", "test"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "I asked question about how to code cost-efficient way with CDK in here. ", "keywords": ["cost", "efficient"]}, {"source": "Body", "text": "https://stackoverflow.com/questions/71836274/what-is-the-cost-efficient-approach-for-aws-serverless-team-development?noredirect=1#comment127052075_71836274 But the question is closed with [Questions related to pricing or costs of services are not acceptable here]. ", "keywords": ["cost", "efficient"]}, {"source": "Body", "text": "for example if it is stack level, we can make [2 developer chan't change same cdk stack same time] rule", "keywords": ["change"]}]}