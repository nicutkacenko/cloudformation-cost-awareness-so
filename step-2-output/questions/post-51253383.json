{"Id": "51253383", "PostTypeId": "1", "CreationDate": "2018-07-09T20:16:15.200", "Score": "2", "ViewCount": "2072", "Body": "<p>I am trying to learn CloudFormation and following the \"<a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html\" rel=\"nofollow noreferrer\">Get Started</a>\" tutorial. But for some reason, I can't really finish the task of creating this example stack using the provided <a href=\"https://s3-us-west-2.amazonaws.com/cloudformation-templates-us-west-2/WordPress_Single_Instance.template\" rel=\"nofollow noreferrer\">template</a> in my AWS account. </p>\n\n<p><a href=\"https://i.stack.imgur.com/vA1qT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vA1qT.png\" alt=\"enter image description here\"></a></p>\n\n<p>During the test, I first got the error \"<em>No subnets found for the default VPC 'vpc-4f2acc28'. Please specify a subnet.</em>\" and solved it by modifying the example template to add \"SubnetId\" in the Properties of \"WebServer\" under \"Resource\" section. Then I got the error \"<em>The parameter groupName cannot be used with the parameter subnet</em>\" and solved it by using \"SecurityGroupIds\" instead of \"SecurityGroups\". </p>\n\n<p>And last, I got the error \"<strong><em>Failed to receive 1 resource signal(s) within the specified duration</em></strong>\". Since this error message doesn't give much information, I can't really figure out how to solve it. </p>\n\n<p>This is just the basic tutorial and I guess many people have gone through it. Does anyone know what is the problem?</p>\n\n<p>This is the template I am using(just small changes I mentioned above made on the original example <a href=\"https://s3-us-west-2.amazonaws.com/cloudformation-templates-us-west-2/WordPress_Single_Instance.template\" rel=\"nofollow noreferrer\">template</a>):</p>\n\n<pre><code>{\n  \"AWSTemplateFormatVersion\" : \"2010-09-09\",\n\n  \"Description\" : \"AWS CloudFormation Sample Template WordPress_Single_Instance: WordPress is web software you can use to create a beautiful website or blog. This template installs WordPress with a local MySQL database for storage. It demonstrates using the AWS CloudFormation bootstrap scripts to deploy WordPress. **WARNING** This template creates an Amazon EC2 instance. You will be billed for the AWS resources used if you create a stack from this template.\",\n\n  \"Parameters\" : {\n\n    \"KeyName\": {\n      \"Description\" : \"Name of an existing EC2 KeyPair to enable SSH access to the instances\",\n      \"Type\": \"AWS::EC2::KeyPair::KeyName\",\n      \"ConstraintDescription\" : \"must be the name of an existing EC2 KeyPair.\"\n    },\n\n    \"InstanceType\" : {\n      \"Description\" : \"WebServer EC2 instance type\",\n      \"Type\" : \"String\",\n      \"Default\" : \"t2.small\",\n      \"AllowedValues\" : [ \"t1.micro\", \"t2.nano\", \"t2.micro\", \"t2.small\", \"t2.medium\", \"t2.large\", \"m1.small\", \"m1.medium\", \"m1.large\", \"m1.xlarge\", \"m2.xlarge\", \"m2.2xlarge\", \"m2.4xlarge\", \"m3.medium\", \"m3.large\", \"m3.xlarge\", \"m3.2xlarge\", \"m4.large\", \"m4.xlarge\", \"m4.2xlarge\", \"m4.4xlarge\", \"m4.10xlarge\", \"c1.medium\", \"c1.xlarge\", \"c3.large\", \"c3.xlarge\", \"c3.2xlarge\", \"c3.4xlarge\", \"c3.8xlarge\", \"c4.large\", \"c4.xlarge\", \"c4.2xlarge\", \"c4.4xlarge\", \"c4.8xlarge\", \"g2.2xlarge\", \"g2.8xlarge\", \"r3.large\", \"r3.xlarge\", \"r3.2xlarge\", \"r3.4xlarge\", \"r3.8xlarge\", \"i2.xlarge\", \"i2.2xlarge\", \"i2.4xlarge\", \"i2.8xlarge\", \"d2.xlarge\", \"d2.2xlarge\", \"d2.4xlarge\", \"d2.8xlarge\", \"hi1.4xlarge\", \"hs1.8xlarge\", \"cr1.8xlarge\", \"cc2.8xlarge\", \"cg1.4xlarge\"]\n,\n      \"ConstraintDescription\" : \"must be a valid EC2 instance type.\"\n    },\n\n    \"SSHLocation\": {\n      \"Description\": \"The IP address range that can be used to SSH to the EC2 instances\",\n      \"Type\": \"String\",\n      \"MinLength\": \"9\",\n      \"MaxLength\": \"18\",\n      \"Default\": \"0.0.0.0/0\",\n      \"AllowedPattern\": \"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\",\n      \"ConstraintDescription\": \"must be a valid IP CIDR range of the form x.x.x.x/x.\"\n    },\n\n    \"DBName\" : {\n      \"Default\": \"wordpressdb\",\n      \"Description\" : \"The WordPress database name\",\n      \"Type\": \"String\",\n      \"MinLength\": \"1\",\n      \"MaxLength\": \"64\",\n      \"AllowedPattern\" : \"[a-zA-Z][a-zA-Z0-9]*\",\n      \"ConstraintDescription\" : \"must begin with a letter and contain only alphanumeric characters.\"\n    },\n\n    \"DBUser\" : {\n      \"NoEcho\": \"true\",\n      \"Description\" : \"The WordPress database admin account username\",\n      \"Type\": \"String\",\n      \"MinLength\": \"1\",\n      \"MaxLength\": \"16\",\n      \"AllowedPattern\" : \"[a-zA-Z][a-zA-Z0-9]*\",\n      \"ConstraintDescription\" : \"must begin with a letter and contain only alphanumeric characters.\"\n    },\n\n    \"DBPassword\" : {\n      \"NoEcho\": \"true\",\n      \"Description\" : \"The WordPress database admin account password\",\n      \"Type\": \"String\",\n      \"MinLength\": \"8\",\n      \"MaxLength\": \"41\",\n      \"AllowedPattern\" : \"[a-zA-Z0-9]*\",\n      \"ConstraintDescription\" : \"must contain only alphanumeric characters.\"\n    },\n\n    \"DBRootPassword\" : {\n      \"NoEcho\": \"true\",\n      \"Description\" : \"MySQL root password\",\n      \"Type\": \"String\",\n      \"MinLength\": \"8\",\n      \"MaxLength\": \"41\",\n      \"AllowedPattern\" : \"[a-zA-Z0-9]*\",\n      \"ConstraintDescription\" : \"must contain only alphanumeric characters.\"\n    }\n  },\n\n  \"Mappings\" : {\n    \"AWSInstanceType2Arch\" : {\n      \"t1.micro\"    : { \"Arch\" : \"PV64\"   },\n      \"t2.nano\"     : { \"Arch\" : \"HVM64\"  },\n      \"t2.micro\"    : { \"Arch\" : \"HVM64\"  },\n      \"t2.small\"    : { \"Arch\" : \"HVM64\"  },\n      \"t2.medium\"   : { \"Arch\" : \"HVM64\"  },\n      \"t2.large\"    : { \"Arch\" : \"HVM64\"  },\n      \"m1.small\"    : { \"Arch\" : \"PV64\"   },\n      \"m1.medium\"   : { \"Arch\" : \"PV64\"   },\n      \"m1.large\"    : { \"Arch\" : \"PV64\"   },\n      \"m1.xlarge\"   : { \"Arch\" : \"PV64\"   },\n      \"m2.xlarge\"   : { \"Arch\" : \"PV64\"   },\n      \"m2.2xlarge\"  : { \"Arch\" : \"PV64\"   },\n      \"m2.4xlarge\"  : { \"Arch\" : \"PV64\"   },\n      \"m3.medium\"   : { \"Arch\" : \"HVM64\"  },\n      \"m3.large\"    : { \"Arch\" : \"HVM64\"  },\n      \"m3.xlarge\"   : { \"Arch\" : \"HVM64\"  },\n      \"m3.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"m4.large\"    : { \"Arch\" : \"HVM64\"  },\n      \"m4.xlarge\"   : { \"Arch\" : \"HVM64\"  },\n      \"m4.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"m4.4xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"m4.10xlarge\" : { \"Arch\" : \"HVM64\"  },\n      \"c1.medium\"   : { \"Arch\" : \"PV64\"   },\n      \"c1.xlarge\"   : { \"Arch\" : \"PV64\"   },\n      \"c3.large\"    : { \"Arch\" : \"HVM64\"  },\n      \"c3.xlarge\"   : { \"Arch\" : \"HVM64\"  },\n      \"c3.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"c3.4xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"c3.8xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"c4.large\"    : { \"Arch\" : \"HVM64\"  },\n      \"c4.xlarge\"   : { \"Arch\" : \"HVM64\"  },\n      \"c4.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"c4.4xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"c4.8xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"g2.2xlarge\"  : { \"Arch\" : \"HVMG2\"  },\n      \"g2.8xlarge\"  : { \"Arch\" : \"HVMG2\"  },\n      \"r3.large\"    : { \"Arch\" : \"HVM64\"  },\n      \"r3.xlarge\"   : { \"Arch\" : \"HVM64\"  },\n      \"r3.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"r3.4xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"r3.8xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"i2.xlarge\"   : { \"Arch\" : \"HVM64\"  },\n      \"i2.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"i2.4xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"i2.8xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"d2.xlarge\"   : { \"Arch\" : \"HVM64\"  },\n      \"d2.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"d2.4xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"d2.8xlarge\"  : { \"Arch\" : \"HVM64\"  },\n      \"hi1.4xlarge\" : { \"Arch\" : \"HVM64\"  },\n      \"hs1.8xlarge\" : { \"Arch\" : \"HVM64\"  },\n      \"cr1.8xlarge\" : { \"Arch\" : \"HVM64\"  },\n      \"cc2.8xlarge\" : { \"Arch\" : \"HVM64\"  }\n    },\n\n    \"AWSInstanceType2NATArch\" : {\n      \"t1.micro\"    : { \"Arch\" : \"NATPV64\"   },\n      \"t2.nano\"     : { \"Arch\" : \"NATHVM64\"  },\n      \"t2.micro\"    : { \"Arch\" : \"NATHVM64\"  },\n      \"t2.small\"    : { \"Arch\" : \"NATHVM64\"  },\n      \"t2.medium\"   : { \"Arch\" : \"NATHVM64\"  },\n      \"t2.large\"    : { \"Arch\" : \"NATHVM64\"  },\n      \"m1.small\"    : { \"Arch\" : \"NATPV64\"   },\n      \"m1.medium\"   : { \"Arch\" : \"NATPV64\"   },\n      \"m1.large\"    : { \"Arch\" : \"NATPV64\"   },\n      \"m1.xlarge\"   : { \"Arch\" : \"NATPV64\"   },\n      \"m2.xlarge\"   : { \"Arch\" : \"NATPV64\"   },\n      \"m2.2xlarge\"  : { \"Arch\" : \"NATPV64\"   },\n      \"m2.4xlarge\"  : { \"Arch\" : \"NATPV64\"   },\n      \"m3.medium\"   : { \"Arch\" : \"NATHVM64\"  },\n      \"m3.large\"    : { \"Arch\" : \"NATHVM64\"  },\n      \"m3.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\n      \"m3.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"m4.large\"    : { \"Arch\" : \"NATHVM64\"  },\n      \"m4.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\n      \"m4.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"m4.4xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"m4.10xlarge\" : { \"Arch\" : \"NATHVM64\"  },\n      \"c1.medium\"   : { \"Arch\" : \"NATPV64\"   },\n      \"c1.xlarge\"   : { \"Arch\" : \"NATPV64\"   },\n      \"c3.large\"    : { \"Arch\" : \"NATHVM64\"  },\n      \"c3.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\n      \"c3.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"c3.4xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"c3.8xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"c4.large\"    : { \"Arch\" : \"NATHVM64\"  },\n      \"c4.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\n      \"c4.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"c4.4xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"c4.8xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"g2.2xlarge\"  : { \"Arch\" : \"NATHVMG2\"  },\n      \"g2.8xlarge\"  : { \"Arch\" : \"NATHVMG2\"  },\n      \"r3.large\"    : { \"Arch\" : \"NATHVM64\"  },\n      \"r3.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\n      \"r3.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"r3.4xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"r3.8xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"i2.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\n      \"i2.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"i2.4xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"i2.8xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"d2.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\n      \"d2.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"d2.4xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"d2.8xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\n      \"hi1.4xlarge\" : { \"Arch\" : \"NATHVM64\"  },\n      \"hs1.8xlarge\" : { \"Arch\" : \"NATHVM64\"  },\n      \"cr1.8xlarge\" : { \"Arch\" : \"NATHVM64\"  },\n      \"cc2.8xlarge\" : { \"Arch\" : \"NATHVM64\"  }\n    }\n,\n    \"AWSRegionArch2AMI\" : {\n      \"us-east-1\"        : {\"PV64\" : \"ami-2a69aa47\", \"HVM64\" : \"ami-97785bed\", \"HVMG2\" : \"ami-0a6e3770\"},\n      \"us-west-2\"        : {\"PV64\" : \"ami-7f77b31f\", \"HVM64\" : \"ami-f2d3638a\", \"HVMG2\" : \"ami-ee15a196\"},\n      \"us-west-1\"        : {\"PV64\" : \"ami-a2490dc2\", \"HVM64\" : \"ami-824c4ee2\", \"HVMG2\" : \"ami-0da4a46d\"},\n      \"eu-west-1\"        : {\"PV64\" : \"ami-4cdd453f\", \"HVM64\" : \"ami-d834aba1\", \"HVMG2\" : \"ami-af8013d6\"},\n      \"eu-west-2\"        : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-403e2524\", \"HVMG2\" : \"NOT_SUPPORTED\"},\n      \"eu-west-3\"        : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-8ee056f3\", \"HVMG2\" : \"NOT_SUPPORTED\"},\n      \"eu-central-1\"     : {\"PV64\" : \"ami-6527cf0a\", \"HVM64\" : \"ami-5652ce39\", \"HVMG2\" : \"ami-1d58ca72\"},\n      \"ap-northeast-1\"   : {\"PV64\" : \"ami-3e42b65f\", \"HVM64\" : \"ami-ceafcba8\", \"HVMG2\" : \"ami-edfd658b\"},\n      \"ap-northeast-2\"   : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-863090e8\", \"HVMG2\" : \"NOT_SUPPORTED\"},\n      \"ap-northeast-3\"   : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-83444afe\", \"HVMG2\" : \"NOT_SUPPORTED\"},\n      \"ap-southeast-1\"   : {\"PV64\" : \"ami-df9e4cbc\", \"HVM64\" : \"ami-68097514\", \"HVMG2\" : \"ami-c06013bc\"},\n      \"ap-southeast-2\"   : {\"PV64\" : \"ami-63351d00\", \"HVM64\" : \"ami-942dd1f6\", \"HVMG2\" : \"ami-85ef12e7\"},\n      \"ap-south-1\"       : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-531a4c3c\", \"HVMG2\" : \"ami-411e492e\"},\n      \"us-east-2\"        : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-f63b1193\", \"HVMG2\" : \"NOT_SUPPORTED\"},\n      \"ca-central-1\"     : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-a954d1cd\", \"HVMG2\" : \"NOT_SUPPORTED\"},\n      \"sa-east-1\"        : {\"PV64\" : \"ami-1ad34676\", \"HVM64\" : \"ami-84175ae8\", \"HVMG2\" : \"NOT_SUPPORTED\"},\n      \"cn-north-1\"       : {\"PV64\" : \"ami-77559f1a\", \"HVM64\" : \"ami-cb19c4a6\", \"HVMG2\" : \"NOT_SUPPORTED\"},\n      \"cn-northwest-1\"   : {\"PV64\" : \"ami-80707be2\", \"HVM64\" : \"ami-3e60745c\", \"HVMG2\" : \"NOT_SUPPORTED\"}\n    }\n\n  },\n\n  \"Resources\" : {\n    \"WebServer\": {\n      \"Type\" : \"AWS::EC2::Instance\",\n      \"Metadata\" : {\n        \"AWS::CloudFormation::Init\" : {\n          \"configSets\" : {\n            \"wordpress_install\" : [\"install_cfn\", \"install_wordpress\", \"configure_wordpress\" ]\n          },\n          \"install_cfn\" : {\n            \"files\": {\n              \"/etc/cfn/cfn-hup.conf\": {\n                \"content\": { \"Fn::Join\": [ \"\", [\n                  \"[main]\\n\",\n                  \"stack=\", { \"Ref\": \"AWS::StackId\" }, \"\\n\",\n                  \"region=\", { \"Ref\": \"AWS::Region\" }, \"\\n\"\n                ]]},\n                \"mode\"  : \"000400\",\n                \"owner\" : \"root\",\n                \"group\" : \"root\"\n              },\n              \"/etc/cfn/hooks.d/cfn-auto-reloader.conf\": {\n                \"content\": { \"Fn::Join\": [ \"\", [\n                  \"[cfn-auto-reloader-hook]\\n\",\n                  \"triggers=post.update\\n\",\n                  \"path=Resources.WebServer.Metadata.AWS::CloudFormation::Init\\n\",\n                  \"action=/opt/aws/bin/cfn-init -v \",\n                          \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\n                          \"         --resource WebServer \",\n                          \"         --configsets wordpress_install \",\n                          \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\"\n                ]]},          \n                \"mode\"  : \"000400\",\n                \"owner\" : \"root\",\n                \"group\" : \"root\"\n              }\n            },\n            \"services\" : {\n              \"sysvinit\" : {\n                \"cfn-hup\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\",\n                              \"files\" : [\"/etc/cfn/cfn-hup.conf\", \"/etc/cfn/hooks.d/cfn-auto-reloader.conf\"] }\n              }\n            }\n          },\n\n          \"install_wordpress\" : {\n            \"packages\" : {\n              \"yum\" : {\n                \"php\"          : [],\n                \"php-mysql\"    : [],\n                \"mysql\"        : [],\n                \"mysql-server\" : [],\n                \"mysql-devel\"  : [],\n                \"mysql-libs\"   : [],\n                \"httpd\"        : []\n              }\n            },\n            \"sources\" : {\n              \"/var/www/html\" : \"http://wordpress.org/latest.tar.gz\"\n            },\n            \"files\" : {\n              \"/tmp/setup.mysql\" : {\n                \"content\" : { \"Fn::Join\" : [\"\", [\n                  \"CREATE DATABASE \", { \"Ref\" : \"DBName\" }, \";\\n\",\n                  \"CREATE USER '\", { \"Ref\" : \"DBUser\" }, \"'@'localhost' IDENTIFIED BY '\", { \"Ref\" : \"DBPassword\" }, \"';\\n\",\n                  \"GRANT ALL ON \", { \"Ref\" : \"DBName\" }, \".* TO '\", { \"Ref\" : \"DBUser\" }, \"'@'localhost';\\n\",\n                  \"FLUSH PRIVILEGES;\\n\"\n                ]]},\n                \"mode\"  : \"000400\",\n                \"owner\" : \"root\",\n                \"group\" : \"root\"\n              },\n\n              \"/tmp/create-wp-config\" : {\n                \"content\" : { \"Fn::Join\" : [ \"\", [\n                  \"#!/bin/bash -xe\\n\",\n                  \"cp /var/www/html/wordpress/wp-config-sample.php /var/www/html/wordpress/wp-config.php\\n\",\n                  \"sed -i \\\"s/'database_name_here'/'\",{ \"Ref\" : \"DBName\" }, \"'/g\\\" wp-config.php\\n\",\n                  \"sed -i \\\"s/'username_here'/'\",{ \"Ref\" : \"DBUser\" }, \"'/g\\\" wp-config.php\\n\",\n                  \"sed -i \\\"s/'password_here'/'\",{ \"Ref\" : \"DBPassword\" }, \"'/g\\\" wp-config.php\\n\"\n                ]]},\n                \"mode\" : \"000500\",\n                \"owner\" : \"root\",\n                \"group\" : \"root\"\n              }\n            },\n            \"services\" : {\n              \"sysvinit\" : {\n                \"httpd\"  : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\" },\n                \"mysqld\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\" }\n              }\n            }\n          },\n\n          \"configure_wordpress\" : {\n            \"commands\" : {\n              \"01_set_mysql_root_password\" : {\n                \"command\" : { \"Fn::Join\" : [\"\", [\"mysqladmin -u root password '\", { \"Ref\" : \"DBRootPassword\" }, \"'\"]]},\n                \"test\" : { \"Fn::Join\" : [\"\", [\"$(mysql \", { \"Ref\" : \"DBName\" }, \" -u root --password='\", { \"Ref\" : \"DBRootPassword\" }, \"' &gt;/dev/null 2&gt;&amp;1 &lt;/dev/null); (( $? != 0 ))\"]]}\n              },\n              \"02_create_database\" : {\n                \"command\" : { \"Fn::Join\" : [\"\", [\"mysql -u root --password='\", { \"Ref\" : \"DBRootPassword\" }, \"' &lt; /tmp/setup.mysql\"]]},\n                \"test\" : { \"Fn::Join\" : [\"\", [\"$(mysql \", { \"Ref\" : \"DBName\" }, \" -u root --password='\", { \"Ref\" : \"DBRootPassword\" }, \"' &gt;/dev/null 2&gt;&amp;1 &lt;/dev/null); (( $? != 0 ))\"]]}\n              },\n              \"03_configure_wordpress\" : {\n                \"command\" : \"/tmp/create-wp-config\",\n                \"cwd\" : \"/var/www/html/wordpress\"\n              }\n            }\n          }\n        }\n      },\n      \"Properties\": {\n        \"ImageId\" : { \"Fn::FindInMap\" : [ \"AWSRegionArch2AMI\", { \"Ref\" : \"AWS::Region\" },\n                          { \"Fn::FindInMap\" : [ \"AWSInstanceType2Arch\", { \"Ref\" : \"InstanceType\" }, \"Arch\" ] } ] },\n        \"InstanceType\"   : { \"Ref\" : \"InstanceType\" },\n        \"SubnetId\": \"subnet-3c0e8a5a\",\n        \"SecurityGroupIds\" : [\"sg-d04fe1a9\"],\n        \"KeyName\"        : { \"Ref\" : \"KeyName\" },\n        \"UserData\" : { \"Fn::Base64\" : { \"Fn::Join\" : [\"\", [\n                       \"#!/bin/bash -xe\\n\",\n                       \"yum update -y aws-cfn-bootstrap\\n\",\n\n                       \"/opt/aws/bin/cfn-init -v \",\n                       \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\n                       \"         --resource WebServer \",\n                       \"         --configsets wordpress_install \",\n                       \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\",\n\n                       \"/opt/aws/bin/cfn-signal -e $? \",\n                       \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\n                       \"         --resource WebServer \",\n                       \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\"\n        ]]}}\n      },\n      \"CreationPolicy\" : {\n        \"ResourceSignal\" : {\n          \"Timeout\" : \"PT15M\"\n        }\n      }\n    }\n  },\n\n  \"Outputs\" : {\n    \"WebsiteURL\" : {\n      \"Value\" : { \"Fn::Join\" : [\"\", [\"http://\", { \"Fn::GetAtt\" : [ \"WebServer\", \"PublicDnsName\" ]}, \"/wordpress\" ]]},\n      \"Description\" : \"WordPress Website\"\n    }\n  }\n}\n</code></pre>\n", "OwnerUserId": "5406339", "LastEditorUserId": "5406339", "LastEditDate": "2018-07-09T21:53:27.217", "LastActivityDate": "2018-07-10T04:36:54.440", "Title": "Fail to create AWS CloudFormation \"Get Started\" example stack", "Tags": "|amazon-web-services|aws-cloudformation|", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "177288093", "PostHistoryTypeId": "2", "PostId": "51253383", "RevisionGUID": "4b97d0c9-079a-4cd3-92dc-8ba6b0c2c5fb", "CreationDate": "2018-07-09T20:16:15.200", "UserId": "5406339", "Text": "I am trying to learn CloudFormation and following the \"[Get Started][1]\" tutorial. But for some reason, I can't really finish the task of creating this example stack using the provided [template][2] in my AWS account. \r\n\r\n[![enter image description here][3]][3]\r\n\r\nDuring the test, I first got the error \"*No subnets found for the default VPC 'vpc-4f2acc28*'. Please specify a subnet.\" and solved it by modifying the example template to add \"SubnetId\" in the Properties of \"WebServer\" under \"Resource\" section. Then I got the error \"*The parameter groupName cannot be used with the parameter subnet*\" and solved it by using \"SecurityGroupIds\" instead of \"SecurityGroups\". \r\n\r\nAnd last, I got the error \"***Failed to receive 1 resource signal(s) within the specified duration***\". Since this error message doesn't give much information, I can't really figure out how to solve it. \r\n\r\nThis is just the basic tutorial and I guess many people have gone through it. Does anyone know what is the problem?\r\n\r\n  [1]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html\r\n  [2]: https://s3-us-west-2.amazonaws.com/cloudformation-templates-us-west-2/WordPress_Single_Instance.template\r\n  [3]: https://i.stack.imgur.com/vA1qT.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "During the test, I first got the error \"*No subnets found for the default VPC 'vpc-4f2acc28*'. ", "keywords": ["test"]}]}, {"Id": "177288094", "PostHistoryTypeId": "1", "PostId": "51253383", "RevisionGUID": "4b97d0c9-079a-4cd3-92dc-8ba6b0c2c5fb", "CreationDate": "2018-07-09T20:16:15.200", "UserId": "5406339", "Text": "Fail to create AWS CloudFormation \"Get Started\" example stack", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "177288095", "PostHistoryTypeId": "3", "PostId": "51253383", "RevisionGUID": "4b97d0c9-079a-4cd3-92dc-8ba6b0c2c5fb", "CreationDate": "2018-07-09T20:16:15.200", "UserId": "5406339", "Text": "|amazon-web-services|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "177292337", "PostHistoryTypeId": "5", "PostId": "51253383", "RevisionGUID": "3852f58e-8326-468e-b41d-d413378d9085", "CreationDate": "2018-07-09T21:42:28.750", "UserId": "5406339", "Comment": "edited body", "Text": "I am trying to learn CloudFormation and following the \"[Get Started][1]\" tutorial. But for some reason, I can't really finish the task of creating this example stack using the provided [template][2] in my AWS account. \r\n\r\n[![enter image description here][3]][3]\r\n\r\nDuring the test, I first got the error \"*No subnets found for the default VPC 'vpc-4f2acc28'. Please specify a subnet.*\" and solved it by modifying the example template to add \"SubnetId\" in the Properties of \"WebServer\" under \"Resource\" section. Then I got the error \"*The parameter groupName cannot be used with the parameter subnet*\" and solved it by using \"SecurityGroupIds\" instead of \"SecurityGroups\". \r\n\r\nAnd last, I got the error \"***Failed to receive 1 resource signal(s) within the specified duration***\". Since this error message doesn't give much information, I can't really figure out how to solve it. \r\n\r\nThis is just the basic tutorial and I guess many people have gone through it. Does anyone know what is the problem?\r\n\r\n  [1]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html\r\n  [2]: https://s3-us-west-2.amazonaws.com/cloudformation-templates-us-west-2/WordPress_Single_Instance.template\r\n  [3]: https://i.stack.imgur.com/vA1qT.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "During the test, I first got the error \"*No subnets found for the default VPC 'vpc-4f2acc28'. ", "keywords": ["test"]}]}, {"Id": "177292773", "PostHistoryTypeId": "5", "PostId": "51253383", "RevisionGUID": "496e3407-db96-493a-b332-8c980c7b4004", "CreationDate": "2018-07-09T21:53:27.217", "UserId": "5406339", "Comment": "Add the template code", "Text": "I am trying to learn CloudFormation and following the \"[Get Started][1]\" tutorial. But for some reason, I can't really finish the task of creating this example stack using the provided [template][2] in my AWS account. \r\n\r\n[![enter image description here][3]][3]\r\n\r\nDuring the test, I first got the error \"*No subnets found for the default VPC 'vpc-4f2acc28'. Please specify a subnet.*\" and solved it by modifying the example template to add \"SubnetId\" in the Properties of \"WebServer\" under \"Resource\" section. Then I got the error \"*The parameter groupName cannot be used with the parameter subnet*\" and solved it by using \"SecurityGroupIds\" instead of \"SecurityGroups\". \r\n\r\nAnd last, I got the error \"***Failed to receive 1 resource signal(s) within the specified duration***\". Since this error message doesn't give much information, I can't really figure out how to solve it. \r\n\r\nThis is just the basic tutorial and I guess many people have gone through it. Does anyone know what is the problem?\r\n\r\nThis is the template I am using(just small changes I mentioned above made on the original example [template][2]):\r\n\r\n    \r\n   \r\n\r\n    {\r\n      \"AWSTemplateFormatVersion\" : \"2010-09-09\",\r\n    \r\n      \"Description\" : \"AWS CloudFormation Sample Template WordPress_Single_Instance: WordPress is web software you can use to create a beautiful website or blog. This template installs WordPress with a local MySQL database for storage. It demonstrates using the AWS CloudFormation bootstrap scripts to deploy WordPress. **WARNING** This template creates an Amazon EC2 instance. You will be billed for the AWS resources used if you create a stack from this template.\",\r\n    \r\n      \"Parameters\" : {\r\n    \r\n        \"KeyName\": {\r\n          \"Description\" : \"Name of an existing EC2 KeyPair to enable SSH access to the instances\",\r\n          \"Type\": \"AWS::EC2::KeyPair::KeyName\",\r\n          \"ConstraintDescription\" : \"must be the name of an existing EC2 KeyPair.\"\r\n        },\r\n    \r\n        \"InstanceType\" : {\r\n          \"Description\" : \"WebServer EC2 instance type\",\r\n          \"Type\" : \"String\",\r\n          \"Default\" : \"t2.small\",\r\n          \"AllowedValues\" : [ \"t1.micro\", \"t2.nano\", \"t2.micro\", \"t2.small\", \"t2.medium\", \"t2.large\", \"m1.small\", \"m1.medium\", \"m1.large\", \"m1.xlarge\", \"m2.xlarge\", \"m2.2xlarge\", \"m2.4xlarge\", \"m3.medium\", \"m3.large\", \"m3.xlarge\", \"m3.2xlarge\", \"m4.large\", \"m4.xlarge\", \"m4.2xlarge\", \"m4.4xlarge\", \"m4.10xlarge\", \"c1.medium\", \"c1.xlarge\", \"c3.large\", \"c3.xlarge\", \"c3.2xlarge\", \"c3.4xlarge\", \"c3.8xlarge\", \"c4.large\", \"c4.xlarge\", \"c4.2xlarge\", \"c4.4xlarge\", \"c4.8xlarge\", \"g2.2xlarge\", \"g2.8xlarge\", \"r3.large\", \"r3.xlarge\", \"r3.2xlarge\", \"r3.4xlarge\", \"r3.8xlarge\", \"i2.xlarge\", \"i2.2xlarge\", \"i2.4xlarge\", \"i2.8xlarge\", \"d2.xlarge\", \"d2.2xlarge\", \"d2.4xlarge\", \"d2.8xlarge\", \"hi1.4xlarge\", \"hs1.8xlarge\", \"cr1.8xlarge\", \"cc2.8xlarge\", \"cg1.4xlarge\"]\r\n    ,\r\n          \"ConstraintDescription\" : \"must be a valid EC2 instance type.\"\r\n        },\r\n    \r\n        \"SSHLocation\": {\r\n          \"Description\": \"The IP address range that can be used to SSH to the EC2 instances\",\r\n          \"Type\": \"String\",\r\n          \"MinLength\": \"9\",\r\n          \"MaxLength\": \"18\",\r\n          \"Default\": \"0.0.0.0/0\",\r\n          \"AllowedPattern\": \"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\",\r\n          \"ConstraintDescription\": \"must be a valid IP CIDR range of the form x.x.x.x/x.\"\r\n        },\r\n    \r\n        \"DBName\" : {\r\n          \"Default\": \"wordpressdb\",\r\n          \"Description\" : \"The WordPress database name\",\r\n          \"Type\": \"String\",\r\n          \"MinLength\": \"1\",\r\n          \"MaxLength\": \"64\",\r\n          \"AllowedPattern\" : \"[a-zA-Z][a-zA-Z0-9]*\",\r\n          \"ConstraintDescription\" : \"must begin with a letter and contain only alphanumeric characters.\"\r\n        },\r\n    \r\n        \"DBUser\" : {\r\n          \"NoEcho\": \"true\",\r\n          \"Description\" : \"The WordPress database admin account username\",\r\n          \"Type\": \"String\",\r\n          \"MinLength\": \"1\",\r\n          \"MaxLength\": \"16\",\r\n          \"AllowedPattern\" : \"[a-zA-Z][a-zA-Z0-9]*\",\r\n          \"ConstraintDescription\" : \"must begin with a letter and contain only alphanumeric characters.\"\r\n        },\r\n    \r\n        \"DBPassword\" : {\r\n          \"NoEcho\": \"true\",\r\n          \"Description\" : \"The WordPress database admin account password\",\r\n          \"Type\": \"String\",\r\n          \"MinLength\": \"8\",\r\n          \"MaxLength\": \"41\",\r\n          \"AllowedPattern\" : \"[a-zA-Z0-9]*\",\r\n          \"ConstraintDescription\" : \"must contain only alphanumeric characters.\"\r\n        },\r\n    \r\n        \"DBRootPassword\" : {\r\n          \"NoEcho\": \"true\",\r\n          \"Description\" : \"MySQL root password\",\r\n          \"Type\": \"String\",\r\n          \"MinLength\": \"8\",\r\n          \"MaxLength\": \"41\",\r\n          \"AllowedPattern\" : \"[a-zA-Z0-9]*\",\r\n          \"ConstraintDescription\" : \"must contain only alphanumeric characters.\"\r\n        }\r\n      },\r\n    \r\n      \"Mappings\" : {\r\n        \"AWSInstanceType2Arch\" : {\r\n          \"t1.micro\"    : { \"Arch\" : \"PV64\"   },\r\n          \"t2.nano\"     : { \"Arch\" : \"HVM64\"  },\r\n          \"t2.micro\"    : { \"Arch\" : \"HVM64\"  },\r\n          \"t2.small\"    : { \"Arch\" : \"HVM64\"  },\r\n          \"t2.medium\"   : { \"Arch\" : \"HVM64\"  },\r\n          \"t2.large\"    : { \"Arch\" : \"HVM64\"  },\r\n          \"m1.small\"    : { \"Arch\" : \"PV64\"   },\r\n          \"m1.medium\"   : { \"Arch\" : \"PV64\"   },\r\n          \"m1.large\"    : { \"Arch\" : \"PV64\"   },\r\n          \"m1.xlarge\"   : { \"Arch\" : \"PV64\"   },\r\n          \"m2.xlarge\"   : { \"Arch\" : \"PV64\"   },\r\n          \"m2.2xlarge\"  : { \"Arch\" : \"PV64\"   },\r\n          \"m2.4xlarge\"  : { \"Arch\" : \"PV64\"   },\r\n          \"m3.medium\"   : { \"Arch\" : \"HVM64\"  },\r\n          \"m3.large\"    : { \"Arch\" : \"HVM64\"  },\r\n          \"m3.xlarge\"   : { \"Arch\" : \"HVM64\"  },\r\n          \"m3.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"m4.large\"    : { \"Arch\" : \"HVM64\"  },\r\n          \"m4.xlarge\"   : { \"Arch\" : \"HVM64\"  },\r\n          \"m4.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"m4.4xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"m4.10xlarge\" : { \"Arch\" : \"HVM64\"  },\r\n          \"c1.medium\"   : { \"Arch\" : \"PV64\"   },\r\n          \"c1.xlarge\"   : { \"Arch\" : \"PV64\"   },\r\n          \"c3.large\"    : { \"Arch\" : \"HVM64\"  },\r\n          \"c3.xlarge\"   : { \"Arch\" : \"HVM64\"  },\r\n          \"c3.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"c3.4xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"c3.8xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"c4.large\"    : { \"Arch\" : \"HVM64\"  },\r\n          \"c4.xlarge\"   : { \"Arch\" : \"HVM64\"  },\r\n          \"c4.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"c4.4xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"c4.8xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"g2.2xlarge\"  : { \"Arch\" : \"HVMG2\"  },\r\n          \"g2.8xlarge\"  : { \"Arch\" : \"HVMG2\"  },\r\n          \"r3.large\"    : { \"Arch\" : \"HVM64\"  },\r\n          \"r3.xlarge\"   : { \"Arch\" : \"HVM64\"  },\r\n          \"r3.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"r3.4xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"r3.8xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"i2.xlarge\"   : { \"Arch\" : \"HVM64\"  },\r\n          \"i2.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"i2.4xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"i2.8xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"d2.xlarge\"   : { \"Arch\" : \"HVM64\"  },\r\n          \"d2.2xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"d2.4xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"d2.8xlarge\"  : { \"Arch\" : \"HVM64\"  },\r\n          \"hi1.4xlarge\" : { \"Arch\" : \"HVM64\"  },\r\n          \"hs1.8xlarge\" : { \"Arch\" : \"HVM64\"  },\r\n          \"cr1.8xlarge\" : { \"Arch\" : \"HVM64\"  },\r\n          \"cc2.8xlarge\" : { \"Arch\" : \"HVM64\"  }\r\n        },\r\n    \r\n        \"AWSInstanceType2NATArch\" : {\r\n          \"t1.micro\"    : { \"Arch\" : \"NATPV64\"   },\r\n          \"t2.nano\"     : { \"Arch\" : \"NATHVM64\"  },\r\n          \"t2.micro\"    : { \"Arch\" : \"NATHVM64\"  },\r\n          \"t2.small\"    : { \"Arch\" : \"NATHVM64\"  },\r\n          \"t2.medium\"   : { \"Arch\" : \"NATHVM64\"  },\r\n          \"t2.large\"    : { \"Arch\" : \"NATHVM64\"  },\r\n          \"m1.small\"    : { \"Arch\" : \"NATPV64\"   },\r\n          \"m1.medium\"   : { \"Arch\" : \"NATPV64\"   },\r\n          \"m1.large\"    : { \"Arch\" : \"NATPV64\"   },\r\n          \"m1.xlarge\"   : { \"Arch\" : \"NATPV64\"   },\r\n          \"m2.xlarge\"   : { \"Arch\" : \"NATPV64\"   },\r\n          \"m2.2xlarge\"  : { \"Arch\" : \"NATPV64\"   },\r\n          \"m2.4xlarge\"  : { \"Arch\" : \"NATPV64\"   },\r\n          \"m3.medium\"   : { \"Arch\" : \"NATHVM64\"  },\r\n          \"m3.large\"    : { \"Arch\" : \"NATHVM64\"  },\r\n          \"m3.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\r\n          \"m3.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"m4.large\"    : { \"Arch\" : \"NATHVM64\"  },\r\n          \"m4.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\r\n          \"m4.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"m4.4xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"m4.10xlarge\" : { \"Arch\" : \"NATHVM64\"  },\r\n          \"c1.medium\"   : { \"Arch\" : \"NATPV64\"   },\r\n          \"c1.xlarge\"   : { \"Arch\" : \"NATPV64\"   },\r\n          \"c3.large\"    : { \"Arch\" : \"NATHVM64\"  },\r\n          \"c3.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\r\n          \"c3.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"c3.4xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"c3.8xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"c4.large\"    : { \"Arch\" : \"NATHVM64\"  },\r\n          \"c4.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\r\n          \"c4.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"c4.4xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"c4.8xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"g2.2xlarge\"  : { \"Arch\" : \"NATHVMG2\"  },\r\n          \"g2.8xlarge\"  : { \"Arch\" : \"NATHVMG2\"  },\r\n          \"r3.large\"    : { \"Arch\" : \"NATHVM64\"  },\r\n          \"r3.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\r\n          \"r3.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"r3.4xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"r3.8xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"i2.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\r\n          \"i2.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"i2.4xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"i2.8xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"d2.xlarge\"   : { \"Arch\" : \"NATHVM64\"  },\r\n          \"d2.2xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"d2.4xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"d2.8xlarge\"  : { \"Arch\" : \"NATHVM64\"  },\r\n          \"hi1.4xlarge\" : { \"Arch\" : \"NATHVM64\"  },\r\n          \"hs1.8xlarge\" : { \"Arch\" : \"NATHVM64\"  },\r\n          \"cr1.8xlarge\" : { \"Arch\" : \"NATHVM64\"  },\r\n          \"cc2.8xlarge\" : { \"Arch\" : \"NATHVM64\"  }\r\n        }\r\n    ,\r\n        \"AWSRegionArch2AMI\" : {\r\n          \"us-east-1\"        : {\"PV64\" : \"ami-2a69aa47\", \"HVM64\" : \"ami-97785bed\", \"HVMG2\" : \"ami-0a6e3770\"},\r\n          \"us-west-2\"        : {\"PV64\" : \"ami-7f77b31f\", \"HVM64\" : \"ami-f2d3638a\", \"HVMG2\" : \"ami-ee15a196\"},\r\n          \"us-west-1\"        : {\"PV64\" : \"ami-a2490dc2\", \"HVM64\" : \"ami-824c4ee2\", \"HVMG2\" : \"ami-0da4a46d\"},\r\n          \"eu-west-1\"        : {\"PV64\" : \"ami-4cdd453f\", \"HVM64\" : \"ami-d834aba1\", \"HVMG2\" : \"ami-af8013d6\"},\r\n          \"eu-west-2\"        : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-403e2524\", \"HVMG2\" : \"NOT_SUPPORTED\"},\r\n          \"eu-west-3\"        : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-8ee056f3\", \"HVMG2\" : \"NOT_SUPPORTED\"},\r\n          \"eu-central-1\"     : {\"PV64\" : \"ami-6527cf0a\", \"HVM64\" : \"ami-5652ce39\", \"HVMG2\" : \"ami-1d58ca72\"},\r\n          \"ap-northeast-1\"   : {\"PV64\" : \"ami-3e42b65f\", \"HVM64\" : \"ami-ceafcba8\", \"HVMG2\" : \"ami-edfd658b\"},\r\n          \"ap-northeast-2\"   : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-863090e8\", \"HVMG2\" : \"NOT_SUPPORTED\"},\r\n          \"ap-northeast-3\"   : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-83444afe\", \"HVMG2\" : \"NOT_SUPPORTED\"},\r\n          \"ap-southeast-1\"   : {\"PV64\" : \"ami-df9e4cbc\", \"HVM64\" : \"ami-68097514\", \"HVMG2\" : \"ami-c06013bc\"},\r\n          \"ap-southeast-2\"   : {\"PV64\" : \"ami-63351d00\", \"HVM64\" : \"ami-942dd1f6\", \"HVMG2\" : \"ami-85ef12e7\"},\r\n          \"ap-south-1\"       : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-531a4c3c\", \"HVMG2\" : \"ami-411e492e\"},\r\n          \"us-east-2\"        : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-f63b1193\", \"HVMG2\" : \"NOT_SUPPORTED\"},\r\n          \"ca-central-1\"     : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-a954d1cd\", \"HVMG2\" : \"NOT_SUPPORTED\"},\r\n          \"sa-east-1\"        : {\"PV64\" : \"ami-1ad34676\", \"HVM64\" : \"ami-84175ae8\", \"HVMG2\" : \"NOT_SUPPORTED\"},\r\n          \"cn-north-1\"       : {\"PV64\" : \"ami-77559f1a\", \"HVM64\" : \"ami-cb19c4a6\", \"HVMG2\" : \"NOT_SUPPORTED\"},\r\n          \"cn-northwest-1\"   : {\"PV64\" : \"ami-80707be2\", \"HVM64\" : \"ami-3e60745c\", \"HVMG2\" : \"NOT_SUPPORTED\"}\r\n        }\r\n    \r\n      },\r\n    \r\n      \"Resources\" : {\r\n        \"WebServer\": {\r\n          \"Type\" : \"AWS::EC2::Instance\",\r\n          \"Metadata\" : {\r\n            \"AWS::CloudFormation::Init\" : {\r\n              \"configSets\" : {\r\n                \"wordpress_install\" : [\"install_cfn\", \"install_wordpress\", \"configure_wordpress\" ]\r\n              },\r\n              \"install_cfn\" : {\r\n                \"files\": {\r\n                  \"/etc/cfn/cfn-hup.conf\": {\r\n                    \"content\": { \"Fn::Join\": [ \"\", [\r\n                      \"[main]\\n\",\r\n                      \"stack=\", { \"Ref\": \"AWS::StackId\" }, \"\\n\",\r\n                      \"region=\", { \"Ref\": \"AWS::Region\" }, \"\\n\"\r\n                    ]]},\r\n                    \"mode\"  : \"000400\",\r\n                    \"owner\" : \"root\",\r\n                    \"group\" : \"root\"\r\n                  },\r\n                  \"/etc/cfn/hooks.d/cfn-auto-reloader.conf\": {\r\n                    \"content\": { \"Fn::Join\": [ \"\", [\r\n                      \"[cfn-auto-reloader-hook]\\n\",\r\n                      \"triggers=post.update\\n\",\r\n                      \"path=Resources.WebServer.Metadata.AWS::CloudFormation::Init\\n\",\r\n                      \"action=/opt/aws/bin/cfn-init -v \",\r\n                              \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\r\n                              \"         --resource WebServer \",\r\n                              \"         --configsets wordpress_install \",\r\n                              \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\"\r\n                    ]]},          \r\n                    \"mode\"  : \"000400\",\r\n                    \"owner\" : \"root\",\r\n                    \"group\" : \"root\"\r\n                  }\r\n                },\r\n                \"services\" : {\r\n                  \"sysvinit\" : {\r\n                    \"cfn-hup\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\",\r\n                                  \"files\" : [\"/etc/cfn/cfn-hup.conf\", \"/etc/cfn/hooks.d/cfn-auto-reloader.conf\"] }\r\n                  }\r\n                }\r\n              },\r\n    \r\n              \"install_wordpress\" : {\r\n                \"packages\" : {\r\n                  \"yum\" : {\r\n                    \"php\"          : [],\r\n                    \"php-mysql\"    : [],\r\n                    \"mysql\"        : [],\r\n                    \"mysql-server\" : [],\r\n                    \"mysql-devel\"  : [],\r\n                    \"mysql-libs\"   : [],\r\n                    \"httpd\"        : []\r\n                  }\r\n                },\r\n                \"sources\" : {\r\n                  \"/var/www/html\" : \"http://wordpress.org/latest.tar.gz\"\r\n                },\r\n                \"files\" : {\r\n                  \"/tmp/setup.mysql\" : {\r\n                    \"content\" : { \"Fn::Join\" : [\"\", [\r\n                      \"CREATE DATABASE \", { \"Ref\" : \"DBName\" }, \";\\n\",\r\n                      \"CREATE USER '\", { \"Ref\" : \"DBUser\" }, \"'@'localhost' IDENTIFIED BY '\", { \"Ref\" : \"DBPassword\" }, \"';\\n\",\r\n                      \"GRANT ALL ON \", { \"Ref\" : \"DBName\" }, \".* TO '\", { \"Ref\" : \"DBUser\" }, \"'@'localhost';\\n\",\r\n                      \"FLUSH PRIVILEGES;\\n\"\r\n                    ]]},\r\n                    \"mode\"  : \"000400\",\r\n                    \"owner\" : \"root\",\r\n                    \"group\" : \"root\"\r\n                  },\r\n    \r\n                  \"/tmp/create-wp-config\" : {\r\n                    \"content\" : { \"Fn::Join\" : [ \"\", [\r\n                      \"#!/bin/bash -xe\\n\",\r\n                      \"cp /var/www/html/wordpress/wp-config-sample.php /var/www/html/wordpress/wp-config.php\\n\",\r\n                      \"sed -i \\\"s/'database_name_here'/'\",{ \"Ref\" : \"DBName\" }, \"'/g\\\" wp-config.php\\n\",\r\n                      \"sed -i \\\"s/'username_here'/'\",{ \"Ref\" : \"DBUser\" }, \"'/g\\\" wp-config.php\\n\",\r\n                      \"sed -i \\\"s/'password_here'/'\",{ \"Ref\" : \"DBPassword\" }, \"'/g\\\" wp-config.php\\n\"\r\n                    ]]},\r\n                    \"mode\" : \"000500\",\r\n                    \"owner\" : \"root\",\r\n                    \"group\" : \"root\"\r\n                  }\r\n                },\r\n                \"services\" : {\r\n                  \"sysvinit\" : {\r\n                    \"httpd\"  : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\" },\r\n                    \"mysqld\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\" }\r\n                  }\r\n                }\r\n              },\r\n    \r\n              \"configure_wordpress\" : {\r\n                \"commands\" : {\r\n                  \"01_set_mysql_root_password\" : {\r\n                    \"command\" : { \"Fn::Join\" : [\"\", [\"mysqladmin -u root password '\", { \"Ref\" : \"DBRootPassword\" }, \"'\"]]},\r\n                    \"test\" : { \"Fn::Join\" : [\"\", [\"$(mysql \", { \"Ref\" : \"DBName\" }, \" -u root --password='\", { \"Ref\" : \"DBRootPassword\" }, \"' >/dev/null 2>&1 </dev/null); (( $? != 0 ))\"]]}\r\n                  },\r\n                  \"02_create_database\" : {\r\n                    \"command\" : { \"Fn::Join\" : [\"\", [\"mysql -u root --password='\", { \"Ref\" : \"DBRootPassword\" }, \"' < /tmp/setup.mysql\"]]},\r\n                    \"test\" : { \"Fn::Join\" : [\"\", [\"$(mysql \", { \"Ref\" : \"DBName\" }, \" -u root --password='\", { \"Ref\" : \"DBRootPassword\" }, \"' >/dev/null 2>&1 </dev/null); (( $? != 0 ))\"]]}\r\n                  },\r\n                  \"03_configure_wordpress\" : {\r\n                    \"command\" : \"/tmp/create-wp-config\",\r\n                    \"cwd\" : \"/var/www/html/wordpress\"\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"Properties\": {\r\n            \"ImageId\" : { \"Fn::FindInMap\" : [ \"AWSRegionArch2AMI\", { \"Ref\" : \"AWS::Region\" },\r\n                              { \"Fn::FindInMap\" : [ \"AWSInstanceType2Arch\", { \"Ref\" : \"InstanceType\" }, \"Arch\" ] } ] },\r\n            \"InstanceType\"   : { \"Ref\" : \"InstanceType\" },\r\n            \"SubnetId\": \"subnet-3c0e8a5a\",\r\n            \"SecurityGroupIds\" : [\"sg-d04fe1a9\"],\r\n            \"KeyName\"        : { \"Ref\" : \"KeyName\" },\r\n            \"UserData\" : { \"Fn::Base64\" : { \"Fn::Join\" : [\"\", [\r\n                           \"#!/bin/bash -xe\\n\",\r\n                           \"yum update -y aws-cfn-bootstrap\\n\",\r\n    \r\n                           \"/opt/aws/bin/cfn-init -v \",\r\n                           \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\r\n                           \"         --resource WebServer \",\r\n                           \"         --configsets wordpress_install \",\r\n                           \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\",\r\n    \r\n                           \"/opt/aws/bin/cfn-signal -e $? \",\r\n                           \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\r\n                           \"         --resource WebServer \",\r\n                           \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\"\r\n            ]]}}\r\n          },\r\n          \"CreationPolicy\" : {\r\n            \"ResourceSignal\" : {\r\n              \"Timeout\" : \"PT15M\"\r\n            }\r\n          }\r\n        }\r\n      },\r\n    \r\n      \"Outputs\" : {\r\n        \"WebsiteURL\" : {\r\n          \"Value\" : { \"Fn::Join\" : [\"\", [\"http://\", { \"Fn::GetAtt\" : [ \"WebServer\", \"PublicDnsName\" ]}, \"/wordpress\" ]]},\r\n          \"Description\" : \"WordPress Website\"\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/GettingStarted.Walkthrough.html\r\n  [2]: https://s3-us-west-2.amazonaws.com/cloudformation-templates-us-west-2/WordPress_Single_Instance.template\r\n  [3]: https://i.stack.imgur.com/vA1qT.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "During the test, I first got the error \"*No subnets found for the default VPC 'vpc-4f2acc28'. ", "keywords": ["test"]}, {"source": "Text", "text": "This is the template I am using(just small changes I mentioned above made on the original example [template][2]): { \"AWSTemplateFormatVersion\" : \"2010-09-09\", \"Description\" : \"AWS CloudFormation Sample Template WordPress_Single_Instance: WordPress is web software you can use to create a beautiful website or blog. ", "keywords": ["change"]}, {"source": "Text", "text": "This template installs WordPress with a local MySQL database for storage. ", "keywords": ["storage"]}, {"source": "Text", "text": "This template creates an Amazon EC2 instance. ", "keywords": ["instance"]}, {"source": "Text", "text": "You will be billed for the AWS resources used if you create a stack from this template.\", \"Parameters\" : { \"KeyName\": { \"Description\" : \"Name of an existing EC2 KeyPair to enable SSH access to the instances\", \"Type\": \"AWS::EC2::KeyPair::KeyName\", \"ConstraintDescription\" : \"must be the name of an existing EC2 KeyPair.\" }, \"InstanceType\" : { \"Description\" : \"WebServer EC2 instance type\", \"Type\" : \"String\", \"Default\" : \"t2.small\", \"AllowedValues\" : [ \"t1.micro\", \"t2.nano\", \"t2.micro\", \"t2.small\", \"t2.medium\", \"t2.large\", \"m1.small\", \"m1.medium\", \"m1.large\", \"m1.xlarge\", \"m2.xlarge\", \"m2.2xlarge\", \"m2.4xlarge\", \"m3.medium\", \"m3.large\", \"m3.xlarge\", \"m3.2xlarge\", \"m4.large\", \"m4.xlarge\", \"m4.2xlarge\", \"m4.4xlarge\", \"m4.10xlarge\", \"c1.medium\", \"c1.xlarge\", \"c3.large\", \"c3.xlarge\", \"c3.2xlarge\", \"c3.4xlarge\", \"c3.8xlarge\", \"c4.large\", \"c4.xlarge\", \"c4.2xlarge\", \"c4.4xlarge\", \"c4.8xlarge\", \"g2.2xlarge\", \"g2.8xlarge\", \"r3.large\", \"r3.xlarge\", \"r3.2xlarge\", \"r3.4xlarge\", \"r3.8xlarge\", \"i2.xlarge\", \"i2.2xlarge\", \"i2.4xlarge\", \"i2.8xlarge\", \"d2.xlarge\", \"d2.2xlarge\", \"d2.4xlarge\", \"d2.8xlarge\", \"hi1.4xlarge\", \"hs1.8xlarge\", \"cr1.8xlarge\", \"cc2.8xlarge\", \"cg1.4xlarge\"] , \"ConstraintDescription\" : \"must be a valid EC2 instance type.\" }, \"SSHLocation\": { \"Description\": \"The IP address range that can be used to SSH to the EC2 instances\", \"Type\": \"String\", \"MinLength\": \"9\", \"MaxLength\": \"18\", \"Default\": \"0.0.0.0/0\", \"AllowedPattern\": \"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\", \"ConstraintDescription\": \"must be a valid IP CIDR range of the form x.x.x.x/x.\" }, \"DBName\" : { \"Default\": \"wordpressdb\", \"Description\" : \"The WordPress database name\", \"Type\": \"String\", \"MinLength\": \"1\", \"MaxLength\": \"64\", \"AllowedPattern\" : \"[a-zA-Z][a-zA-Z0-9]*\", \"ConstraintDescription\" : \"must begin with a letter and contain only alphanumeric characters.\" }, \"DBUser\" : { \"NoEcho\": \"true\", \"Description\" : \"The WordPress database admin account username\", \"Type\": \"String\", \"MinLength\": \"1\", \"MaxLength\": \"16\", \"AllowedPattern\" : \"[a-zA-Z][a-zA-Z0-9]*\", \"ConstraintDescription\" : \"must begin with a letter and contain only alphanumeric characters.\" }, \"DBPassword\" : { \"NoEcho\": \"true\", \"Description\" : \"The WordPress database admin account password\", \"Type\": \"String\", \"MinLength\": \"8\", \"MaxLength\": \"41\", \"AllowedPattern\" : \"[a-zA-Z0-9]*\", \"ConstraintDescription\" : \"must contain only alphanumeric characters.\" }, \"DBRootPassword\" : { \"NoEcho\": \"true\", \"Description\" : \"MySQL root password\", \"Type\": \"String\", \"MinLength\": \"8\", \"MaxLength\": \"41\", \"AllowedPattern\" : \"[a-zA-Z0-9]*\", \"ConstraintDescription\" : \"must contain only alphanumeric characters.\" } }, \"Mappings\" : { \"AWSInstanceType2Arch\" : { \"t1.micro\" : { \"Arch\" : \"PV64\" ", "keywords": ["bill", "instance"]}, {"source": "Text", "text": "} } , \"AWSRegionArch2AMI\" : { \"us-east-1\" : {\"PV64\" : \"ami-2a69aa47\", \"HVM64\" : \"ami-97785bed\", \"HVMG2\" : \"ami-0a6e3770\"}, \"us-west-2\" : {\"PV64\" : \"ami-7f77b31f\", \"HVM64\" : \"ami-f2d3638a\", \"HVMG2\" : \"ami-ee15a196\"}, \"us-west-1\" : {\"PV64\" : \"ami-a2490dc2\", \"HVM64\" : \"ami-824c4ee2\", \"HVMG2\" : \"ami-0da4a46d\"}, \"eu-west-1\" : {\"PV64\" : \"ami-4cdd453f\", \"HVM64\" : \"ami-d834aba1\", \"HVMG2\" : \"ami-af8013d6\"}, \"eu-west-2\" : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-403e2524\", \"HVMG2\" : \"NOT_SUPPORTED\"}, \"eu-west-3\" : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-8ee056f3\", \"HVMG2\" : \"NOT_SUPPORTED\"}, \"eu-central-1\" : {\"PV64\" : \"ami-6527cf0a\", \"HVM64\" : \"ami-5652ce39\", \"HVMG2\" : \"ami-1d58ca72\"}, \"ap-northeast-1\" : {\"PV64\" : \"ami-3e42b65f\", \"HVM64\" : \"ami-ceafcba8\", \"HVMG2\" : \"ami-edfd658b\"}, \"ap-northeast-2\" : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-863090e8\", \"HVMG2\" : \"NOT_SUPPORTED\"}, \"ap-northeast-3\" : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-83444afe\", \"HVMG2\" : \"NOT_SUPPORTED\"}, \"ap-southeast-1\" : {\"PV64\" : \"ami-df9e4cbc\", \"HVM64\" : \"ami-68097514\", \"HVMG2\" : \"ami-c06013bc\"}, \"ap-southeast-2\" : {\"PV64\" : \"ami-63351d00\", \"HVM64\" : \"ami-942dd1f6\", \"HVMG2\" : \"ami-85ef12e7\"}, \"ap-south-1\" : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-531a4c3c\", \"HVMG2\" : \"ami-411e492e\"}, \"us-east-2\" : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-f63b1193\", \"HVMG2\" : \"NOT_SUPPORTED\"}, \"ca-central-1\" : {\"PV64\" : \"NOT_SUPPORTED\", \"HVM64\" : \"ami-a954d1cd\", \"HVMG2\" : \"NOT_SUPPORTED\"}, \"sa-east-1\" : {\"PV64\" : \"ami-1ad34676\", \"HVM64\" : \"ami-84175ae8\", \"HVMG2\" : \"NOT_SUPPORTED\"}, \"cn-north-1\" : {\"PV64\" : \"ami-77559f1a\", \"HVM64\" : \"ami-cb19c4a6\", \"HVMG2\" : \"NOT_SUPPORTED\"}, \"cn-northwest-1\" : {\"PV64\" : \"ami-80707be2\", \"HVM64\" : \"ami-3e60745c\", \"HVMG2\" : \"NOT_SUPPORTED\"} } }, \"Resources\" : { \"WebServer\": { \"Type\" : \"AWS::EC2::Instance\", \"Metadata\" : { \"AWS::CloudFormation::Init\" : { \"configSets\" : { \"wordpress_install\" : [\"install_cfn\", \"install_wordpress\", \"configure_wordpress\" ] }, \"install_cfn\" : { \"files\": { \"/etc/cfn/cfn-hup.conf\": { \"content\": { \"Fn::Join\": [ \"\", [ \"[main]\\n\", \"stack=\", { \"Ref\": \"AWS::StackId\" }, \"\\n\", \"region=\", { \"Ref\": \"AWS::Region\" }, \"\\n\" ]]}, \"mode\" : \"000400\", \"owner\" : \"root\", \"group\" : \"root\" }, \"/etc/cfn/hooks.d/cfn-auto-reloader.conf\": { \"content\": { \"Fn::Join\": [ \"\", [ \"[cfn-auto-reloader-hook]\\n\", \"triggers=post.update\\n\", \"path=Resources.WebServer.Metadata.AWS::CloudFormation::Init\\n\", \"action=/opt/aws/bin/cfn-init -v \", \" --stack \", { \"Ref\" : \"AWS::StackName\" ", "keywords": ["instance", "billing mode"]}, {"source": "Text", "text": "}, \" --resource WebServer \", \" --configsets wordpress_install \", \" --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\" ]]}, \"mode\" : \"000400\", \"owner\" : \"root\", \"group\" : \"root\" } }, \"services\" : { \"sysvinit\" : { \"cfn-hup\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\", \"files\" : [\"/etc/cfn/cfn-hup.conf\", \"/etc/cfn/hooks.d/cfn-auto-reloader.conf\"] } } } }, \"install_wordpress\" : { \"packages\" : { \"yum\" : { \"php\" : [], \"php-mysql\" : [], \"mysql\" : [], \"mysql-server\" : [], \"mysql-devel\" : [], \"mysql-libs\" : [], \"httpd\" : [] } }, \"sources\" : { \"/var/www/html\" : \"http://wordpress.org/latest.tar.gz\" ", "keywords": ["billing mode"]}, {"source": "Text", "text": "}, \"'@'localhost';\\n\", \"FLUSH PRIVILEGES;\\n\" ]]}, \"mode\" : \"000400\", \"owner\" : \"root\", \"group\" : \"root\" }, \"/tmp/create-wp-config\" : { \"content\" : { \"Fn::Join\" : [ \"\", [ \"#!/bin/bash -xe\\n\", \"cp /var/www/html/wordpress/wp-config-sample.php /var/www/html/wordpress/wp-config.php\\n\", \"sed -i \\\"s/'database_name_here'/'\",{ \"Ref\" : \"DBName\" }, \"'/g\\\" wp-config.php\\n\", \"sed -i \\\"s/'username_here'/'\",{ \"Ref\" : \"DBUser\" ", "keywords": ["billing mode"]}, {"source": "Text", "text": "}, \"'/g\\\" wp-config.php\\n\", \"sed -i \\\"s/'password_here'/'\",{ \"Ref\" : \"DBPassword\" }, \"'/g\\\" wp-config.php\\n\" ]]}, \"mode\" : \"000500\", \"owner\" : \"root\", \"group\" : \"root\" ", "keywords": ["billing mode"]}, {"source": "Text", "text": "} }, \"services\" : { \"sysvinit\" : { \"httpd\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\" }, \"mysqld\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\" } } } }, \"configure_wordpress\" : { \"commands\" : { \"01_set_mysql_root_password\" : { \"command\" : { \"Fn::Join\" : [\"\", [\"mysqladmin -u root password '\", { \"Ref\" : \"DBRootPassword\" }, \"'\"]]}, \"test\" : { \"Fn::Join\" : [\"\", [\"$(mysql \", { \"Ref\" : \"DBName\" ", "keywords": ["test"]}]}], "answers": [{"Id": "51254071", "PostTypeId": "2", "ParentId": "51253383", "CreationDate": "2018-07-09T21:09:22.223", "Score": "1", "Body": "<p>Your CloudFormation (CFN) stack is attempting to create an EC2 instance to run your Wordpress on, and there's a section in the template which instructs the CFN stack to wait for a signal from the newly created instance before proceeding. </p>\n\n<p><strong>\"Failed to receive 1 resource signal(s) within the specified duration\"</strong> indicates that your instance is failing to send the signal within the time limit. This can be because of a number of reasons.</p>\n\n<p>Can you copy/paste or link to the CFN template you are using? Also, copy/paste your CFN stack's events log. It will give some additional information on what's happening.</p>\n\n<p><strong>Update:</strong><br>\n<strong>Short answer:</strong><br>\nIt's more than likely your instance is failing to run through all of its startup scripts, which is preventing the signal back to the CFN stack. You'll need to SSH into your instance and inspect the logs to find out what's going on.</p>\n\n<p>Instructions on where the logs are located can be found at Amazon's troubleshooting documentation.\n<a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html</a></p>\n\n<p><strong>Long answer:</strong><br>\nSo check out the following sections from your CFN template:</p>\n\n<pre><code>\"UserData\" : { \"Fn::Base64\" : { \"Fn::Join\" : [\"\", [\n                   \"#!/bin/bash -xe\\n\",\n                   \"yum update -y aws-cfn-bootstrap\\n\",\n\n                   \"/opt/aws/bin/cfn-init -v \",\n                   \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\n                   \"         --resource WebServer \",\n                   \"         --configsets wordpress_install \",\n                   \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\",\n\n                   \"/opt/aws/bin/cfn-signal -e $? \",\n                   \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\n                   \"         --resource WebServer \",\n                   \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\"\n]]}}\n</code></pre>\n\n<p>This section is a bash script that runs on the newly created instance after it first boots. It does the following:</p>\n\n<ol>\n<li><p>Install/update <em>aws-cfn-bootstrap</em>. This is an AWS provided client that allows your instance to interact with the CFN template that created it.  </p>\n\n<pre><code>\"yum update -y aws-cfn-bootstrap\\n\",  \n</code></pre></li>\n<li><p>Using the newly installed <em>aws-cfn-bootstrap</em> client, the instance looks at the CFN template and executes all of the tasks defined in the <em>wordpress_install</em> configset.  </p>\n\n<pre><code>\"/opt/aws/bin/cfn-init -v \"\n\"         --stack \", { \"Ref\" : \"AWS::StackName\" }\n\"         --resource WebServer \"\n\"         --configsets wordpress_install \"\n\"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\"\n</code></pre>\n\n<p>The configset is defined earlier in the template. A lot is going on here, so I can't explain it all. It'll be up to you to look at it and determine what it is doing.</p>\n\n<pre><code>\"AWS::CloudFormation::Init\" : {\n  \"configSets\" : {\n    \"wordpress_install\" : [\"install_cfn\", \"install_wordpress\", \"configure_wordpress\" ]\n  },\n  \"install_cfn\" : {\n    \"files\": {\n      \"/etc/cfn/cfn-hup.conf\": {\n        \"content\": { \"Fn::Join\": [ \"\", [\n          \"[main]\\n\",\n          \"stack=\", { \"Ref\": \"AWS::StackId\" }, \"\\n\",\n          \"region=\", { \"Ref\": \"AWS::Region\" }, \"\\n\"\n        ]]},\n        \"mode\"  : \"000400\",\n        \"owner\" : \"root\",\n        \"group\" : \"root\"\n      },\n      \"/etc/cfn/hooks.d/cfn-auto-reloader.conf\": {\n        \"content\": { \"Fn::Join\": [ \"\", [\n          \"[cfn-auto-reloader-hook]\\n\",\n          \"triggers=post.update\\n\",\n          \"path=Resources.WebServer.Metadata.AWS::CloudFormation::Init\\n\",\n          \"action=/opt/aws/bin/cfn-init -v \",\n                  \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\n                  \"         --resource WebServer \",\n                  \"         --configsets wordpress_install \",\n                  \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\"\n        ]]},          \n        \"mode\"  : \"000400\",\n        \"owner\" : \"root\",\n        \"group\" : \"root\"\n      }\n    },\n    \"services\" : {\n      \"sysvinit\" : {\n        \"cfn-hup\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\",\n                      \"files\" : [\"/etc/cfn/cfn-hup.conf\", \"/etc/cfn/hooks.d/cfn-auto-reloader.conf\"] }\n      }\n    }\n  },\n  \"install_wordpress\" : {\n    \"packages\" : {\n      \"yum\" : {\n        \"php\"          : [],\n        \"php-mysql\"    : [],\n        \"mysql\"        : [],\n        \"mysql-server\" : [],\n        \"mysql-devel\"  : [],\n        \"mysql-libs\"   : [],\n        \"httpd\"        : []\n      }\n    },\n    \"sources\" : {\n      \"/var/www/html\" : \"http://wordpress.org/latest.tar.gz\"\n    },\n    \"files\" : {\n      \"/tmp/setup.mysql\" : {\n        \"content\" : { \"Fn::Join\" : [\"\", [\n          \"CREATE DATABASE \", { \"Ref\" : \"DBName\" }, \";\\n\",\n          \"CREATE USER '\", { \"Ref\" : \"DBUser\" }, \"'@'localhost' IDENTIFIED BY '\", { \"Ref\" : \"DBPassword\" }, \"';\\n\",\n          \"GRANT ALL ON \", { \"Ref\" : \"DBName\" }, \".* TO '\", { \"Ref\" : \"DBUser\" }, \"'@'localhost';\\n\",\n          \"FLUSH PRIVILEGES;\\n\"\n        ]]},\n        \"mode\"  : \"000400\",\n        \"owner\" : \"root\",\n        \"group\" : \"root\"\n      },\n\n      \"/tmp/create-wp-config\" : {\n        \"content\" : { \"Fn::Join\" : [ \"\", [\n          \"#!/bin/bash -xe\\n\",\n          \"cp /var/www/html/wordpress/wp-config-sample.php /var/www/html/wordpress/wp-config.php\\n\",\n          \"sed -i \\\"s/'database_name_here'/'\",{ \"Ref\" : \"DBName\" }, \"'/g\\\" wp-config.php\\n\",\n          \"sed -i \\\"s/'username_here'/'\",{ \"Ref\" : \"DBUser\" }, \"'/g\\\" wp-config.php\\n\",\n          \"sed -i \\\"s/'password_here'/'\",{ \"Ref\" : \"DBPassword\" }, \"'/g\\\" wp-config.php\\n\"\n        ]]},\n        \"mode\" : \"000500\",\n        \"owner\" : \"root\",\n        \"group\" : \"root\"\n      }\n    },\n    \"services\" : {\n      \"sysvinit\" : {\n        \"httpd\"  : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\" },\n        \"mysqld\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\" }\n      }\n    }\n  },\n\n  \"configure_wordpress\" : {\n    \"commands\" : {\n      \"01_set_mysql_root_password\" : {\n        \"command\" : { \"Fn::Join\" : [\"\", [\"mysqladmin -u root password '\", { \"Ref\" : \"DBRootPassword\" }, \"'\"]]},\n        \"test\" : { \"Fn::Join\" : [\"\", [\"$(mysql \", { \"Ref\" : \"DBName\" }, \" -u root --password='\", { \"Ref\" : \"DBRootPassword\" }, \"' &gt;/dev/null 2&gt;&amp;1 &lt;/dev/null); (( $? != 0 ))\"]]}\n      },\n      \"02_create_database\" : {\n        \"command\" : { \"Fn::Join\" : [\"\", [\"mysql -u root --password='\", { \"Ref\" : \"DBRootPassword\" }, \"' &lt; /tmp/setup.mysql\"]]},\n        \"test\" : { \"Fn::Join\" : [\"\", [\"$(mysql \", { \"Ref\" : \"DBName\" }, \" -u root --password='\", { \"Ref\" : \"DBRootPassword\" }, \"' &gt;/dev/null 2&gt;&amp;1 &lt;/dev/null); (( $? != 0 ))\"]]}\n      },\n      \"03_configure_wordpress\" : {\n        \"command\" : \"/tmp/create-wp-config\",\n        \"cwd\" : \"/var/www/html/wordpress\"\n      }\n    }\n  }\n}  \n</code></pre></li>\n<li><p>Lastly, the script signals the CFN stack to let it know that all tasks are complete and the CFN stack can then go to UPDATE_COMPLETE status.  </p>\n\n<pre><code>\"/opt/aws/bin/cfn-signal -e $? \",\n\"         --stack \", { \"Ref\" : \"AWS::StackName\" },\n\"         --resource WebServer \",\n\"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\"\n</code></pre></li>\n</ol>\n\n<p>Since your CFN stack is not receiving the signal after 15 minutes, your instance is failing somewhere in the series of tasks I listed above. It could be any number of things causing this, and the best way to find out what's wrong is to SSH into the instance and inspect the logs. AWS documentation explains where the logs are, as well as some other troubleshooting tips: <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html</a>  </p>\n\n<p>Lastly, when you build your CFN stack, be sure stack rollback is <em>disabled</em>, or else your instance will get auto-terminated when the signal fails and you won't have a chance to look at the logs.  </p>\n\n<p>Hope this helps! Good luck.  </p>\n", "OwnerUserId": "3421767", "LastEditorUserId": "3421767", "LastEditDate": "2018-07-10T04:36:54.440", "LastActivityDate": "2018-07-10T04:36:54.440", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "89487978", "PostId": "51254071", "Score": "0", "Text": "hi, thanks for your comment. I have added the template code. Could you please have a look? Thanks", "CreationDate": "2018-07-09T21:54:48.317", "UserId": "5406339", "filtered-sentences": []}], "history": [{"Id": "177290830", "PostHistoryTypeId": "2", "PostId": "51254071", "RevisionGUID": "8219d7c2-9def-443b-87be-5af62575b009", "CreationDate": "2018-07-09T21:09:22.223", "UserId": "3421767", "Text": "Your CloudFormation (CFN) stack is attempting to create an EC2 instance to run your Wordpress on, and there's a section in the template which instructs the CFN stack to wait for a signal from the newly created instance before proceeding. \r\n\r\n**\"Failed to receive 1 resource signal(s) within the specified duration\"** indicates that your instance is failing to send the signal within the time limit. This can be because of a number of reasons.\r\n\r\nCan you copy/paste or link to the CFN template you are using? Also, copy/paste your CFN stack's events log. It will give some additional information on what's happening.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Your CloudFormation (CFN) stack is attempting to create an EC2 instance to run your Wordpress on, and there's a section in the template which instructs the CFN stack to wait for a signal from the newly created instance before proceeding. ", "keywords": ["instance"]}, {"source": "Text", "text": "**\"Failed to receive 1 resource signal(s) within the specified duration\"** indicates that your instance is failing to send the signal within the time limit. ", "keywords": ["instance"]}]}, {"Id": "177304280", "PostHistoryTypeId": "5", "PostId": "51254071", "RevisionGUID": "adb25f92-7aa5-430c-93c5-2efd2e7205b1", "CreationDate": "2018-07-10T04:36:54.440", "UserId": "3421767", "Comment": "added 8123 characters in body", "Text": "Your CloudFormation (CFN) stack is attempting to create an EC2 instance to run your Wordpress on, and there's a section in the template which instructs the CFN stack to wait for a signal from the newly created instance before proceeding. \r\n\r\n**\"Failed to receive 1 resource signal(s) within the specified duration\"** indicates that your instance is failing to send the signal within the time limit. This can be because of a number of reasons.\r\n\r\nCan you copy/paste or link to the CFN template you are using? Also, copy/paste your CFN stack's events log. It will give some additional information on what's happening.\r\n\r\n**Update:**  \r\n**Short answer:**  \r\nIt's more than likely your instance is failing to run through all of its startup scripts, which is preventing the signal back to the CFN stack. You'll need to SSH into your instance and inspect the logs to find out what's going on.\r\n\r\nInstructions on where the logs are located can be found at Amazon's troubleshooting documentation.\r\nhttps://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html\r\n\r\n**Long answer:**  \r\nSo check out the following sections from your CFN template:\r\n\r\n    \"UserData\" : { \"Fn::Base64\" : { \"Fn::Join\" : [\"\", [\r\n                       \"#!/bin/bash -xe\\n\",\r\n                       \"yum update -y aws-cfn-bootstrap\\n\",\r\n\r\n                       \"/opt/aws/bin/cfn-init -v \",\r\n                       \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\r\n                       \"         --resource WebServer \",\r\n                       \"         --configsets wordpress_install \",\r\n                       \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\",\r\n\r\n                       \"/opt/aws/bin/cfn-signal -e $? \",\r\n                       \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\r\n                       \"         --resource WebServer \",\r\n                       \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\"\r\n    ]]}}\r\nThis section is a bash script that runs on the newly created instance after it first boots. It does the following:\r\n\r\n1. Install/update *aws-cfn-bootstrap*. This is an AWS provided client that allows your instance to interact with the CFN template that created it.  \r\n\r\n        \"yum update -y aws-cfn-bootstrap\\n\",  \r\n\r\n2. Using the newly installed *aws-cfn-bootstrap* client, the instance looks at the CFN template and executes all of the tasks defined in the *wordpress_install* configset.  \r\n\r\n        \"/opt/aws/bin/cfn-init -v \"\r\n        \"         --stack \", { \"Ref\" : \"AWS::StackName\" }\r\n        \"         --resource WebServer \"\r\n        \"         --configsets wordpress_install \"\r\n        \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\"\r\n\r\n  The configset is defined earlier in the template. A lot is going on here, so I can't explain it all. It'll be up to you to look at it and determine what it is doing.\r\n\r\n        \"AWS::CloudFormation::Init\" : {\r\n          \"configSets\" : {\r\n            \"wordpress_install\" : [\"install_cfn\", \"install_wordpress\", \"configure_wordpress\" ]\r\n          },\r\n          \"install_cfn\" : {\r\n            \"files\": {\r\n              \"/etc/cfn/cfn-hup.conf\": {\r\n                \"content\": { \"Fn::Join\": [ \"\", [\r\n                  \"[main]\\n\",\r\n                  \"stack=\", { \"Ref\": \"AWS::StackId\" }, \"\\n\",\r\n                  \"region=\", { \"Ref\": \"AWS::Region\" }, \"\\n\"\r\n                ]]},\r\n                \"mode\"  : \"000400\",\r\n                \"owner\" : \"root\",\r\n                \"group\" : \"root\"\r\n              },\r\n              \"/etc/cfn/hooks.d/cfn-auto-reloader.conf\": {\r\n                \"content\": { \"Fn::Join\": [ \"\", [\r\n                  \"[cfn-auto-reloader-hook]\\n\",\r\n                  \"triggers=post.update\\n\",\r\n                  \"path=Resources.WebServer.Metadata.AWS::CloudFormation::Init\\n\",\r\n                  \"action=/opt/aws/bin/cfn-init -v \",\r\n                          \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\r\n                          \"         --resource WebServer \",\r\n                          \"         --configsets wordpress_install \",\r\n                          \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\"\r\n                ]]},          \r\n                \"mode\"  : \"000400\",\r\n                \"owner\" : \"root\",\r\n                \"group\" : \"root\"\r\n              }\r\n            },\r\n            \"services\" : {\r\n              \"sysvinit\" : {\r\n                \"cfn-hup\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\",\r\n                              \"files\" : [\"/etc/cfn/cfn-hup.conf\", \"/etc/cfn/hooks.d/cfn-auto-reloader.conf\"] }\r\n              }\r\n            }\r\n          },\r\n          \"install_wordpress\" : {\r\n            \"packages\" : {\r\n              \"yum\" : {\r\n                \"php\"          : [],\r\n                \"php-mysql\"    : [],\r\n                \"mysql\"        : [],\r\n                \"mysql-server\" : [],\r\n                \"mysql-devel\"  : [],\r\n                \"mysql-libs\"   : [],\r\n                \"httpd\"        : []\r\n              }\r\n            },\r\n            \"sources\" : {\r\n              \"/var/www/html\" : \"http://wordpress.org/latest.tar.gz\"\r\n            },\r\n            \"files\" : {\r\n              \"/tmp/setup.mysql\" : {\r\n                \"content\" : { \"Fn::Join\" : [\"\", [\r\n                  \"CREATE DATABASE \", { \"Ref\" : \"DBName\" }, \";\\n\",\r\n                  \"CREATE USER '\", { \"Ref\" : \"DBUser\" }, \"'@'localhost' IDENTIFIED BY '\", { \"Ref\" : \"DBPassword\" }, \"';\\n\",\r\n                  \"GRANT ALL ON \", { \"Ref\" : \"DBName\" }, \".* TO '\", { \"Ref\" : \"DBUser\" }, \"'@'localhost';\\n\",\r\n                  \"FLUSH PRIVILEGES;\\n\"\r\n                ]]},\r\n                \"mode\"  : \"000400\",\r\n                \"owner\" : \"root\",\r\n                \"group\" : \"root\"\r\n              },\r\n\r\n              \"/tmp/create-wp-config\" : {\r\n                \"content\" : { \"Fn::Join\" : [ \"\", [\r\n                  \"#!/bin/bash -xe\\n\",\r\n                  \"cp /var/www/html/wordpress/wp-config-sample.php /var/www/html/wordpress/wp-config.php\\n\",\r\n                  \"sed -i \\\"s/'database_name_here'/'\",{ \"Ref\" : \"DBName\" }, \"'/g\\\" wp-config.php\\n\",\r\n                  \"sed -i \\\"s/'username_here'/'\",{ \"Ref\" : \"DBUser\" }, \"'/g\\\" wp-config.php\\n\",\r\n                  \"sed -i \\\"s/'password_here'/'\",{ \"Ref\" : \"DBPassword\" }, \"'/g\\\" wp-config.php\\n\"\r\n                ]]},\r\n                \"mode\" : \"000500\",\r\n                \"owner\" : \"root\",\r\n                \"group\" : \"root\"\r\n              }\r\n            },\r\n            \"services\" : {\r\n              \"sysvinit\" : {\r\n                \"httpd\"  : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\" },\r\n                \"mysqld\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\" }\r\n              }\r\n            }\r\n          },\r\n\r\n          \"configure_wordpress\" : {\r\n            \"commands\" : {\r\n              \"01_set_mysql_root_password\" : {\r\n                \"command\" : { \"Fn::Join\" : [\"\", [\"mysqladmin -u root password '\", { \"Ref\" : \"DBRootPassword\" }, \"'\"]]},\r\n                \"test\" : { \"Fn::Join\" : [\"\", [\"$(mysql \", { \"Ref\" : \"DBName\" }, \" -u root --password='\", { \"Ref\" : \"DBRootPassword\" }, \"' >/dev/null 2>&1 </dev/null); (( $? != 0 ))\"]]}\r\n              },\r\n              \"02_create_database\" : {\r\n                \"command\" : { \"Fn::Join\" : [\"\", [\"mysql -u root --password='\", { \"Ref\" : \"DBRootPassword\" }, \"' < /tmp/setup.mysql\"]]},\r\n                \"test\" : { \"Fn::Join\" : [\"\", [\"$(mysql \", { \"Ref\" : \"DBName\" }, \" -u root --password='\", { \"Ref\" : \"DBRootPassword\" }, \"' >/dev/null 2>&1 </dev/null); (( $? != 0 ))\"]]}\r\n              },\r\n              \"03_configure_wordpress\" : {\r\n                \"command\" : \"/tmp/create-wp-config\",\r\n                \"cwd\" : \"/var/www/html/wordpress\"\r\n              }\r\n            }\r\n          }\r\n        }  \r\n\r\n3. Lastly, the script signals the CFN stack to let it know that all tasks are complete and the CFN stack can then go to UPDATE_COMPLETE status.  \r\n\r\n        \"/opt/aws/bin/cfn-signal -e $? \",\r\n        \"         --stack \", { \"Ref\" : \"AWS::StackName\" },\r\n        \"         --resource WebServer \",\r\n        \"         --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\"\r\n\r\nSince your CFN stack is not receiving the signal after 15 minutes, your instance is failing somewhere in the series of tasks I listed above. It could be any number of things causing this, and the best way to find out what's wrong is to SSH into the instance and inspect the logs. AWS documentation explains where the logs are, as well as some other troubleshooting tips: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html  \r\n\r\nLastly, when you build your CFN stack, be sure stack rollback is *disabled*, or else your instance will get auto-terminated when the signal fails and you won't have a chance to look at the logs.  \r\n\r\nHope this helps! Good luck.  \r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Your CloudFormation (CFN) stack is attempting to create an EC2 instance to run your Wordpress on, and there's a section in the template which instructs the CFN stack to wait for a signal from the newly created instance before proceeding. ", "keywords": ["instance"]}, {"source": "Text", "text": "**\"Failed to receive 1 resource signal(s) within the specified duration\"** indicates that your instance is failing to send the signal within the time limit. ", "keywords": ["instance"]}, {"source": "Text", "text": "It's more than likely your instance is failing to run through all of its startup scripts, which is preventing the signal back to the CFN stack. ", "keywords": ["instance"]}, {"source": "Text", "text": "You'll need to SSH into your instance and inspect the logs to find out what's going on. ", "keywords": ["instance"]}, {"source": "Text", "text": "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html **Long answer:** So check out the following sections from your CFN template: \"UserData\" : { \"Fn::Base64\" : { \"Fn::Join\" : [\"\", [ \"#!/bin/bash -xe\\n\", \"yum update -y aws-cfn-bootstrap\\n\", \"/opt/aws/bin/cfn-init -v \", \" --stack \", { \"Ref\" : \"AWS::StackName\" }, \" --resource WebServer \", \" --configsets wordpress_install \", \" --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\", \"/opt/aws/bin/cfn-signal -e $? \", \" --stack \", { \"Ref\" : \"AWS::StackName\" }, \" --resource WebServer \", \" --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\" ]]}} This section is a bash script that runs on the newly created instance after it first boots. ", "keywords": ["instance"]}, {"source": "Text", "text": "This is an AWS provided client that allows your instance to interact with the CFN template that created it. \"yum update -y aws-cfn-bootstrap\\n\", 2. Using the newly installed *aws-cfn-bootstrap* client, the instance looks at the CFN template and executes all of the tasks defined in the *wordpress_install* configset. \"/opt/aws/bin/cfn-init -v \" \" --stack \", { \"Ref\" : \"AWS::StackName\" } \" --resource WebServer \" \" --configsets wordpress_install \" \" --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\" The configset is defined earlier in the template. ", "keywords": ["instance"]}, {"source": "Text", "text": "\"AWS::CloudFormation::Init\" : { \"configSets\" : { \"wordpress_install\" : [\"install_cfn\", \"install_wordpress\", \"configure_wordpress\" ] }, \"install_cfn\" : { \"files\": { \"/etc/cfn/cfn-hup.conf\": { \"content\": { \"Fn::Join\": [ \"\", [ \"[main]\\n\", \"stack=\", { \"Ref\": \"AWS::StackId\" }, \"\\n\", \"region=\", { \"Ref\": \"AWS::Region\" }, \"\\n\" ]]}, \"mode\" : \"000400\", \"owner\" : \"root\", \"group\" : \"root\" }, \"/etc/cfn/hooks.d/cfn-auto-reloader.conf\": { \"content\": { \"Fn::Join\": [ \"\", [ \"[cfn-auto-reloader-hook]\\n\", \"triggers=post.update\\n\", \"path=Resources.WebServer.Metadata.AWS::CloudFormation::Init\\n\", \"action=/opt/aws/bin/cfn-init -v \", \" --stack \", { \"Ref\" : \"AWS::StackName\" ", "keywords": ["billing mode"]}, {"source": "Text", "text": "}, \" --resource WebServer \", \" --configsets wordpress_install \", \" --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\" ]]}, \"mode\" : \"000400\", \"owner\" : \"root\", \"group\" : \"root\" } }, \"services\" : { \"sysvinit\" : { \"cfn-hup\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\", \"files\" : [\"/etc/cfn/cfn-hup.conf\", \"/etc/cfn/hooks.d/cfn-auto-reloader.conf\"] } } } }, \"install_wordpress\" : { \"packages\" : { \"yum\" : { \"php\" : [], \"php-mysql\" : [], \"mysql\" : [], \"mysql-server\" : [], \"mysql-devel\" : [], \"mysql-libs\" : [], \"httpd\" : [] } }, \"sources\" : { \"/var/www/html\" : \"http://wordpress.org/latest.tar.gz\" ", "keywords": ["billing mode"]}, {"source": "Text", "text": "}, \"'@'localhost';\\n\", \"FLUSH PRIVILEGES;\\n\" ]]}, \"mode\" : \"000400\", \"owner\" : \"root\", \"group\" : \"root\" }, \"/tmp/create-wp-config\" : { \"content\" : { \"Fn::Join\" : [ \"\", [ \"#!/bin/bash -xe\\n\", \"cp /var/www/html/wordpress/wp-config-sample.php /var/www/html/wordpress/wp-config.php\\n\", \"sed -i \\\"s/'database_name_here'/'\",{ \"Ref\" : \"DBName\" }, \"'/g\\\" wp-config.php\\n\", \"sed -i \\\"s/'username_here'/'\",{ \"Ref\" : \"DBUser\" ", "keywords": ["billing mode"]}, {"source": "Text", "text": "}, \"'/g\\\" wp-config.php\\n\", \"sed -i \\\"s/'password_here'/'\",{ \"Ref\" : \"DBPassword\" }, \"'/g\\\" wp-config.php\\n\" ]]}, \"mode\" : \"000500\", \"owner\" : \"root\", \"group\" : \"root\" ", "keywords": ["billing mode"]}, {"source": "Text", "text": "} }, \"services\" : { \"sysvinit\" : { \"httpd\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\" }, \"mysqld\" : { \"enabled\" : \"true\", \"ensureRunning\" : \"true\" } } } }, \"configure_wordpress\" : { \"commands\" : { \"01_set_mysql_root_password\" : { \"command\" : { \"Fn::Join\" : [\"\", [\"mysqladmin -u root password '\", { \"Ref\" : \"DBRootPassword\" }, \"'\"]]}, \"test\" : { \"Fn::Join\" : [\"\", [\"$(mysql \", { \"Ref\" : \"DBName\" ", "keywords": ["test"]}, {"source": "Text", "text": "\"/opt/aws/bin/cfn-signal -e $? \", \" --stack \", { \"Ref\" : \"AWS::StackName\" }, \" --resource WebServer \", \" --region \", { \"Ref\" : \"AWS::Region\" }, \"\\n\" Since your CFN stack is not receiving the signal after 15 minutes, your instance is failing somewhere in the series of tasks I listed above. ", "keywords": ["instance"]}, {"source": "Text", "text": "It could be any number of things causing this, and the best way to find out what's wrong is to SSH into the instance and inspect the logs. ", "keywords": ["instance"]}, {"source": "Text", "text": "Lastly, when you build your CFN stack, be sure stack rollback is *disabled*, or else your instance will get auto-terminated when the signal fails and you won't have a chance to look at the logs. ", "keywords": ["instance"]}]}], "filtered-sentences": [{"source": "Body", "text": "Your CloudFormation (CFN) stack is attempting to create an EC2 instance to run your Wordpress on, and there's a section in the template which instructs the CFN stack to wait for a signal from the newly created instance before proceeding. ", "keywords": ["instance"]}, {"source": "Body", "text": "\"Failed to receive 1 resource signal(s) within the specified duration\" indicates that your instance is failing to send the signal within the time limit. ", "keywords": ["instance"]}, {"source": "Body", "text": "It's more than likely your instance is failing to run through all of its startup scripts, which is preventing the signal back to the CFN stack. ", "keywords": ["instance"]}, {"source": "Body", "text": "You'll need to SSH into your instance and inspect the logs to find out what's going on. ", "keywords": ["instance"]}, {"source": "Body", "text": "This section is a bash script that runs on the newly created instance after it first boots. ", "keywords": ["instance"]}, {"source": "Body", "text": "This is an AWS provided client that allows your instance to interact with the CFN template that created it. ", "keywords": ["instance"]}, {"source": "Body", "text": "Using the newly installed aws-cfn-bootstrap client, the instance looks at the CFN template and executes all of the tasks defined in the wordpress_install configset. ", "keywords": ["instance"]}, {"source": "Body", "text": "Since your CFN stack is not receiving the signal after 15 minutes, your instance is failing somewhere in the series of tasks I listed above. ", "keywords": ["instance"]}, {"source": "Body", "text": "It could be any number of things causing this, and the best way to find out what's wrong is to SSH into the instance and inspect the logs. ", "keywords": ["instance"]}, {"source": "Body", "text": "Lastly, when you build your CFN stack, be sure stack rollback is disabled, or else your instance will get auto-terminated when the signal fails and you won't have a chance to look at the logs. ", "keywords": ["instance"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "During the test, I first got the error \"No subnets found for the default VPC 'vpc-4f2acc28'. ", "keywords": ["test"]}, {"source": "Body", "text": "This is the template I am using(just small changes I mentioned above made on the original example template):", "keywords": ["change"]}]}