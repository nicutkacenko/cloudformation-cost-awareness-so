{"Id": "69822341", "PostTypeId": "1", "AcceptedAnswerId": "69823423", "CreationDate": "2021-11-03T09:18:52.223", "Score": "1", "ViewCount": "968", "Body": "<p>I have deployed 2 services using aws CDK typescript. One of the services by default got listed in Tags of AWS Cost Explorer service:</p>\n<p><a href=\"https://i.stack.imgur.com/t4G9H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t4G9H.png\" alt=\"enter image description here\" /></a></p>\n<p>So I tried to add tag to another service :</p>\n<pre><code>export class CdkStack extends cdk.Stack {\n    constructor(scope: cdk.Construct, id: string, props: scStackProps&lt;ICdkStackProps&gt;) {\n        super(scope, id, props);\n\n        const {config, context} = props;\n        const vpc = ec2.Vpc.fromLookup(this, &quot;vpc&quot;, {\n            vpcName: &quot;baseInfrastructure/vpc&quot;,\n        });\n        cdk.Tags.of(this).add(&quot;aws:cloudformation:stack-name&quot;, `${config.container.name}`);\n</code></pre>\n<p>But got the error in the Cloudformation stack:</p>\n<pre><code>UPDATE_FAILED   aws: prefixed tag key names are not allowed for external use.\n</code></pre>\n<p>So please let me know where I am wrong and how to fix this issue so that I can see my both services in AWS Cost Explorer tags.</p>\n", "OwnerUserId": "3425138", "LastActivityDate": "2021-11-03T10:40:55.330", "Title": "aws: prefixed tag key names are not allowed for external use", "Tags": "|typescript|amazon-web-services|aws-cloudformation|aws-cdk|", "AnswerCount": "1", "CommentCount": "0", "FavoriteCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "257186006", "PostHistoryTypeId": "2", "PostId": "69822341", "RevisionGUID": "f5b0c6f8-d12b-4068-9a84-a2b316738e1c", "CreationDate": "2021-11-03T09:18:52.223", "UserId": "3425138", "Text": "I have deployed 2 services using aws CDK typescript. One of the services by default got listed in Tags of AWS Cost Explorer service:\r\n\r\n[![enter image description here][1]][1] \r\n\r\nSo I tried to add tag to another service :\r\n\r\n    export class CdkStack extends cdk.Stack {\r\n        constructor(scope: cdk.Construct, id: string, props: scStackProps<ICdkStackProps>) {\r\n            super(scope, id, props);\r\n    \r\n            const {config, context} = props;\r\n            const vpc = ec2.Vpc.fromLookup(this, \"vpc\", {\r\n                vpcName: \"baseInfrastructure/vpc\",\r\n            });\r\n            cdk.Tags.of(this).add(\"aws:cloudformation:stack-name\", `${config.container.name}`);\r\n\r\nBut got the error in the Cloudformation stack:\r\n\r\n    UPDATE_FAILED aws: prefixed tag key names are not allowed for external use.\r\n\r\nSo please let me know where I am wrong and how to fix this issue so that I can see my both services in AWS Cost Explorer tags.\r\n\r\n  [1]: https://i.stack.imgur.com/t4G9H.png", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "One of the services by default got listed in Tags of AWS Cost Explorer service: [![enter image description here][1]][1] ", "keywords": ["cost"]}, {"source": "Text", "text": "So please let me know where I am wrong and how to fix this issue so that I can see my both services in AWS Cost Explorer tags. [1]: https://i.stack.imgur.com/t4G9H.png", "keywords": ["cost"]}]}, {"Id": "257186008", "PostHistoryTypeId": "1", "PostId": "69822341", "RevisionGUID": "f5b0c6f8-d12b-4068-9a84-a2b316738e1c", "CreationDate": "2021-11-03T09:18:52.223", "UserId": "3425138", "Text": "aws: prefixed tag key names are not allowed for external use", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "257186009", "PostHistoryTypeId": "3", "PostId": "69822341", "RevisionGUID": "f5b0c6f8-d12b-4068-9a84-a2b316738e1c", "CreationDate": "2021-11-03T09:18:52.223", "UserId": "3425138", "Text": "|typescript|amazon-web-services|aws-cloudformation|aws-cdk|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "69823423", "PostTypeId": "2", "ParentId": "69822341", "CreationDate": "2021-11-03T10:40:55.330", "Score": "2", "Body": "<p>As the message says, you cannot create <code>aws:</code>-prefixed tags, only AWS can manage those.</p>\n<p><a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html</a></p>\n<p>These tags are created automatically and propagated to all supported resources. Create your own custom tags if that is not sufficient.</p>\n", "OwnerUserId": "10418515", "LastActivityDate": "2021-11-03T10:40:55.330", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "123521458", "PostId": "69823423", "Score": "0", "Text": "I have created my own custom tags but those are not reflected in cost explorer, so I am curious why this automatically created tag is missing for me that also for only for 1 service aut of 2 so is there any way to troubleshoot this automatically created tag why it's missing", "CreationDate": "2021-11-08T01:41:40.607", "UserId": "3425138", "filtered-sentences": [{"source": "Text", "text": "I have created my own custom tags but those are not reflected in cost explorer, so I am curious why this automatically created tag is missing for me that also for only for 1 service aut of 2 so is there any way to troubleshoot this automatically created tag why it's missing", "keywords": ["cost"]}]}], "history": [{"Id": "257191845", "PostHistoryTypeId": "2", "PostId": "69823423", "RevisionGUID": "c5a7abb1-e663-4846-86aa-d4dbb31bc435", "CreationDate": "2021-11-03T10:40:55.330", "UserId": "10418515", "Text": "As the message says, you cannot create `aws:`-prefixed tags, only AWS can manage those.\r\n\r\nhttps://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html\r\n\r\nThese tags are created automatically and propagated to all supported resources. Create your own custom tags if that is not sufficient.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": false, "filtered-sentences": [{"source": "Body", "text": "One of the services by default got listed in Tags of AWS Cost Explorer service: So I tried to add tag to another service : But got the error in the Cloudformation stack: So please let me know where I am wrong and how to fix this issue so that I can see my both services in AWS Cost Explorer tags.", "keywords": ["cost"]}]}