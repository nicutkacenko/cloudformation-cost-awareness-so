{"Id": "67732099", "PostTypeId": "1", "AcceptedAnswerId": "67732142", "CreationDate": "2021-05-28T02:26:11.440", "Score": "1", "ViewCount": "297", "Body": "<p>I am working on AWS lambda and deployed it with cloudformation. Recently I read some cf template which use lambda as the target for <code>ApplicationAutoScaling</code> like below configuration.</p>\n<p>Based on my understanding, lambda is scaled automatically and I can configure provisioned concurrency or reserved concurrency if I want to control the concurrency of lambda. But what does it mean if I put lambda as the target of <code>ApplicationAutoScaling</code>.</p>\n<pre><code>PCTargetHello:\n    Type: AWS::ApplicationAutoScaling::ScalableTarget\n    DependsOn: HelloProvConcLambdaAlias\n    Properties: \n      MaxCapacity: 10\n      MinCapacity: 1\n      ResourceId: function:${self:service}-${self:provider.stage}-hello:provisioned\n      RoleARN: arn:aws:iam::${AWS::AccountId}:role/aws-service-role/lambda.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_LambdaConcurrency\n      ScalableDimension: lambda:function:ProvisionedConcurrency\n      ServiceNamespace: lambda\n</code></pre>\n", "OwnerUserId": "5421539", "LastActivityDate": "2021-05-28T02:31:45.897", "Title": "How does ApplicationAutoScaling work for lambda?", "Tags": "|amazon-web-services|aws-lambda|aws-cloudformation|", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "247422084", "PostHistoryTypeId": "2", "PostId": "67732099", "RevisionGUID": "b844e2fd-de3d-4cb1-83e3-52aac481ce28", "CreationDate": "2021-05-28T02:26:11.440", "UserId": "5421539", "Text": "I am working on AWS lambda and deployed it with cloudformation. Recently I read some cf template which use lambda as the target for `ApplicationAutoScaling` like below configuration. \r\n\r\nBased on my understanding, lambda is scaled automatically and I can configure provisioned concurrency or reserved concurrency if I want to control the concurrency of lambda. But what does it mean if I put lambda as the target of `ApplicationAutoScaling`.\r\n\r\n\r\n```\r\nPCTargetHello:\r\n    Type: AWS::ApplicationAutoScaling::ScalableTarget\r\n    DependsOn: HelloProvConcLambdaAlias\r\n    Properties: \r\n      MaxCapacity: 10\r\n      MinCapacity: 1\r\n      ResourceId: function:${self:service}-${self:provider.stage}-hello:provisioned\r\n      RoleARN: arn:aws:iam::${AWS::AccountId}:role/aws-service-role/lambda.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_LambdaConcurrency\r\n      ScalableDimension: lambda:function:ProvisionedConcurrency\r\n      ServiceNamespace: lambda\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "``` PCTargetHello: Type: AWS::ApplicationAutoScaling::ScalableTarget DependsOn: HelloProvConcLambdaAlias Properties: MaxCapacity: 10 MinCapacity: 1 ResourceId: function:${self:service}-${self:provider.stage}-hello:provisioned RoleARN: arn:aws:iam::${AWS::AccountId}:role/aws-service-role/lambda.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_LambdaConcurrency ScalableDimension: lambda:function:ProvisionedConcurrency ServiceNamespace: lambda ```", "keywords": ["provider"]}]}, {"Id": "247422085", "PostHistoryTypeId": "1", "PostId": "67732099", "RevisionGUID": "b844e2fd-de3d-4cb1-83e3-52aac481ce28", "CreationDate": "2021-05-28T02:26:11.440", "UserId": "5421539", "Text": "How does ApplicationAutoScaling work for lambda?", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "247422086", "PostHistoryTypeId": "3", "PostId": "67732099", "RevisionGUID": "b844e2fd-de3d-4cb1-83e3-52aac481ce28", "CreationDate": "2021-05-28T02:26:11.440", "UserId": "5421539", "Text": "|amazon-web-services|aws-lambda|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "67732142", "PostTypeId": "2", "ParentId": "67732099", "CreationDate": "2021-05-28T02:31:45.897", "Score": "1", "Body": "<p>This is for managing your <strong>provisioned concurrency</strong> (PC). If you do as you wrote:</p>\n<blockquote>\n<p>I can configure provisioned concurrency or reserved concurrency if I want to control the concurrency of lambda.</p>\n</blockquote>\n<p>then you have to adjust PC manually each time you think you will require more or less PC. With <code>ApplicationAutoScaling</code> you can <strong>automate management of PC</strong>. So you can setup a scheduled policy to reduce your PC, lets at, at night or weekends, or automatically increase it based on your lambda function usage.</p>\n", "OwnerUserId": "248823", "LastActivityDate": "2021-05-28T02:31:45.897", "CommentCount": "6", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "119720926", "PostId": "67732142", "Score": "0", "Text": "Is there a way for me to make the PC to be 0 during night by using auto scale?", "CreationDate": "2021-05-28T03:12:50.447", "UserId": "5421539", "filtered-sentences": []}, {"Id": "119720967", "PostId": "67732142", "Score": "0", "Text": "@JoeyYiZhao I don't see a reason why not. AWS [docs](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-autoscaling.html#scenario-app-as-template-examples) have examples of scheduled actions for lambda.", "CreationDate": "2021-05-28T03:16:58.513", "UserId": "248823", "filtered-sentences": []}, {"Id": "119721006", "PostId": "67732142", "Score": "0", "Text": "but 0 is an invalid value for PC", "CreationDate": "2021-05-28T03:20:53.657", "UserId": "5421539", "filtered-sentences": []}, {"Id": "119721026", "PostId": "67732142", "Score": "0", "Text": "@JoeyYiZhao Then, it seems you can't do this.", "CreationDate": "2021-05-28T03:22:09.717", "UserId": "248823", "filtered-sentences": []}, {"Id": "119723052", "PostId": "67732142", "Score": "0", "Text": "@Jens Could you please clarify? You always pay for provisioned capacity, even if your function is not running.", "CreationDate": "2021-05-28T06:13:59.847", "UserId": "248823", "filtered-sentences": [{"source": "Text", "text": "You always pay for provisioned capacity, even if your function is not running.", "keywords": ["pay"]}]}, {"Id": "119724212", "PostId": "67732142", "Score": "0", "Text": "@Marcin That's actually true. Totally forgot about it. My bad.", "CreationDate": "2021-05-28T07:14:26.077", "UserId": "190823", "filtered-sentences": []}], "history": [{"Id": "247422257", "PostHistoryTypeId": "2", "PostId": "67732142", "RevisionGUID": "8ba1b6dd-fef1-4c04-b221-6c1fa2a909e3", "CreationDate": "2021-05-28T02:31:45.897", "UserId": "248823", "Text": "This is for managing your **provisioned concurrency** (PC). If you do as you wrote:\r\n\r\n> I can configure provisioned concurrency or reserved concurrency if I want to control the concurrency of lambda. \r\n\r\nthen you have to adjust PC manually each time you think you will require more or less PC. With `ApplicationAutoScaling` you can **automate management of PC**. So you can setup a scheduled policy to reduce your PC, lets at, at night or weekends, or automatically increase it based on your lambda function usage. ", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "So you can setup a scheduled policy to reduce your PC, lets at, at night or weekends, or automatically increase it based on your lambda function usage.", "keywords": ["policy"]}]}], "filtered-sentences": [{"source": "Body", "text": "So you can setup a scheduled policy to reduce your PC, lets at, at night or weekends, or automatically increase it based on your lambda function usage.", "keywords": ["policy"]}]}], "contains-topic": true, "filtered-sentences": []}