{"Id": "62899567", "PostTypeId": "1", "CreationDate": "2020-07-14T16:20:58.227", "Score": "0", "ViewCount": "815", "Body": "<p>Im looking for a solution to create s3 glacier vault using cloudformation template, is it possible?</p>\n<p>i know that we can create using any one of the methods which are mentioned here <a href=\"https://docs.aws.amazon.com/amazonglacier/latest/dev/creating-vaults.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/amazonglacier/latest/dev/creating-vaults.html</a>, but i specifically want to create through cloudformation template so that i can use that template for other accounts also.</p>\n", "OwnerUserId": "8019698", "LastActivityDate": "2020-07-15T06:59:07.757", "Title": "Creating a Vault in Amazon S3 Glacier using the CloudFormation template", "Tags": "|amazon-web-services|aws-cloudformation|amazon-glacier|", "AnswerCount": "2", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "226607546", "PostHistoryTypeId": "2", "PostId": "62899567", "RevisionGUID": "983e067a-286e-4a76-b007-55cf7c6d1874", "CreationDate": "2020-07-14T16:20:58.227", "UserId": "8019698", "Text": "Im looking for a solution to create s3 glacier vault using cloudformation template, is it possible?\r\n\r\ni know that we can create using any one of the methods which are mentioned here <https://docs.aws.amazon.com/amazonglacier/latest/dev/creating-vaults.html>, but i specifically want to create through cloudformation template so that i can use that template for other accounts also.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "226607547", "PostHistoryTypeId": "1", "PostId": "62899567", "RevisionGUID": "983e067a-286e-4a76-b007-55cf7c6d1874", "CreationDate": "2020-07-14T16:20:58.227", "UserId": "8019698", "Text": "Creating a Vault in Amazon S3 Glacier using the CloudFormation template", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "226607548", "PostHistoryTypeId": "3", "PostId": "62899567", "RevisionGUID": "983e067a-286e-4a76-b007-55cf7c6d1874", "CreationDate": "2020-07-14T16:20:58.227", "UserId": "8019698", "Text": "|amazon-web-services|aws-cloudformation|amazon-glacier|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "62900030", "PostTypeId": "2", "ParentId": "62899567", "CreationDate": "2020-07-14T16:46:53.613", "Score": "1", "Body": "<p>When you define your S3 bucket in CloudFormation, you can also setup LifeCycle rules. LifeCycle rules allow you to transition your bucket contents into a different storage tier (such as Glacier) after some number of days.</p>\n<p>Take a look at the <a href=\"https://gist.github.com/austoonz/b9779a3a77b2ca658c7ebac9416671eb\" rel=\"nofollow noreferrer\">S3LogsBucket on this github gist</a>  - the bit your interested in is...</p>\n<pre><code>    LifecycleConfiguration:\n        Rules:\n          -            \n            Status: Enabled\n            Transitions:\n              -\n                StorageClass: GLACIER\n                TransitionInDays: 30\n</code></pre>\n<p>Above LifeCycle rule will change the storage class any object over 30 days to Glacier. You could add several rules so you could transition it to Infrequent access after X days, then onto Glacier after Y days as required etc.</p>\n<p>See the docs on <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket-lifecycleconfig-rule.html\" rel=\"nofollow noreferrer\">S3 CloudFormation LifeCycles</a></p>\n", "OwnerUserId": "4438168", "LastActivityDate": "2020-07-14T16:46:53.613", "CommentCount": "3", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "111246882", "PostId": "62900030", "Score": "1", "Text": "thanks @MisterSmith but this will move objects into vault owned by s3 not glacier right?\ni dont want to create a lifecycle policy, what i need just a template that will create a vault in s3 glacier service.", "CreationDate": "2020-07-15T06:21:20.360", "UserId": "8019698", "filtered-sentences": [{"source": "Text", "text": "i dont want to create a lifecycle policy, what i need just a template that will create a vault in s3 glacier service.", "keywords": ["policy"]}]}, {"Id": "111247080", "PostId": "62900030", "Score": "0", "Text": "basically i need a template that include all these steps <https://docs.aws.amazon.com/amazonglacier/latest/dev/getting-started-create-vault.html>", "CreationDate": "2020-07-15T06:29:29.000", "UserId": "8019698", "filtered-sentences": []}, {"Id": "118623482", "PostId": "62900030", "Score": "0", "Text": "Am I right in thinking that the objects will still be accessed from the original S3 bucket and will retain the original object key, however they are just stored using the glacier storage class, cheaper etc?", "CreationDate": "2021-04-15T14:32:51.560", "UserId": "6236042", "filtered-sentences": [{"source": "Text", "text": "Am I right in thinking that the objects will still be accessed from the original S3 bucket and will retain the original object key, however they are just stored using the glacier storage class, cheaper etc?", "keywords": ["cheap", "storage"]}]}], "history": [{"Id": "226609423", "PostHistoryTypeId": "2", "PostId": "62900030", "RevisionGUID": "65b3d9da-3a4d-4789-8b0b-a20af49525d3", "CreationDate": "2020-07-14T16:46:53.613", "UserId": "4438168", "Text": "When you define your S3 bucket in CloudFormation, you can also setup LifeCycle rules. LifeCycle rules allow you to transition your bucket contents into a different storage tier (such as Glacier) after some number of days.\r\n\r\nTake a look at the [S3LogsBucket on this github gist][1]  - the bit your interested in is...\r\n\r\n```\r\n    LifecycleConfiguration:\r\n        Rules:\r\n          -            \r\n            Status: Enabled\r\n            Transitions:\r\n              -\r\n                StorageClass: GLACIER\r\n                TransitionInDays: 30\r\n```\r\n\r\nAbove LifeCycle rule will change the storage class any object over 30 days to Glacier. You could add several rules so you could transition it to Infrequent access after X days, then onto Glacier after Y days as required etc.\r\n\r\nSee the docs on [S3 CloudFormation LifeCycles][2]\r\n\r\n\r\n  [1]: https://gist.github.com/austoonz/b9779a3a77b2ca658c7ebac9416671eb\r\n  [2]: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket-lifecycleconfig-rule.html", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "LifeCycle rules allow you to transition your bucket contents into a different storage tier (such as Glacier) after some number of days. ", "keywords": ["storage"]}, {"source": "Text", "text": "Above LifeCycle rule will change the storage class any object over 30 days to Glacier. ", "keywords": ["storage", "change"]}]}], "filtered-sentences": [{"source": "Body", "text": "LifeCycle rules allow you to transition your bucket contents into a different storage tier (such as Glacier) after some number of days. ", "keywords": ["storage"]}, {"source": "Body", "text": "Above LifeCycle rule will change the storage class any object over 30 days to Glacier. ", "keywords": ["storage", "change"]}]}, {"Id": "62909211", "PostTypeId": "2", "ParentId": "62899567", "CreationDate": "2020-07-15T06:59:07.757", "Score": "1", "Body": "<p>There are two ways to use Amazon Glacier:</p>\n<p><strong>1. Direct to Glacier</strong></p>\n<p>This involves creating a <strong>Vault</strong> and then using <strong>Jobs</strong> to upload/download objects and obtain inventories. Quite frankly, this is a very slow process that is best done via automated tools that know how to use Glacier.</p>\n<p><strong>2. Use Glacier via Amazon S3</strong></p>\n<p>Amazon S3 has <code>Glacier</code> and <code>Glacier Deep Archive</code> storage classes. These allow storage at Glacier prices, but with the friendliness of using Amazon S3. (In fact, the Glacier Deep Archive storage class in S3 is cheaper than Glacier itself!)</p>\n<p>I <em>always</em> recommend using Glacier via S3 rather than using Glacier directly. It is <strong>more friendly, cheaper</strong> and makes it easy to move data between &quot;instant access&quot; and archive storage classes. When using Glacier via S3, Vaults are not required.</p>\n", "OwnerUserId": "174777", "LastActivityDate": "2020-07-15T06:59:07.757", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "226648089", "PostHistoryTypeId": "2", "PostId": "62909211", "RevisionGUID": "176d0abe-4b77-4189-b6ab-d9a6587c0d63", "CreationDate": "2020-07-15T06:59:07.757", "UserId": "174777", "Text": "There are two ways to use Amazon Glacier:\r\n\r\n**1. Direct to Glacier**\r\n\r\nThis involves creating a **Vault** and then using **Jobs** to upload/download objects and obtain inventories. Quite frankly, this is a very slow process that is best done via automated tools that know how to use Glacier.\r\n\r\n**2. Use Glacier via Amazon S3**\r\n\r\nAmazon S3 has `Glacier` and `Glacier Deep Archive` storage classes. These allow storage at Glacier prices, but with the friendliness of using Amazon S3. (In fact, the Glacier Deep Archive storage class in S3 is cheaper than Glacier itself!)\r\n\r\nI _always_ recommend using Glacier via S3 rather than using Glacier directly. It is **more friendly, cheaper** and makes it easy to move data between \"instant access\" and archive storage classes. When using Glacier via S3, Vaults are not required.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Use Glacier via Amazon S3** Amazon S3 has `Glacier` and `Glacier Deep Archive` storage classes. ", "keywords": ["storage"]}, {"source": "Text", "text": "These allow storage at Glacier prices, but with the friendliness of using Amazon S3. ", "keywords": ["storage"]}, {"source": "Text", "text": "(In fact, the Glacier Deep Archive storage class in S3 is cheaper than Glacier itself!) ", "keywords": ["cheap", "storage"]}, {"source": "Text", "text": "It is **more friendly, cheaper** and makes it easy to move data between \"instant access\" and archive storage classes. ", "keywords": ["cheap", "storage"]}]}], "filtered-sentences": [{"source": "Body", "text": "2. Use Glacier via Amazon S3 Amazon S3 has Glacier and Glacier Deep Archive storage classes. ", "keywords": ["storage"]}, {"source": "Body", "text": "These allow storage at Glacier prices, but with the friendliness of using Amazon S3. ", "keywords": ["storage"]}, {"source": "Body", "text": "(In fact, the Glacier Deep Archive storage class in S3 is cheaper than Glacier itself!) ", "keywords": ["cheap", "storage"]}, {"source": "Body", "text": "It is more friendly, cheaper and makes it easy to move data between \"instant access\" and archive storage classes. ", "keywords": ["cheap", "storage"]}]}], "contains-topic": true, "filtered-sentences": []}