{"Id": "66563891", "PostTypeId": "1", "CreationDate": "2021-03-10T11:31:17.587", "Score": "1", "ViewCount": "970", "Body": "<p>CF template has a major dependency on AWS cloud for testing, to test CF we launches the CF stack, which results in high cloud cost.</p>\n<p>I am looking for a solution which can optimize the run/test for CF template. Can someone please provide a solution to run a cloudformation template and test it without actually launching the resources.</p>\n", "OwnerUserId": "9760320", "LastActivityDate": "2021-03-17T17:43:44.457", "Title": "Test Cloudformation templates with 0 cost", "Tags": "|amazon-web-services|aws-cloudformation|amazon-eks|", "AnswerCount": "1", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "117670050", "PostId": "66563891", "Score": "0", "Text": "Test what exactly please - Check the costs first, or functionality of what is to be deployed?", "CreationDate": "2021-03-10T11:39:21.427", "UserId": "2062691", "filtered-sentences": [{"source": "Text", "text": "Test what exactly please - Check the costs first, or functionality of what is to be deployed?", "keywords": ["test"]}]}, {"Id": "117675264", "PostId": "66563891", "Score": "0", "Text": "check out [`cfn-lint`](https://github.com/aws-cloudformation/cfn-python-lint/)", "CreationDate": "2021-03-10T14:49:06.207", "UserId": "4122849", "filtered-sentences": []}], "history": [{"Id": "242382943", "PostHistoryTypeId": "2", "PostId": "66563891", "RevisionGUID": "509eb2a9-940d-4752-8de2-171d6614cdf2", "CreationDate": "2021-03-10T11:31:17.587", "UserId": "9760320", "Text": "CF template has a major dependency on AWS cloud for testing, to test CF we launches the CF stack, which results in high cloud cost.\r\n\r\nI am looking for a solution which can optimize the run/test for CF template. Can someone please provide a solution to run a cloudformation template and test it without actually launching the resources. ", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "CF template has a major dependency on AWS cloud for testing, to test CF we launches the CF stack, which results in high cloud cost. ", "keywords": ["cost", "test"]}, {"source": "Text", "text": "I am looking for a solution which can optimize the run/test for CF template. ", "keywords": ["test"]}, {"source": "Text", "text": "Can someone please provide a solution to run a cloudformation template and test it without actually launching the resources.", "keywords": ["test"]}]}, {"Id": "242382944", "PostHistoryTypeId": "1", "PostId": "66563891", "RevisionGUID": "509eb2a9-940d-4752-8de2-171d6614cdf2", "CreationDate": "2021-03-10T11:31:17.587", "UserId": "9760320", "Text": "Test Cloudformation templates with 0 cost", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Test Cloudformation templates with 0 cost", "keywords": ["cost", "test"]}]}, {"Id": "242382945", "PostHistoryTypeId": "3", "PostId": "66563891", "RevisionGUID": "509eb2a9-940d-4752-8de2-171d6614cdf2", "CreationDate": "2021-03-10T11:31:17.587", "UserId": "9760320", "Text": "|amazon-web-services|aws-cloudformation|amazon-eks|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "66623847", "PostTypeId": "2", "ParentId": "66563891", "CreationDate": "2021-03-14T11:14:35.573", "Score": "1", "Body": "<p>There are a few different answers to this question depending on what cost and testing you refer to.</p>\n<p><strong>CloudFormation Costs</strong></p>\n<p>As stated in <a href=\"https://aws.amazon.com/cloudformation/pricing/\" rel=\"nofollow noreferrer\">AWS CloudFormation Pricing</a>, CloudFormation in itself is free, but</p>\n<blockquote>\n<p>you pay for AWS resources (such as Amazon EC2 instances, Elastic Load Balancing load balancers, etc.) created using AWS CloudFormation, the same as if you had created them manually</p>\n</blockquote>\n<p>Different services have different price models, for example for Lambda you pay per use, EC2 for each running instance, S3 for storage as well as &quot;data out&quot;, IAM roles are free etc, but you have to look up the actual cost for each specific service. With CloudFormation, you have the option to deploy your stack, execute the integration tests that you have developed and then delete your stack afterwards so that you only pay for the period the stack is running, thus reducing the cost. One disadvantage with approach is that there may be a significant delay when you deploy and delete the stack. How long this latency will be depends yet again on what kind of services that you have configured in your stack.</p>\n<p><strong>Deploy Resources Locally</strong></p>\n<p>If you do not want to use actual AWS resources, you may find <a href=\"https://localstack.cloud\" rel=\"nofollow noreferrer\">LocalStack</a> interesting. It allows you to use &quot;cloud&quot; resources in a local container instead. This may or may not be feasible for you since not all AWS resources are supported.</p>\n<p><strong>Static CloudFormation Validation</strong></p>\n<p>For static validation, i.e. making sure that the CloudFormation has the correct YAML or JSON syntax, references are correct etc there are (at least) two tools. First, there is the <a href=\"https://docs.aws.amazon.com/cli/latest/reference/cloudformation/validate-template.html\" rel=\"nofollow noreferrer\">aws cloudformation validate-template</a> command available as part of the <a href=\"https://docs.aws.amazon.com/cli/\" rel=\"nofollow noreferrer\">AWS CLI</a>. Additionally, there is the <a href=\"https://github.com/aws-cloudformation/cfn-python-lint/#aws-cloudformation-linter\" rel=\"nofollow noreferrer\">cfn-lint</a> that you can use. I find them to be a good complement and decrease the turnaround time when developing CloudFormation templates as they catch typos, configuration errors similar types of problem before attempting to deploy all resources, but since there is no resources created you will not discover problems such as missing IAM permissions, malfunctioning application code, etc until you deploy the real thing.</p>\n", "OwnerUserId": "303598", "LastEditorUserId": "303598", "LastEditDate": "2021-03-17T17:43:44.457", "LastActivityDate": "2021-03-17T17:43:44.457", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "242644453", "PostHistoryTypeId": "2", "PostId": "66623847", "RevisionGUID": "5369e2f3-a47c-49b7-9227-26b4752257a6", "CreationDate": "2021-03-14T11:14:35.573", "UserId": "303598", "Text": "There are many different answers to this question depending on what cost and testing you refer to.\r\n\r\n**CloudFormation Costs**\r\n\r\nAs stated in [AWS CloudFormation Pricing][1], CloudFormation in itself is free, but \r\n\r\n> you pay for AWS resources (such as Amazon EC2 instances, Elastic Load Balancing load balancers, etc.) created using AWS CloudFormation, the same as if you had created them manually\r\n\r\nDifferent services have different price models, for example for Lambda you pay per use, EC2 for each running instance, S3 for storage as well as \"data out\", IAM roles are free etc, but you have to look up With CloudFormation, you have the option to deploy your stack, execute the integration tests that you have developed and then delete your stack afterwards so that you only pay for the period the stack is running. That said, depending on the type of resources that you use, it may take a while to deploy and delete the stack.\r\n\r\n\r\n**Deploy Resources Locally**\r\n\r\nIf you do not want to use actual AWS resources, you may find [LocalStack][2] interesting. It allows you to use \"cloud\" resources in a local container instead. This may or may not be feasible for you since not all AWS resources are supported.\r\n\r\n\r\n\r\n**Static CloudFormation Validation**\r\n\r\nFor static validation, i.e. making sure that the CloudFormation has the correct YAML or JSON syntax, references are correct etc there are (at least) two tools. First, there is the [aws cloudformation validate-template][3] command available as part of the [AWS CLI][4]. Additionally, there is the [cfn-lint][5] that you can use. I find them to be a good complement and decrease the turnaround time when developing CloudFormation templates as they catch typos, configuration errors similar types of problem before attempting to deploy all resources, but since there is no resources created you will not discover problems such as missing IAM permissions, malfunctioning application code, etc until you deploy the real thing.\r\n\r\n\r\n  [1]: https://aws.amazon.com/cloudformation/pricing/\r\n  [2]: https://localstack.cloud\r\n  [3]: https://docs.aws.amazon.com/cli/latest/reference/cloudformation/validate-template.html\r\n  [4]: https://docs.aws.amazon.com/cli/\r\n  [5]: https://github.com/aws-cloudformation/cfn-python-lint/#aws-cloudformation-linter", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "There are many different answers to this question depending on what cost and testing you refer to. **CloudFormation Costs** As stated in [AWS CloudFormation Pricing][1], CloudFormation in itself is free, but > you pay for AWS resources (such as Amazon EC2 instances, Elastic Load Balancing load balancers, etc.) created using AWS CloudFormation, the same as if you had created them manually Different services have different price models, for example for Lambda you pay per use, EC2 for each running instance, S3 for storage as well as \"data out\", IAM roles are free etc, but you have to look up With CloudFormation, you have the option to deploy your stack, execute the integration tests that you have developed and then delete your stack afterwards so that you only pay for the period the stack is running. ", "keywords": ["cost", "pay", "instance", "storage", "test"]}]}, {"Id": "242652966", "PostHistoryTypeId": "5", "PostId": "66623847", "RevisionGUID": "b5361ade-a844-4021-b4b6-8763f7ee1d04", "CreationDate": "2021-03-14T14:53:21.747", "UserId": "303598", "Comment": "added 1 character in body", "Text": "There are a few different answers to this question depending on what cost and testing you refer to.\r\n\r\n**CloudFormation Costs**\r\n\r\nAs stated in [AWS CloudFormation Pricing][1], CloudFormation in itself is free, but \r\n\r\n> you pay for AWS resources (such as Amazon EC2 instances, Elastic Load Balancing load balancers, etc.) created using AWS CloudFormation, the same as if you had created them manually\r\n\r\nDifferent services have different price models, for example for Lambda you pay per use, EC2 for each running instance, S3 for storage as well as \"data out\", IAM roles are free etc, but you have to look up With CloudFormation, you have the option to deploy your stack, execute the integration tests that you have developed and then delete your stack afterwards so that you only pay for the period the stack is running. That said, depending on the type of resources that you use, it may take a while to deploy and delete the stack.\r\n\r\n\r\n**Deploy Resources Locally**\r\n\r\nIf you do not want to use actual AWS resources, you may find [LocalStack][2] interesting. It allows you to use \"cloud\" resources in a local container instead. This may or may not be feasible for you since not all AWS resources are supported.\r\n\r\n\r\n\r\n**Static CloudFormation Validation**\r\n\r\nFor static validation, i.e. making sure that the CloudFormation has the correct YAML or JSON syntax, references are correct etc there are (at least) two tools. First, there is the [aws cloudformation validate-template][3] command available as part of the [AWS CLI][4]. Additionally, there is the [cfn-lint][5] that you can use. I find them to be a good complement and decrease the turnaround time when developing CloudFormation templates as they catch typos, configuration errors similar types of problem before attempting to deploy all resources, but since there is no resources created you will not discover problems such as missing IAM permissions, malfunctioning application code, etc until you deploy the real thing.\r\n\r\n\r\n  [1]: https://aws.amazon.com/cloudformation/pricing/\r\n  [2]: https://localstack.cloud\r\n  [3]: https://docs.aws.amazon.com/cli/latest/reference/cloudformation/validate-template.html\r\n  [4]: https://docs.aws.amazon.com/cli/\r\n  [5]: https://github.com/aws-cloudformation/cfn-python-lint/#aws-cloudformation-linter", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "There are a few different answers to this question depending on what cost and testing you refer to. **CloudFormation Costs** As stated in [AWS CloudFormation Pricing][1], CloudFormation in itself is free, but > you pay for AWS resources (such as Amazon EC2 instances, Elastic Load Balancing load balancers, etc.) created using AWS CloudFormation, the same as if you had created them manually Different services have different price models, for example for Lambda you pay per use, EC2 for each running instance, S3 for storage as well as \"data out\", IAM roles are free etc, but you have to look up With CloudFormation, you have the option to deploy your stack, execute the integration tests that you have developed and then delete your stack afterwards so that you only pay for the period the stack is running. ", "keywords": ["cost", "pay", "instance", "storage", "test"]}]}, {"Id": "242873581", "PostHistoryTypeId": "5", "PostId": "66623847", "RevisionGUID": "639d197c-5dd7-44da-99fa-418aec42523a", "CreationDate": "2021-03-17T17:43:44.457", "UserId": "303598", "Comment": "added 178 characters in body", "Text": "There are a few different answers to this question depending on what cost and testing you refer to.\r\n\r\n**CloudFormation Costs**\r\n\r\nAs stated in [AWS CloudFormation Pricing][1], CloudFormation in itself is free, but \r\n\r\n> you pay for AWS resources (such as Amazon EC2 instances, Elastic Load Balancing load balancers, etc.) created using AWS CloudFormation, the same as if you had created them manually\r\n\r\nDifferent services have different price models, for example for Lambda you pay per use, EC2 for each running instance, S3 for storage as well as \"data out\", IAM roles are free etc, but you have to look up the actual cost for each specific service. With CloudFormation, you have the option to deploy your stack, execute the integration tests that you have developed and then delete your stack afterwards so that you only pay for the period the stack is running, thus reducing the cost. One disadvantage with approach is that there may be a significant delay when you deploy and delete the stack. How long this latency will be depends yet again on what kind of services that you have configured in your stack.\r\n\r\n\r\n**Deploy Resources Locally**\r\n\r\nIf you do not want to use actual AWS resources, you may find [LocalStack][2] interesting. It allows you to use \"cloud\" resources in a local container instead. This may or may not be feasible for you since not all AWS resources are supported.\r\n\r\n\r\n\r\n**Static CloudFormation Validation**\r\n\r\nFor static validation, i.e. making sure that the CloudFormation has the correct YAML or JSON syntax, references are correct etc there are (at least) two tools. First, there is the [aws cloudformation validate-template][3] command available as part of the [AWS CLI][4]. Additionally, there is the [cfn-lint][5] that you can use. I find them to be a good complement and decrease the turnaround time when developing CloudFormation templates as they catch typos, configuration errors similar types of problem before attempting to deploy all resources, but since there is no resources created you will not discover problems such as missing IAM permissions, malfunctioning application code, etc until you deploy the real thing.\r\n\r\n\r\n  [1]: https://aws.amazon.com/cloudformation/pricing/\r\n  [2]: https://localstack.cloud\r\n  [3]: https://docs.aws.amazon.com/cli/latest/reference/cloudformation/validate-template.html\r\n  [4]: https://docs.aws.amazon.com/cli/\r\n  [5]: https://github.com/aws-cloudformation/cfn-python-lint/#aws-cloudformation-linter", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "There are a few different answers to this question depending on what cost and testing you refer to. **CloudFormation Costs** As stated in [AWS CloudFormation Pricing][1], CloudFormation in itself is free, but > you pay for AWS resources (such as Amazon EC2 instances, Elastic Load Balancing load balancers, etc.) created using AWS CloudFormation, the same as if you had created them manually Different services have different price models, for example for Lambda you pay per use, EC2 for each running instance, S3 for storage as well as \"data out\", IAM roles are free etc, but you have to look up the actual cost for each specific service. ", "keywords": ["cost", "pay", "instance", "storage", "test"]}, {"source": "Text", "text": "With CloudFormation, you have the option to deploy your stack, execute the integration tests that you have developed and then delete your stack afterwards so that you only pay for the period the stack is running, thus reducing the cost. ", "keywords": ["cost", "pay", "test"]}]}], "filtered-sentences": [{"source": "Body", "text": "There are a few different answers to this question depending on what cost and testing you refer to. ", "keywords": ["cost", "test"]}, {"source": "Body", "text": "As stated in AWS CloudFormation Pricing, CloudFormation in itself is free, but you pay for AWS resources (such as Amazon EC2 instances, Elastic Load Balancing load balancers, etc.) created using AWS CloudFormation, the same as if you had created them manually Different services have different price models, for example for Lambda you pay per use, EC2 for each running instance, S3 for storage as well as \"data out\", IAM roles are free etc, but you have to look up the actual cost for each specific service. ", "keywords": ["cost", "pay", "instance", "storage"]}, {"source": "Body", "text": "With CloudFormation, you have the option to deploy your stack, execute the integration tests that you have developed and then delete your stack afterwards so that you only pay for the period the stack is running, thus reducing the cost. ", "keywords": ["cost", "pay", "test"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Title", "text": "Test Cloudformation templates with 0 cost", "keywords": ["cost", "test"]}, {"source": "Body", "text": "CF template has a major dependency on AWS cloud for testing, to test CF we launches the CF stack, which results in high cloud cost. ", "keywords": ["cost", "test"]}, {"source": "Body", "text": "I am looking for a solution which can optimize the run/test for CF template. ", "keywords": ["test"]}, {"source": "Body", "text": "Can someone please provide a solution to run a cloudformation template and test it without actually launching the resources.", "keywords": ["test"]}]}