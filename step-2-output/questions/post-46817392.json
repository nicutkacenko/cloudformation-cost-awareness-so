{"Id": "46817392", "PostTypeId": "1", "AcceptedAnswerId": "46817876", "CreationDate": "2017-10-18T19:02:25.170", "Score": "1", "ViewCount": "1788", "Body": "<p>What am I trying to achieve : \n Trying to create a VPC using cloud formation template.</p>\n\n<ol>\n<li>What did I observe: When I create a VPC using Cloud-formation template, under the TAGS for every service created[Like subnet, NAT, Internet gateway ] I see</li>\n</ol>\n\n<p>aws:cloudformation:logical-id</p>\n\n<p>aws:cloudformation:stack-id</p>\n\n<p>aws:cloud formation:stack-name</p>\n\n<p>I see the above mentioned under KEY/VALUE,even though my JSON template doesn't include the above lines.They get created automatically. \nAt the same time, when I create a VPC without cloud formation[Using the dashboard], I don't see any of the above mentioned under TAGS.Can somebody explain why these TAGS gets created only with Cloudformation template?</p>\n\n<ol start=\"2\">\n<li>Whenever services like AWS::EC2::VPCGatewayAttachment and  AWS::EC2::Route are used,  which is predominantly used to attach the already created NAT and Internet gateways either to the subnet or VPC, I see a logical ID getting created with it. I see them under \"Preview your changes\"] before the update happens. \nQuestions\n\n<ol>\n<li>After the update, I am not able to refer/see that logical ID anywhere?</li>\n<li>Do logical ID's get created even for services AWS::EC2::VPCGatewayAttachment and  AWS::EC2::Route which just acts as an enabler for the hardware [virtualised hardware]? </li>\n</ol></li>\n</ol>\n", "OwnerDisplayName": "user8797402", "LastEditorUserId": "8022915", "LastEditDate": "2017-10-18T19:08:51.093", "LastActivityDate": "2017-10-18T20:07:55.590", "Title": "Questions on AWS Cloudformation Tags and Logical ID's?", "Tags": "|amazon-web-services|aws-cloudformation|", "AnswerCount": "1", "CommentCount": "0", "FavoriteCount": "0", "ContentLicense": "CC BY-SA 3.0", "history": [{"Id": "158633153", "PostHistoryTypeId": "2", "PostId": "46817392", "RevisionGUID": "2de3c6a6-0e25-4571-8b8c-c87cf6e98e9e", "CreationDate": "2017-10-18T19:02:25.170", "UserDisplayName": "user8797402", "Text": "What am I trying to achieve : \r\n Trying to create a VPC using cloud formation template.\r\n\r\n1. What did I observe: When I create a VPC using Cloud formation template, under the TAGS for every service created[Like subnet, NAT, Internet gateway ] I see \r\naws:cloudformation:logical-id\r\naws:cloudformation:stack-id\r\naws:cloud formation:stack-name\r\n\r\nI see the above mentioned under KEY/VALUE [even though my JSON template doesn't include the above lines].\r\nAt the same time, when I create a VPC without cloud formation[Using the dashboard], I don't see any of the above mentioned under TAGS.Can somebody explain why these TAGS gets created only with Cloudformation template?\r\n\r\n2. Whenever services like AWS::EC2::VPCGatewayAttachment and  AWS::EC2::Route are used,  which is predominantly used to attach the already created NAT and Internet gateways either to the subnet or VPC, I see a logical ID getting created with it. I see them under \"Preview your changes\"] before the update happens. \r\nQuestions\r\n  1. After the update, I am not able to refer/see that logical ID anywhere?\r\n  2. Do logical ID's get created even for services AWS::EC2::VPCGatewayAttachment and  AWS::EC2::Route which just acts as an enabler for the hardware [virtualised hardware]? \r\n \r\n", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": [{"source": "Text", "text": "1. What did I observe: When I create a VPC using Cloud formation template, under the TAGS for every service created[Like subnet, NAT, Internet gateway ] I see aws:cloudformation:logical-id aws:cloudformation:stack-id aws:cloud formation:stack-name I see the above mentioned under KEY/VALUE [even though my JSON template doesn't include the above lines]. ", "keywords": ["nat"]}, {"source": "Text", "text": "2. Whenever services like AWS::EC2::VPCGatewayAttachment and AWS::EC2::Route are used, which is predominantly used to attach the already created NAT and Internet gateways either to the subnet or VPC, I see a logical ID getting created with it. ", "keywords": ["nat"]}, {"source": "Text", "text": "I see them under \"Preview your changes\"] before the update happens. ", "keywords": ["change"]}]}, {"Id": "158633154", "PostHistoryTypeId": "1", "PostId": "46817392", "RevisionGUID": "2de3c6a6-0e25-4571-8b8c-c87cf6e98e9e", "CreationDate": "2017-10-18T19:02:25.170", "UserDisplayName": "user8797402", "Text": "Questions on AWS Cloudformation Tags and Logical ID's?", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}, {"Id": "158633155", "PostHistoryTypeId": "3", "PostId": "46817392", "RevisionGUID": "2de3c6a6-0e25-4571-8b8c-c87cf6e98e9e", "CreationDate": "2017-10-18T19:02:25.170", "UserDisplayName": "user8797402", "Text": "|amazon-web-services|aws-cloudformation|", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}, {"Id": "158633591", "PostHistoryTypeId": "5", "PostId": "46817392", "RevisionGUID": "c48f9d5b-8c31-4db5-a640-e8f7c8fab410", "CreationDate": "2017-10-18T19:08:51.093", "UserId": "8022915", "Comment": "Spacing and added more infornation", "Text": "What am I trying to achieve : \r\n Trying to create a VPC using cloud formation template.\r\n\r\n1. What did I observe: When I create a VPC using Cloud-formation template, under the TAGS for every service created[Like subnet, NAT, Internet gateway ] I see\r\n\r\naws:cloudformation:logical-id\r\n\r\naws:cloudformation:stack-id\r\n\r\naws:cloud formation:stack-name\r\n\r\nI see the above mentioned under KEY/VALUE,even though my JSON template doesn't include the above lines.They get created automatically. \r\nAt the same time, when I create a VPC without cloud formation[Using the dashboard], I don't see any of the above mentioned under TAGS.Can somebody explain why these TAGS gets created only with Cloudformation template?\r\n\r\n2. Whenever services like AWS::EC2::VPCGatewayAttachment and  AWS::EC2::Route are used,  which is predominantly used to attach the already created NAT and Internet gateways either to the subnet or VPC, I see a logical ID getting created with it. I see them under \"Preview your changes\"] before the update happens. \r\nQuestions\r\n  1. After the update, I am not able to refer/see that logical ID anywhere?\r\n  2. Do logical ID's get created even for services AWS::EC2::VPCGatewayAttachment and  AWS::EC2::Route which just acts as an enabler for the hardware [virtualised hardware]? \r\n \r\n", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": [{"source": "Text", "text": "1. What did I observe: When I create a VPC using Cloud-formation template, under the TAGS for every service created[Like subnet, NAT, Internet gateway ] I see aws:cloudformation:logical-id aws:cloudformation:stack-id aws:cloud formation:stack-name I see the above mentioned under KEY/VALUE,even though my JSON template doesn't include the above lines.", "keywords": ["nat"]}, {"source": "Text", "text": "2. Whenever services like AWS::EC2::VPCGatewayAttachment and AWS::EC2::Route are used, which is predominantly used to attach the already created NAT and Internet gateways either to the subnet or VPC, I see a logical ID getting created with it. ", "keywords": ["nat"]}, {"source": "Text", "text": "I see them under \"Preview your changes\"] before the update happens. ", "keywords": ["change"]}]}, {"Id": "158633592", "PostHistoryTypeId": "24", "PostId": "46817392", "RevisionGUID": "c48f9d5b-8c31-4db5-a640-e8f7c8fab410", "CreationDate": "2017-10-18T19:08:51.093", "Comment": "Proposed by 8022915 approved by 8797402 edit id of 3362523", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}], "answers": [{"Id": "46817876", "PostTypeId": "2", "ParentId": "46817392", "CreationDate": "2017-10-18T19:33:48.843", "Score": "2", "Body": "<p>CloudFormation adds these tags by default to all resources it creates. It's actually very helpful to run cost allocation reports and get a \"cost per stack\". CloudFormation uses these tags to group your resources, and allows you to perform commands against the stack using the logical identifiers without knowing the actual identifiers of the resources that were created. (Example: when using wait conditions you need to signal cloud formation using the logical identifier and not the actual resource identifier)</p>\n\n<p>After updating, you should be able to see the logical identifiers, and actual identifiers for all resources under the \"Resources\" tab of the CloudFormation stack as well in the tags of the resource. I believe CloudFormation does create logical identifiers for all resources it creates.</p>\n\n<p>One thing I have noticed that is annoying is when using S3 buckets in cloud formation. CloudFormation adds the aws:* tags to the bucket, which prevents you from manually adding/removing other tags because on save it complains that aws:* tags are not valid. Therefore the only way to adjust the S3 bucket tags is through the cloud formation stack.</p>\n\n<p>Screenshot:\n<a href=\"https://i.stack.imgur.com/snRxM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/snRxM.png\" alt=\"Screenshot\"></a></p>\n", "OwnerUserId": "22", "LastEditorUserId": "22", "LastEditDate": "2017-10-18T20:07:55.590", "LastActivityDate": "2017-10-18T20:07:55.590", "CommentCount": "5", "ContentLicense": "CC BY-SA 3.0", "comments": [{"Id": "80583718", "PostId": "46817876", "Score": "0", "Text": "Thanks for the explanation Maclema. I do agree Cloudformation does create a logical ID for all the resources, but in this case the TYPE, i.e                         AWS::EC2::VPCGatewayAttachment and AWS::EC2::Route are not creating a hardware or any other component of the VPC. They are used to attach the NAT and IGW to the VPC/subnet. I don't know where to look for these resources logical ID in the dashboard. The only time I see them is during  \"preview your changes\" and after the update happens I could not see it anywhere .", "CreationDate": "2017-10-18T19:56:03.930", "UserDisplayName": "user8797402", "filtered-sentences": [{"source": "Text", "text": "They are used to attach the NAT and IGW to the VPC/subnet. ", "keywords": ["nat"]}, {"source": "Text", "text": "The only time I see them is during \"preview your changes\" and after the update happens I could not see it anywhere .", "keywords": ["change"]}]}, {"Id": "80584119", "PostId": "46817876", "Score": "0", "Text": "That's strange. With my CF stacks, I do see a logical identifier for the VPCGatewayAttachment under the resources tab. (See screenshot attached to post). If you do not see the gateway attachment in the resources tab I would suspect it might not be getting created.", "CreationDate": "2017-10-18T20:08:31.910", "UserId": "22", "filtered-sentences": []}, {"Id": "80586491", "PostId": "46817876", "Score": "0", "Text": "ahh !! I got it. Thanks Maclema.I also see it now. \nBtw, is there any way we can see the logical ID for the VPCGatewayAttachment in the Main dashboard, where after the VPC is created through CF template, You can see all the created subnets, IGW and NAT for the respective region. \nThanks for your analysis on this one.", "CreationDate": "2017-10-18T21:27:22.060", "UserDisplayName": "user8797402", "filtered-sentences": [{"source": "Text", "text": "Btw, is there any way we can see the logical ID for the VPCGatewayAttachment in the Main dashboard, where after the VPC is created through CF template, You can see all the created subnets, IGW and NAT for the respective region. ", "keywords": ["nat"]}]}, {"Id": "80589362", "PostId": "46817876", "Score": "0", "Text": "I don't believe there is anywhere else to see the attachments or their tags.", "CreationDate": "2017-10-19T00:00:53.540", "UserId": "22", "filtered-sentences": []}, {"Id": "123420912", "PostId": "46817876", "Score": "0", "Text": "can you please help here seems to be related https://stackoverflow.com/questions/69822341/aws-prefixed-tag-key-names-are-not-allowed-for-external-use", "CreationDate": "2021-11-03T09:20:03.370", "UserId": "3425138", "filtered-sentences": []}], "history": [{"Id": "158637122", "PostHistoryTypeId": "5", "PostId": "46817876", "RevisionGUID": "35caac6a-6eef-48da-ac56-fa826f81b8b1", "CreationDate": "2017-10-18T20:07:55.590", "UserId": "22", "Comment": "added 86 characters in body", "Text": "CloudFormation adds these tags by default to all resources it creates. It's actually very helpful to run cost allocation reports and get a \"cost per stack\". CloudFormation uses these tags to group your resources, and allows you to perform commands against the stack using the logical identifiers without knowing the actual identifiers of the resources that were created. (Example: when using wait conditions you need to signal cloud formation using the logical identifier and not the actual resource identifier)\r\n\r\nAfter updating, you should be able to see the logical identifiers, and actual identifiers for all resources under the \"Resources\" tab of the CloudFormation stack as well in the tags of the resource. I believe CloudFormation does create logical identifiers for all resources it creates.\r\n\r\nOne thing I have noticed that is annoying is when using S3 buckets in cloud formation. CloudFormation adds the aws:* tags to the bucket, which prevents you from manually adding/removing other tags because on save it complains that aws:* tags are not valid. Therefore the only way to adjust the S3 bucket tags is through the cloud formation stack.\r\n\r\nScreenshot:\r\n[![Screenshot][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/snRxM.png", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": [{"source": "Text", "text": "It's actually very helpful to run cost allocation reports and get a \"cost per stack\". ", "keywords": ["cost"]}]}, {"Id": "158635090", "PostHistoryTypeId": "2", "PostId": "46817876", "RevisionGUID": "f393e743-9710-4ec8-8222-bdf5d197b4ac", "CreationDate": "2017-10-18T19:33:48.843", "UserId": "22", "Text": "CloudFormation adds these tags by default to all resources it creates. It's actually very helpful to run cost allocation reports and get a \"cost per stack\". CloudFormation uses these tags to group your resources, and allows you to perform commands against the stack using the logical identifiers without knowing the actual identifiers of the resources that were created. (Example: when using wait conditions you need to signal cloud formation using the logical identifier and not the actual resource identifier)\r\n\r\nAfter updating, you should be able to see the logical identifiers, and actual identifiers for all resources under the \"Resources\" tab of the CloudFormation stack as well in the tags of the resource. I believe CloudFormation does create logical identifiers for all resources it creates.\r\n\r\nOne thing I have noticed that is annoying is when using S3 buckets in cloud formation. CloudFormation adds the aws:* tags to the bucket, which prevents you from manually adding/removing other tags because on save it complains that aws:* tags are not valid. Therefore the only way to adjust the S3 bucket tags is through the cloud formation stack.", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": [{"source": "Text", "text": "It's actually very helpful to run cost allocation reports and get a \"cost per stack\". ", "keywords": ["cost"]}]}], "filtered-sentences": [{"source": "Body", "text": "It's actually very helpful to run cost allocation reports and get a \"cost per stack\". ", "keywords": ["cost"]}]}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "What did I observe: When I create a VPC using Cloud-formation template, under the TAGS for every service created[Like subnet, NAT, Internet gateway ] I see aws:cloudformation:logical-id aws:cloudformation:stack-id aws:cloud formation:stack-name I see the above mentioned under KEY/VALUE,even though my JSON template doesn't include the above lines.", "keywords": ["nat"]}, {"source": "Body", "text": "Whenever services like AWS::EC2::VPCGatewayAttachment and AWS::EC2::Route are used, which is predominantly used to attach the already created NAT and Internet gateways either to the subnet or VPC, I see a logical ID getting created with it. ", "keywords": ["nat"]}, {"source": "Body", "text": "I see them under \"Preview your changes\"] before the update happens. ", "keywords": ["change"]}]}