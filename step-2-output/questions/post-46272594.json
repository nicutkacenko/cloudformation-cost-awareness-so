{"Id": "46272594", "PostTypeId": "1", "CreationDate": "2017-09-18T06:09:39.857", "Score": "1", "ViewCount": "627", "Body": "<p>I am using cloudwatch to trigger AWS Lambda. Now to create this trigger first of all I have to create rule then I need to add target and then I need to add permission policy to that lambda function. Now the problem is there is a policy length limit(20k) for each lambda function and each cloudwatch trigger increase policy length. So if there are around 60 cloudwatch rules my lambda can still handle all of those events as size is still less than 20k, but after that if rules increase I get <a href=\"http://docs.aws.amazon.com/lambda/latest/dg/API_AddPermission.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/lambda/latest/dg/API_AddPermission.html</a> \"policy length exceed exception error\".<br>\nI know I can delete the policy by using removePermission method but that is not efficient because if there are around 100 rules present in cloudwatch which are triggering my lambda function then my lambda function can't handle that much amount of policy length.</p>\n", "OwnerUserId": "5786389", "LastEditorUserId": "174777", "LastEditDate": "2018-06-01T11:23:23.843", "LastActivityDate": "2018-06-01T11:23:23.843", "Title": "Cloudwatch trigger to Aws lambda", "Tags": "|amazon-web-services|aws-lambda|aws-cloudformation|", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 3.0", "history": [{"Id": "156382954", "PostHistoryTypeId": "2", "PostId": "46272594", "RevisionGUID": "6b16b727-fcfd-46cb-b459-f918828589c5", "CreationDate": "2017-09-18T06:09:39.857", "UserId": "5786389", "Text": "I am using cloudwatch to trigger AWS Lambda. Now to create this trigger first of all I have to create rule then I need to add target and then I need to add permission policy to that lambda function. Now the problem is there is a policy length limit(20k) for each lambda function and each cloudwatch trigger increase policy length. So if there are around 60 cloudwatch rules my lambda can still handle all of those events as size is still less than 20k, but after that if rules increase I get http://docs.aws.amazon.com/lambda/latest/dg/API_AddPermission.html \"policy length exceed exception error\".<br>\r\nI know I can delete the policy by using removePermission method but that is not efficient because if there are around 100 rules present in cloudwatch which are triggering my lambda function then my lambda function can't handle that much amount of policy length.", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": [{"source": "Text", "text": "Now to create this trigger first of all I have to create rule then I need to add target and then I need to add permission policy to that lambda function. ", "keywords": ["policy"]}, {"source": "Text", "text": "Now the problem is there is a policy length limit(20k) for each lambda function and each cloudwatch trigger increase policy length. ", "keywords": ["policy"]}, {"source": "Text", "text": "So if there are around 60 cloudwatch rules my lambda can still handle all of those events as size is still less than 20k, but after that if rules increase I get http://docs.aws.amazon.com/lambda/latest/dg/API_AddPermission.html \"policy length exceed exception error\". ", "keywords": ["policy"]}, {"source": "Text", "text": "I know I can delete the policy by using removePermission method but that is not efficient because if there are around 100 rules present in cloudwatch which are triggering my lambda function then my lambda function can't handle that much amount of policy length.", "keywords": ["efficient", "policy"]}]}, {"Id": "156382955", "PostHistoryTypeId": "1", "PostId": "46272594", "RevisionGUID": "6b16b727-fcfd-46cb-b459-f918828589c5", "CreationDate": "2017-09-18T06:09:39.857", "UserId": "5786389", "Text": "Cloudwatch trigger to Aws lambda", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}, {"Id": "156382956", "PostHistoryTypeId": "3", "PostId": "46272594", "RevisionGUID": "6b16b727-fcfd-46cb-b459-f918828589c5", "CreationDate": "2017-09-18T06:09:39.857", "UserId": "5786389", "Text": "|amazon-web-services|amazon|aws-lambda|aws-cloudformation|", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}, {"Id": "174672448", "PostHistoryTypeId": "6", "PostId": "46272594", "RevisionGUID": "1488ef93-ef01-4cbd-8c86-a9db3ce55fc1", "CreationDate": "2018-06-01T11:23:23.843", "UserId": "174777", "Comment": "edited tags", "Text": "|amazon-web-services|aws-lambda|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "46272779", "PostTypeId": "2", "ParentId": "46272594", "CreationDate": "2017-09-18T06:23:02.440", "Score": "2", "Body": "<p>This is how I solved it.</p>\n\n<blockquote>\n  <p>Cloudwatch Alerts --> SNS --> Lambda</p>\n</blockquote>\n\n<p>No subscription, no permissions configuration needed. You can create multiple different SNS notifications if you want to isolate different team based on your alerts.</p>\n\n<p>Steps:</p>\n\n<ol>\n<li>Create SNS with a topic</li>\n<li>Send Cloudwatch Alerts to SNS</li>\n<li>Subscribe Lambda to that SNS Topic</li>\n</ol>\n\n<p>Receive Alerts to Lambda! </p>\n\n<p>Hope it helps.</p>\n", "OwnerUserId": "299462", "LastActivityDate": "2017-09-18T06:23:02.440", "CommentCount": "0", "ContentLicense": "CC BY-SA 3.0", "history": [{"Id": "156383658", "PostHistoryTypeId": "2", "PostId": "46272779", "RevisionGUID": "4c1243f6-f8dc-4aef-a014-ee40d29f9877", "CreationDate": "2017-09-18T06:23:02.440", "UserId": "299462", "Text": "This is how I solved it.\r\n\r\n> Cloudwatch Alerts --> SNS --> Lambda\r\n\r\nNo subscription, no permissions configuration needed. You can create multiple different SNS notifications if you want to isolate different team based on your alerts.\r\n\r\nSteps:\r\n\r\n1. Create SNS with a topic\r\n2. Send Cloudwatch Alerts to SNS\r\n3. Subscribe Lambda to that SNS Topic\r\n\r\nReceive Alerts to Lambda! \r\n\r\nHope it helps.", "ContentLicense": "CC BY-SA 3.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "Now to create this trigger first of all I have to create rule then I need to add target and then I need to add permission policy to that lambda function. ", "keywords": ["policy"]}, {"source": "Body", "text": "Now the problem is there is a policy length limit(20k) for each lambda function and each cloudwatch trigger increase policy length. ", "keywords": ["policy"]}, {"source": "Body", "text": "So if there are around 60 cloudwatch rules my lambda can still handle all of those events as size is still less than 20k, but after that if rules increase I get http://docs.aws.amazon.com/lambda/latest/dg/API_AddPermission.html \"policy length exceed exception error\". ", "keywords": ["policy"]}, {"source": "Body", "text": "I know I can delete the policy by using removePermission method but that is not efficient because if there are around 100 rules present in cloudwatch which are triggering my lambda function then my lambda function can't handle that much amount of policy length.", "keywords": ["efficient", "policy"]}]}