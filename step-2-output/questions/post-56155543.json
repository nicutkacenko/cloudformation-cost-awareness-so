{"Id": "56155543", "PostTypeId": "1", "CreationDate": "2019-05-15T18:24:36.283", "Score": "0", "ViewCount": "330", "Body": "<p>I have a website behind hosted on S3 behind the cloudfront. I get continuous spamming for couple of hours every evening. The spammer uses different IPs/subnets to launch the same. Going through the access logs, I can not identify any common pattern or special request origin. What kind of further digging is needed to create a WAF rule to avoid this. What is the maximum damage I am seeing here [apart from cloudfront transfer costs] ?</p>\n\n<p>The IP's being used are from Amazon, which indicates that new instances or containers are being spun up to launch the same.</p>\n", "OwnerUserId": "2006544", "LastEditorUserId": "135549", "LastEditDate": "2019-05-23T08:00:56.730", "LastActivityDate": "2019-05-23T08:00:56.730", "Title": "Blocking a spam attack using WAF", "Tags": "|amazon-web-services|aws-cloudformation|spam|web-application-firewall|", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "197804000", "PostHistoryTypeId": "1", "PostId": "56155543", "RevisionGUID": "b14d3914-1d42-4e43-a69e-133fda55b0eb", "CreationDate": "2019-05-15T18:24:36.283", "UserId": "2006544", "Text": "Blocking a spam attack using WAF", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "197804001", "PostHistoryTypeId": "3", "PostId": "56155543", "RevisionGUID": "b14d3914-1d42-4e43-a69e-133fda55b0eb", "CreationDate": "2019-05-15T18:24:36.283", "UserId": "2006544", "Text": "|amazon-web-services|aws-cloudformation|spam|waf|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "197803999", "PostHistoryTypeId": "2", "PostId": "56155543", "RevisionGUID": "b14d3914-1d42-4e43-a69e-133fda55b0eb", "CreationDate": "2019-05-15T18:24:36.283", "UserId": "2006544", "Text": "I have a website behind hosted on S3 behind the cloudfront. I get continuous spamming for couple of hours every evening. The spammer uses different IPs/subnets to launch the same. Going through the access logs, I can not identify any common pattern or special request origin. What kind of further digging is needed to create a WAF rule to avoid this. What is the maximum damage I am seeing here [apart from cloudfront transfer costs] ?\r\n\r\nThe IP's being used are from Amazon, which indicates that new instances or containers are being spun up to launch the same.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "198290454", "PostHistoryTypeId": "6", "PostId": "56155543", "RevisionGUID": "cc31efd0-3840-4dd8-93f6-edfc9d91cf93", "CreationDate": "2019-05-23T08:00:56.730", "UserId": "135549", "Comment": "edited tags", "Text": "|amazon-web-services|aws-cloudformation|spam|web-application-firewall|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "56157748", "PostTypeId": "2", "ParentId": "56155543", "CreationDate": "2019-05-15T21:16:45.140", "Score": "1", "Body": "<p>Amazon publishes its IP address ranges, <a href=\"https://docs.aws.amazon.com/general/latest/gr/aws-ip-ranges.html\" rel=\"nofollow noreferrer\">here</a>. If you are not expecting traffic from AWS instances, you can either create a WAF rule that denies traffic from the IP address ranges, or create a viewer-request Lambda@Edge that does the same. Depending in the number of requests/amount of traffic, the Lambda may prove to be substantially more cost-effective.</p>\n", "OwnerUserId": "3167238", "LastActivityDate": "2019-05-15T21:16:45.140", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "98954204", "PostId": "56157748", "Score": "1", "Text": "perhaps file an abuse report as well with aws.", "CreationDate": "2019-05-16T07:49:17.137", "UserId": "11097368", "filtered-sentences": []}, {"Id": "99038273", "PostId": "56157748", "Score": "0", "Text": "Appreciate your inputs, I am exploring them both and trying to see if I can get any help from the same.", "CreationDate": "2019-05-19T13:55:01.967", "UserId": "2006544", "filtered-sentences": []}], "history": [{"Id": "197813106", "PostHistoryTypeId": "2", "PostId": "56157748", "RevisionGUID": "ff0825c4-49b8-4744-98f8-2d02ead57845", "CreationDate": "2019-05-15T21:16:45.140", "UserId": "3167238", "Text": "Amazon publishes its IP address ranges, [here][1]. If you are not expecting traffic from AWS instances, you can either create a WAF rule that denies traffic from the IP address ranges, or create a viewer-request Lambda@Edge that does the same. Depending in the number of requests/amount of traffic, the Lambda may prove to be substantially more cost-effective.\n\n\n  [1]: https://docs.aws.amazon.com/general/latest/gr/aws-ip-ranges.html", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Depending in the number of requests/amount of traffic, the Lambda may prove to be substantially more cost-effective. [1]: https://docs.aws.amazon.com/general/latest/gr/aws-ip-ranges.html", "keywords": ["cost"]}]}], "filtered-sentences": [{"source": "Body", "text": "Depending in the number of requests/amount of traffic, the Lambda may prove to be substantially more cost-effective.", "keywords": ["cost"]}]}], "contains-topic": false, "filtered-sentences": []}