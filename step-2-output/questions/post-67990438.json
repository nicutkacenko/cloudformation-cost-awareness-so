{"Id": "67990438", "PostTypeId": "1", "CreationDate": "2021-06-15T16:50:13.120", "Score": "-1", "ViewCount": "1499", "Body": "<p>Unable to create aurora postgresSql database using cloudformat yaml template.\nPlease help me on this.</p>\n", "OwnerUserId": "2919519", "LastActivityDate": "2021-06-16T00:44:43.460", "Title": "Install Aurora PostgresSql using cloudformation", "Tags": "|amazon-web-services|aws-cloudformation|", "AnswerCount": "1", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "120175587", "PostId": "67990438", "Score": "0", "Text": "Please add more info about your problem: error message, related part of YAML template etc", "CreationDate": "2021-06-15T19:10:47.723", "UserId": "11305581", "filtered-sentences": []}, {"Id": "120180572", "PostId": "67990438", "Score": "0", "Text": "For tips on asking a good question, please see: [How do I ask a good question?](http://stackoverflow.com/help/how-to-ask)", "CreationDate": "2021-06-16T00:42:23.500", "UserId": "174777", "filtered-sentences": []}], "history": [{"Id": "248536481", "PostHistoryTypeId": "2", "PostId": "67990438", "RevisionGUID": "a6090725-abcd-4e8c-a05f-88b1a7429ef2", "CreationDate": "2021-06-15T16:50:13.120", "UserId": "2919519", "Text": "Unable to create aurora postgresSql database using cloudformat yaml template.\r\nPlease help me on this.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "248536482", "PostHistoryTypeId": "1", "PostId": "67990438", "RevisionGUID": "a6090725-abcd-4e8c-a05f-88b1a7429ef2", "CreationDate": "2021-06-15T16:50:13.120", "UserId": "2919519", "Text": "Install Aurora PostgresSql using cloudformation", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "248536483", "PostHistoryTypeId": "3", "PostId": "67990438", "RevisionGUID": "a6090725-abcd-4e8c-a05f-88b1a7429ef2", "CreationDate": "2021-06-15T16:50:13.120", "UserId": "2919519", "Text": "|amazon-web-services|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "67995012", "PostTypeId": "2", "ParentId": "67990438", "CreationDate": "2021-06-16T00:44:43.460", "Score": "1", "Body": "<p>From <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-rds-dbcluster.html\" rel=\"nofollow noreferrer\">AWS::RDS::DBCluster - AWS CloudFormation</a>:</p>\n<blockquote>\n<p>The following example creates an Amazon Aurora PostgreSQL DB cluster that exports logs to Amazon CloudWatch Logs. For more information about exporting Aurora DB cluster logs to Amazon CloudWatch Logs.</p>\n</blockquote>\n<pre class=\"lang-yaml prettyprint-override\"><code>AWSTemplateFormatVersion: 2010-09-09\nDescription: &gt;-\n  AWS CloudFormation Sample Template for sending Aurora DB cluster logs to\n  CloudWatch Logs: Sample template showing how to create an Aurora PostgreSQL DB\n  cluster that exports logs to CloudWatch Logs. **WARNING** This template\n  enables log exports to CloudWatch Logs. You will be billed for the AWS\n  resources used if you create a stack from this template.\nParameters:\n  DBUsername:\n    NoEcho: 'true'\n    Description: Username for PostgreSQL database access\n    Type: String\n    MinLength: '1'\n    MaxLength: '16'\n    AllowedPattern: '[a-zA-Z][a-zA-Z0-9]*'\n    ConstraintDescription: must begin with a letter and contain only alphanumeric characters.\n  DBPassword:\n    NoEcho: 'true'\n    Description: Password for PostgreSQL database access\n    Type: String\n    MinLength: '8'\n    MaxLength: '41'\n    AllowedPattern: '[a-zA-Z0-9]*'\n    ConstraintDescription: must contain only alphanumeric characters.\nResources:\n  RDSCluster:\n    Type: 'AWS::RDS::DBCluster'\n    Properties:\n      MasterUsername: !Ref DBUsername\n      MasterUserPassword: !Ref DBPassword\n      DBClusterIdentifier: aurora-postgresql-cluster\n      Engine: aurora-postgresql\n      EngineVersion: '10.7'\n      DBClusterParameterGroupName: default.aurora-postgresql10\n      EnableCloudwatchLogsExports:\n        - postgresql\n  RDSDBInstance1:\n    Type: 'AWS::RDS::DBInstance'\n    Properties:\n      DBInstanceIdentifier: aurora-postgresql-instance1\n      Engine: aurora-postgresql\n      DBClusterIdentifier: !Ref RDSCluster\n      PubliclyAccessible: 'true'\n      DBInstanceClass: db.r4.large\n  RDSDBInstance2:\n    Type: 'AWS::RDS::DBInstance'\n    Properties:\n      DBInstanceIdentifier: aurora-postgresql-instance2\n      Engine: aurora-postgresql\n      DBClusterIdentifier: !Ref RDSCluster\n      PubliclyAccessible: 'true'\n      DBInstanceClass: db.r4.large\n</code></pre>\n", "OwnerUserId": "174777", "LastActivityDate": "2021-06-16T00:44:43.460", "CommentCount": "3", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "125438268", "PostId": "67995012", "Score": "0", "Text": "Hi, @John I appreciate your answer as it has helped me a lot being a newbie in cloud formation.  Can direct me to the steps to create x number of reader instances along with one writer instance. Regards,", "CreationDate": "2022-02-02T14:17:34.850", "UserId": "2141407", "filtered-sentences": [{"source": "Text", "text": "Can direct me to the steps to create x number of reader instances along with one writer instance. ", "keywords": ["instance"]}]}, {"Id": "125438821", "PostId": "67995012", "Score": "0", "Text": "For other people who are new and confused like me. I created the first instance only thinking that adding another instance will add two writer instances however I was wrong. The first instance RDSDBInstance1 of this template creates a writer instance and the second instance RDSDBInstance2 creates a reader instance under same cluster.", "CreationDate": "2022-02-02T14:36:53.423", "UserId": "2141407", "filtered-sentences": [{"source": "Text", "text": "I created the first instance only thinking that adding another instance will add two writer instances however I was wrong. ", "keywords": ["instance"]}, {"source": "Text", "text": "The first instance RDSDBInstance1 of this template creates a writer instance and the second instance RDSDBInstance2 creates a reader instance under same cluster.", "keywords": ["instance", "cluster"]}]}, {"Id": "125438854", "PostId": "67995012", "Score": "0", "Text": "Thank you for your comprehensive answer. However, another question rises now what if we want to create multiple writer instances under one cluster. Is it even possible? I will be researching on this and will post it here if found a solution.", "CreationDate": "2022-02-02T14:37:52.203", "UserId": "2141407", "filtered-sentences": [{"source": "Text", "text": "However, another question rises now what if we want to create multiple writer instances under one cluster. ", "keywords": ["cluster"]}]}], "history": [{"Id": "248555722", "PostHistoryTypeId": "2", "PostId": "67995012", "RevisionGUID": "54d2f14b-2c51-43c4-8403-465ac9b1bf39", "CreationDate": "2021-06-16T00:44:43.460", "UserId": "174777", "Text": "From [AWS::RDS::DBCluster - AWS CloudFormation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-rds-dbcluster.html):\r\n\r\n> The following example creates an Amazon Aurora PostgreSQL DB cluster that exports logs to Amazon CloudWatch Logs. For more information about exporting Aurora DB cluster logs to Amazon CloudWatch Logs.\r\n\r\n```yaml\r\nAWSTemplateFormatVersion: 2010-09-09\r\nDescription: >-\r\n  AWS CloudFormation Sample Template for sending Aurora DB cluster logs to\r\n  CloudWatch Logs: Sample template showing how to create an Aurora PostgreSQL DB\r\n  cluster that exports logs to CloudWatch Logs. **WARNING** This template\r\n  enables log exports to CloudWatch Logs. You will be billed for the AWS\r\n  resources used if you create a stack from this template.\r\nParameters:\r\n  DBUsername:\r\n    NoEcho: 'true'\r\n    Description: Username for PostgreSQL database access\r\n    Type: String\r\n    MinLength: '1'\r\n    MaxLength: '16'\r\n    AllowedPattern: '[a-zA-Z][a-zA-Z0-9]*'\r\n    ConstraintDescription: must begin with a letter and contain only alphanumeric characters.\r\n  DBPassword:\r\n    NoEcho: 'true'\r\n    Description: Password for PostgreSQL database access\r\n    Type: String\r\n    MinLength: '8'\r\n    MaxLength: '41'\r\n    AllowedPattern: '[a-zA-Z0-9]*'\r\n    ConstraintDescription: must contain only alphanumeric characters.\r\nResources:\r\n  RDSCluster:\r\n    Type: 'AWS::RDS::DBCluster'\r\n    Properties:\r\n      MasterUsername: !Ref DBUsername\r\n      MasterUserPassword: !Ref DBPassword\r\n      DBClusterIdentifier: aurora-postgresql-cluster\r\n      Engine: aurora-postgresql\r\n      EngineVersion: '10.7'\r\n      DBClusterParameterGroupName: default.aurora-postgresql10\r\n      EnableCloudwatchLogsExports:\r\n        - postgresql\r\n  RDSDBInstance1:\r\n    Type: 'AWS::RDS::DBInstance'\r\n    Properties:\r\n      DBInstanceIdentifier: aurora-postgresql-instance1\r\n      Engine: aurora-postgresql\r\n      DBClusterIdentifier: !Ref RDSCluster\r\n      PubliclyAccessible: 'true'\r\n      DBInstanceClass: db.r4.large\r\n  RDSDBInstance2:\r\n    Type: 'AWS::RDS::DBInstance'\r\n    Properties:\r\n      DBInstanceIdentifier: aurora-postgresql-instance2\r\n      Engine: aurora-postgresql\r\n      DBClusterIdentifier: !Ref RDSCluster\r\n      PubliclyAccessible: 'true'\r\n      DBInstanceClass: db.r4.large\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "From [AWS::RDS::DBCluster - AWS CloudFormation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-rds-dbcluster.html): > The following example creates an Amazon Aurora PostgreSQL DB cluster that exports logs to Amazon CloudWatch Logs. ", "keywords": ["cluster"]}, {"source": "Text", "text": "For more information about exporting Aurora DB cluster logs to Amazon CloudWatch Logs. ", "keywords": ["cluster"]}, {"source": "Text", "text": "```yaml AWSTemplateFormatVersion: 2010-09-09 Description: >- AWS CloudFormation Sample Template for sending Aurora DB cluster logs to CloudWatch Logs: Sample template showing how to create an Aurora PostgreSQL DB cluster that exports logs to CloudWatch Logs. ", "keywords": ["cluster"]}, {"source": "Text", "text": "You will be billed for the AWS resources used if you create a stack from this template. ", "keywords": ["bill"]}, {"source": "Text", "text": "Parameters: DBUsername: NoEcho: 'true' Description: Username for PostgreSQL database access Type: String MinLength: '1' MaxLength: '16' AllowedPattern: '[a-zA-Z][a-zA-Z0-9]*' ConstraintDescription: must begin with a letter and contain only alphanumeric characters. DBPassword: NoEcho: 'true' Description: Password for PostgreSQL database access Type: String MinLength: '8' MaxLength: '41' AllowedPattern: '[a-zA-Z0-9]*' ConstraintDescription: must contain only alphanumeric characters. Resources: RDSCluster: Type: 'AWS::RDS::DBCluster' Properties: MasterUsername: !Ref DBUsername MasterUserPassword: !Ref DBPassword DBClusterIdentifier: aurora-postgresql-cluster Engine: aurora-postgresql EngineVersion: '10.7' DBClusterParameterGroupName: default.aurora-postgresql10 EnableCloudwatchLogsExports: - postgresql RDSDBInstance1: Type: 'AWS::RDS::DBInstance' Properties: DBInstanceIdentifier: aurora-postgresql-instance1 Engine: aurora-postgresql DBClusterIdentifier: !Ref RDSCluster PubliclyAccessible: 'true' DBInstanceClass: db.r4.large RDSDBInstance2: Type: 'AWS::RDS::DBInstance' Properties: DBInstanceIdentifier: aurora-postgresql-instance2 Engine: aurora-postgresql DBClusterIdentifier: !Ref RDSCluster PubliclyAccessible: 'true' DBInstanceClass: db.r4.large ```", "keywords": ["cluster"]}]}], "filtered-sentences": [{"source": "Body", "text": "From AWS::RDS::DBCluster - AWS CloudFormation: The following example creates an Amazon Aurora PostgreSQL DB cluster that exports logs to Amazon CloudWatch Logs. ", "keywords": ["cluster"]}, {"source": "Body", "text": "For more information about exporting Aurora DB cluster logs to Amazon CloudWatch Logs.", "keywords": ["cluster"]}]}], "contains-topic": true, "filtered-sentences": []}