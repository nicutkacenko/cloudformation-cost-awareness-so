{"Id": "57563631", "PostTypeId": "1", "CreationDate": "2019-08-19T20:36:52.553", "Score": "0", "ViewCount": "413", "Body": "<p>I am getting the above error  while processing the ec2.json file </p>\n\n<p>This is a valid JSON file, please let me know any issue with the JSON file </p>\n\n<pre><code>   \"Resources\":{  \n  \"EC2Instance\":{  \n     \"Type\":\"AWS::EC2::Instance\",\n     \"Properties\":{  \n        \"InstanceType\":{  \n           \"Ref\":\"InstanceType\"\n        },\n        \"SecurityGroups\":[  \n           {  \n              \"Ref\":\"InstanceSecurityGroup\"\n           }\n        ],\n        \"KeyName\":{  \n           \"Ref\":\"KeyName\"\n        },\n\n  \"UserData\":{  \n     \"Fn::Base64\":{  \n        \"Fn::Join\":[  \n           \"\",\n           [  \n              \"#!/bin/bash \\n\",\n              \"sudo apt-get update \\n\",\n              \"sudo apt-get install wget python -y \\n\",\n              \"echo UD_OF_EC2_1 &gt;&gt; /var/log/user-data.log \\n\",\n              \"echo UD_OF_EC2_2 &gt;&gt; /var/log/user-data.log \\n\",\n              \"echo UD_OF_EC2_3 &gt;&gt; /var/log/user-data.log \\n\"\n           ]\n        ]\n     }\n  },\n</code></pre>\n\n<p>The minimal reproducible example for scenario I am attaching </p>\n\n<p>please verify this template what is the problem ??\nI tried to edit sample template from git hub for adding user data I ma facing the issue </p>\n\n<p>AwsCloudFormer.template</p>\n\n<pre><code>  {\n   \"AWSTemplateFormatVersion\":\"2010-09-09\",\n   \"Description\":\"AWS CloudFormer Beta - template creation prototype application. This tool allows you to create an AWS CloudFormation template from the AWS resources in your AWS account. **Warning** This template creates a single t1.micro instance in your account to run the application - you will be billed for the instance at normal AWS EC2 rates for the t1.micro.\",\n   \"Parameters\":{\n      \"AccessControl\":{\n         \"Description\":\" The IP address range that can be used to access the CloudFormer tool. NOTE: We highly recommend that you specify a customized address range to lock down the tool.\",\n         \"Type\":\"String\",\n         \"MinLength\":\"9\",\n         \"MaxLength\":\"18\",\n         \"Default\":\"0.0.0.0/0\",\n         \"AllowedPattern\":\"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\",\n         \"ConstraintDescription\":\"must be a valid IP CIDR range of the form x.x.x.x/x.\"\n      }\n   },\n   \"Mappings\":{\n      \"RegionMap\":{\n         \"us-east-1\":{\n            \"AMI\":\"ami-21341f48\"\n         },\n         \"us-west-2\":{\n            \"AMI\":\"ami-d6096ee6\"\n         },\n         \"us-west-1\":{\n            \"AMI\":\"ami-ec7c4fa9\"\n         },\n         \"eu-west-1\":{\n            \"AMI\":\"ami-26688051\"\n         },\n         \"ap-southeast-1\":{\n            \"AMI\":\"ami-c0356292\"\n         },\n         \"ap-northeast-1\":{\n            \"AMI\":\"ami-7d1a777c\"\n         },\n         \"ap-southeast-2\":{\n            \"AMI\":\"ami-cd1b84f7\"\n         },\n         \"sa-east-1\":{\n            \"AMI\":\"ami-592d8c44\"\n         },\n         \"us-gov-west-1\":{\n            \"AMI\":\"ami-23c1a500\"\n         }\n      }\n   },\n   \"Resources\":{\n      \"CFNRole\":{\n         \"Type\":\"AWS::IAM::Role\",\n         \"Properties\":{\n            \"AssumeRolePolicyDocument\":{\n               \"Statement\":[\n                  {\n                     \"Effect\":\"Allow\",\n                     \"Principal\":{\n                        \"Service\":[\n                           \"ec2.amazonaws.com\"\n                        ]\n                     },\n                     \"Action\":[\n                        \"sts:AssumeRole\"\n                     ]\n                  }\n               ]\n            },\n            \"Path\":\"/\"\n         }\n      },\n      \"UserData\":{\n         \"Fn::Base64\":{\n            \"Fn::Join\":[\n               \",\",\n               [\n                  \"#!/bin/bash -xe\",\n                  \"/bin/touch /tmp/confirm_work.txt\"\n               ]\n            ]\n         }\n      },\n      \"CFNRolePolicy\":{\n         \"Type\":\"AWS::IAM::Policy\",\n         \"Properties\":{\n            \"PolicyName\":\"CloudFormerPolicy\",\n            \"PolicyDocument\":{\n               \"Statement\":[\n                  {\n                     \"Effect\":\"Allow\",\n                     \"Action\":[\n                        \"autoscaling:Describe*\",\n                        \"cloudfront:List*\",\n                        \"cloudwatch:Describe*\",\n                        \"dynamodb:List*\",\n                        \"dynamodb:Describe*\",\n                        \"ec2:Describe*\",\n                        \"elasticloadbalancing:Describe*\",\n                        \"elasticache:Describe*\",\n                        \"rds:Describe*\",\n                        \"rds:List*\",\n                        \"route53:List*\",\n                        \"s3:List*\",\n                        \"s3:Get*\",\n                        \"s3:PutObject\",\n                        \"sdb:Get*\",\n                        \"sdb:List*\",\n                        \"sns:Get*\",\n                        \"sns:List*\",\n                        \"sqs:Get*\",\n                        \"sqs:List*\"\n                     ],\n                     \"Resource\":\"*\"\n                  }\n               ]\n            },\n            \"Roles\":[\n               {\n                  \"Ref\":\"CFNRole\"\n               }\n            ]\n         }\n      },\n      \"CFNInstanceProfile\":{\n         \"Type\":\"AWS::IAM::InstanceProfile\",\n         \"Properties\":{\n            \"Path\":\"/\",\n            \"Roles\":[\n               {\n                  \"Ref\":\"CFNRole\"\n               }\n            ]\n         }\n      },\n      \"WebServer\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"InstanceType\":\"t1.micro\",\n            \"SecurityGroups\":[\n               {\n                  \"Ref\":\"InstanceSecurityGroup\"\n               }\n            ],\n            \"ImageId\":{\n               \"Fn::FindInMap\":[\n                  \"RegionMap\",\n                  {\n                     \"Ref\":\"AWS::Region\"\n                  },\n                  \"AMI\"\n               ]\n            },\n            \"IamInstanceProfile\":{\n               \"Ref\":\"CFNInstanceProfile\"\n            }\n         }\n      },\n      \"InstanceSecurityGroup\":{\n         \"Type\":\"AWS::EC2::SecurityGroup\",\n         \"Properties\":{\n            \"GroupDescription\":\"Enable Access via port 80\",\n            \"SecurityGroupIngress\":[\n               {\n                  \"IpProtocol\":\"tcp\",\n                  \"FromPort\":\"80\",\n                  \"ToPort\":\"80\",\n                  \"CidrIp\":{\n                     \"Ref\":\"AccessControl\"\n                  }\n               }\n            ]\n         }\n      }\n   },\n   \"Outputs\":{\n      \"URL\":{\n         \"Description\":\"AWS CloudFormer Prototype URL. Use this endpoint to create templates from your account.\",\n         \"Value\":{\n            \"Fn::Join\":[\n               \"\",\n               [\n                  \"http://\",\n                  {\n                     \"Fn::GetAtt\":[\n                        \"WebServer\",\n                        \"PublicDnsName\"\n                     ]\n                  }\n               ]\n            ]\n         }\n      }\n   }\n}\n</code></pre>\n", "OwnerUserId": "2591123", "LastEditorUserId": "2591123", "LastEditDate": "2019-08-22T03:54:26.457", "LastActivityDate": "2019-08-22T03:54:26.457", "Title": "Invalid template resource property 'Fn::Base64'", "Tags": "|amazon-web-services|amazon-ec2|aws-cloudformation|", "AnswerCount": "0", "CommentCount": "4", "FavoriteCount": "0", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "101597667", "PostId": "57563631", "Score": "3", "Text": "This does not look bad, actually. But the JSON you've posted is not valid per se. i guess it's just a snippet. Please create and post a [MCVE], i.e. a minimal complete template for us to try.", "CreationDate": "2019-08-20T07:18:25.157", "UserId": "303810", "filtered-sentences": []}, {"Id": "101608844", "PostId": "57563631", "Score": "2", "Text": "In the code few braces are missing. Did you try this in the UI?", "CreationDate": "2019-08-20T13:02:11.003", "UserId": "1233921", "filtered-sentences": []}, {"Id": "101661223", "PostId": "57563631", "Score": "0", "Text": "I have added a minimal reproducible example,", "CreationDate": "2019-08-22T05:08:27.547", "UserId": "2591123", "filtered-sentences": []}, {"Id": "102093281", "PostId": "57563631", "Score": "0", "Text": "Fn::Base64 takes a string as input but you are providing a json to it as an input. Try to directly provide the output of Fn::Join as the value.", "CreationDate": "2019-09-07T08:29:22.310", "UserId": "4405062", "filtered-sentences": []}], "history": [{"Id": "203779081", "PostHistoryTypeId": "2", "PostId": "57563631", "RevisionGUID": "6dfe2c80-ecd0-4d36-9ea3-a3a92c33d583", "CreationDate": "2019-08-19T20:36:52.553", "UserId": "2591123", "Text": "I am getting the above error  while processing the ec2.json file \r\n    \r\nThis is a valid JSON file, Please let me know issue with JSON file \r\n\r\n       \"Resources\":{  \r\n      \"EC2Instance\":{  \r\n         \"Type\":\"AWS::EC2::Instance\",\r\n         \"Properties\":{  \r\n            \"InstanceType\":{  \r\n               \"Ref\":\"InstanceType\"\r\n            },\r\n            \"SecurityGroups\":[  \r\n               {  \r\n                  \"Ref\":\"InstanceSecurityGroup\"\r\n               }\r\n            ],\r\n            \"KeyName\":{  \r\n               \"Ref\":\"KeyName\"\r\n            },\r\n            \r\n      \"UserData\":{  \r\n         \"Fn::Base64\":{  \r\n            \"Fn::Join\":[  \r\n               \"\",\r\n               [  \r\n                  \"#!/bin/bash \\n\",\r\n                  \"sudo apt-get update \\n\",\r\n                  \"sudo apt-get install wget python -y \\n\",\r\n                  \"echo UD_OF_EC2_1 >> /var/log/user-data.log \\n\",\r\n                  \"echo UD_OF_EC2_2 >> /var/log/user-data.log \\n\",\r\n                  \"echo UD_OF_EC2_3 >> /var/log/user-data.log \\n\"\r\n               ]\r\n            ]\r\n         }\r\n      },\r\n      ", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "This is a valid JSON file, Please let me know issue with JSON file \"Resources\":{ \"EC2Instance\":{ \"Type\":\"AWS::EC2::Instance\", \"Properties\":{ \"InstanceType\":{ \"Ref\":\"InstanceType\" }, \"SecurityGroups\":[ { \"Ref\":\"InstanceSecurityGroup\" } ], \"KeyName\":{ \"Ref\":\"KeyName\" }, \"UserData\":{ \"Fn::Base64\":{ \"Fn::Join\":[ \"\", [ \"#!/bin/bash \\n\", \"sudo apt-get update \\n\", \"sudo apt-get install wget python -y \\n\", \"echo UD_OF_EC2_1 >", "keywords": ["instance"]}]}, {"Id": "203779082", "PostHistoryTypeId": "1", "PostId": "57563631", "RevisionGUID": "6dfe2c80-ecd0-4d36-9ea3-a3a92c33d583", "CreationDate": "2019-08-19T20:36:52.553", "UserId": "2591123", "Text": "Invalid template resource property 'Fn::Base64'", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "203779083", "PostHistoryTypeId": "3", "PostId": "57563631", "RevisionGUID": "6dfe2c80-ecd0-4d36-9ea3-a3a92c33d583", "CreationDate": "2019-08-19T20:36:52.553", "UserId": "2591123", "Text": "|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "203788202", "PostHistoryTypeId": "5", "PostId": "57563631", "RevisionGUID": "ab21aa72-8a20-4e11-81f5-95f989ea9d88", "CreationDate": "2019-08-20T02:00:09.560", "UserId": "8926905", "Comment": "added 8 characters in body", "Text": "I am getting the above error  while processing the ec2.json file \r\n    \r\nThis is a valid JSON file, please let me know any issue with the JSON file \r\n\r\n       \"Resources\":{  \r\n      \"EC2Instance\":{  \r\n         \"Type\":\"AWS::EC2::Instance\",\r\n         \"Properties\":{  \r\n            \"InstanceType\":{  \r\n               \"Ref\":\"InstanceType\"\r\n            },\r\n            \"SecurityGroups\":[  \r\n               {  \r\n                  \"Ref\":\"InstanceSecurityGroup\"\r\n               }\r\n            ],\r\n            \"KeyName\":{  \r\n               \"Ref\":\"KeyName\"\r\n            },\r\n            \r\n      \"UserData\":{  \r\n         \"Fn::Base64\":{  \r\n            \"Fn::Join\":[  \r\n               \"\",\r\n               [  \r\n                  \"#!/bin/bash \\n\",\r\n                  \"sudo apt-get update \\n\",\r\n                  \"sudo apt-get install wget python -y \\n\",\r\n                  \"echo UD_OF_EC2_1 >> /var/log/user-data.log \\n\",\r\n                  \"echo UD_OF_EC2_2 >> /var/log/user-data.log \\n\",\r\n                  \"echo UD_OF_EC2_3 >> /var/log/user-data.log \\n\"\r\n               ]\r\n            ]\r\n         }\r\n      },\r\n      ", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "This is a valid JSON file, please let me know any issue with the JSON file \"Resources\":{ \"EC2Instance\":{ \"Type\":\"AWS::EC2::Instance\", \"Properties\":{ \"InstanceType\":{ \"Ref\":\"InstanceType\" }, \"SecurityGroups\":[ { \"Ref\":\"InstanceSecurityGroup\" } ], \"KeyName\":{ \"Ref\":\"KeyName\" }, \"UserData\":{ \"Fn::Base64\":{ \"Fn::Join\":[ \"\", [ \"#!/bin/bash \\n\", \"sudo apt-get update \\n\", \"sudo apt-get install wget python -y \\n\", \"echo UD_OF_EC2_1 >", "keywords": ["instance"]}]}, {"Id": "203919114", "PostHistoryTypeId": "5", "PostId": "57563631", "RevisionGUID": "292cf5f7-ad21-4af7-93a2-a9f5b59879d6", "CreationDate": "2019-08-21T18:46:45.537", "UserId": "2591123", "Comment": "added 6761 characters in body", "Text": "I am getting the above error  while processing the ec2.json file \r\n    \r\nThis is a valid JSON file, please let me know any issue with the JSON file \r\n\r\n       \"Resources\":{  \r\n      \"EC2Instance\":{  \r\n         \"Type\":\"AWS::EC2::Instance\",\r\n         \"Properties\":{  \r\n            \"InstanceType\":{  \r\n               \"Ref\":\"InstanceType\"\r\n            },\r\n            \"SecurityGroups\":[  \r\n               {  \r\n                  \"Ref\":\"InstanceSecurityGroup\"\r\n               }\r\n            ],\r\n            \"KeyName\":{  \r\n               \"Ref\":\"KeyName\"\r\n            },\r\n            \r\n      \"UserData\":{  \r\n         \"Fn::Base64\":{  \r\n            \"Fn::Join\":[  \r\n               \"\",\r\n               [  \r\n                  \"#!/bin/bash \\n\",\r\n                  \"sudo apt-get update \\n\",\r\n                  \"sudo apt-get install wget python -y \\n\",\r\n                  \"echo UD_OF_EC2_1 >> /var/log/user-data.log \\n\",\r\n                  \"echo UD_OF_EC2_2 >> /var/log/user-data.log \\n\",\r\n                  \"echo UD_OF_EC2_3 >> /var/log/user-data.log \\n\"\r\n               ]\r\n            ]\r\n         }\r\n      },\r\n      \r\n\r\n\r\nThe minimal reproducible example for scenario I am attaching \r\n\r\nplease verify this template what is the problem ??\r\nI tried to edit sample template from git hub for adding user data I ma facing the issue \r\n\r\nAwsCloudFormer.template\r\n\r\n  \r\n\r\n      {\r\n       \"AWSTemplateFormatVersion\":\"2010-09-09\",\r\n       \"Description\":\"AWS CloudFormer Beta - template creation prototype application. This tool allows you to create an AWS CloudFormation template from the AWS resources in your AWS account. **Warning** This template creates a single t1.micro instance in your account to run the application - you will be billed for the instance at normal AWS EC2 rates for the t1.micro.\",\r\n       \"Parameters\":{\r\n          \"AccessControl\":{\r\n             \"Description\":\" The IP address range that can be used to access the CloudFormer tool. NOTE: We highly recommend that you specify a customized address range to lock down the tool.\",\r\n             \"Type\":\"String\",\r\n             \"MinLength\":\"9\",\r\n             \"MaxLength\":\"18\",\r\n             \"Default\":\"0.0.0.0/0\",\r\n             \"AllowedPattern\":\"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\",\r\n             \"ConstraintDescription\":\"must be a valid IP CIDR range of the form x.x.x.x/x.\"\r\n          }\r\n       },\r\n       \"Mappings\":{\r\n          \"RegionMap\":{\r\n             \"us-east-1\":{\r\n                \"AMI\":\"ami-21341f48\"\r\n             },\r\n             \"us-west-2\":{\r\n                \"AMI\":\"ami-d6096ee6\"\r\n             },\r\n             \"us-west-1\":{\r\n                \"AMI\":\"ami-ec7c4fa9\"\r\n             },\r\n             \"eu-west-1\":{\r\n                \"AMI\":\"ami-26688051\"\r\n             },\r\n             \"ap-southeast-1\":{\r\n                \"AMI\":\"ami-c0356292\"\r\n             },\r\n             \"ap-northeast-1\":{\r\n                \"AMI\":\"ami-7d1a777c\"\r\n             },\r\n             \"ap-southeast-2\":{\r\n                \"AMI\":\"ami-cd1b84f7\"\r\n             },\r\n             \"sa-east-1\":{\r\n                \"AMI\":\"ami-592d8c44\"\r\n             },\r\n             \"us-gov-west-1\":{\r\n                \"AMI\":\"ami-23c1a500\"\r\n             }\r\n          }\r\n       },\r\n       \"Resources\":{\r\n          \"CFNRole\":{\r\n             \"Type\":\"AWS::IAM::Role\",\r\n             \"Properties\":{\r\n                \"AssumeRolePolicyDocument\":{\r\n                   \"Statement\":[\r\n                      {\r\n                         \"Effect\":\"Allow\",\r\n                         \"Principal\":{\r\n                            \"Service\":[\r\n                               \"ec2.amazonaws.com\"\r\n                            ]\r\n                         },\r\n                         \"Action\":[\r\n                            \"sts:AssumeRole\"\r\n                         ]\r\n                      }\r\n                   ]\r\n                },\r\n                \"Path\":\"/\"\r\n             }\r\n          },\r\n          \"UserData\":{\r\n             \"Fn::Base64\":{\r\n                \"Fn::Join\":[\r\n                   \",\",\r\n                   [\r\n                      \"#!/bin/bash -xe\",\r\n                      \"/bin/touch /tmp/confirm_work.txt\"\r\n                   ]\r\n                ]\r\n             }\r\n          },\r\n          \"CFNRolePolicy\":{\r\n             \"Type\":\"AWS::IAM::Policy\",\r\n             \"Properties\":{\r\n                \"PolicyName\":\"CloudFormerPolicy\",\r\n                \"PolicyDocument\":{\r\n                   \"Statement\":[\r\n                      {\r\n                         \"Effect\":\"Allow\",\r\n                         \"Action\":[\r\n                            \"autoscaling:Describe*\",\r\n                            \"cloudfront:List*\",\r\n                            \"cloudwatch:Describe*\",\r\n                            \"dynamodb:List*\",\r\n                            \"dynamodb:Describe*\",\r\n                            \"ec2:Describe*\",\r\n                            \"elasticloadbalancing:Describe*\",\r\n                            \"elasticache:Describe*\",\r\n                            \"rds:Describe*\",\r\n                            \"rds:List*\",\r\n                            \"route53:List*\",\r\n                            \"s3:List*\",\r\n                            \"s3:Get*\",\r\n                            \"s3:PutObject\",\r\n                            \"sdb:Get*\",\r\n                            \"sdb:List*\",\r\n                            \"sns:Get*\",\r\n                            \"sns:List*\",\r\n                            \"sqs:Get*\",\r\n                            \"sqs:List*\"\r\n                         ],\r\n                         \"Resource\":\"*\"\r\n                      }\r\n                   ]\r\n                },\r\n                \"Roles\":[\r\n                   {\r\n                      \"Ref\":\"CFNRole\"\r\n                   }\r\n                ]\r\n             }\r\n          },\r\n          \"CFNInstanceProfile\":{\r\n             \"Type\":\"AWS::IAM::InstanceProfile\",\r\n             \"Properties\":{\r\n                \"Path\":\"/\",\r\n                \"Roles\":[\r\n                   {\r\n                      \"Ref\":\"CFNRole\"\r\n                   }\r\n                ]\r\n             }\r\n          },\r\n          \"WebServer\":{\r\n             \"Type\":\"AWS::EC2::Instance\",\r\n             \"Properties\":{\r\n                \"InstanceType\":\"t1.micro\",\r\n                \"SecurityGroups\":[\r\n                   {\r\n                      \"Ref\":\"InstanceSecurityGroup\"\r\n                   }\r\n                ],\r\n                \"ImageId\":{\r\n                   \"Fn::FindInMap\":[\r\n                      \"RegionMap\",\r\n                      {\r\n                         \"Ref\":\"AWS::Region\"\r\n                      },\r\n                      \"AMI\"\r\n                   ]\r\n                },\r\n                \"IamInstanceProfile\":{\r\n                   \"Ref\":\"CFNInstanceProfile\"\r\n                }\r\n             }\r\n          },\r\n          \"InstanceSecurityGroup\":{\r\n             \"Type\":\"AWS::EC2::SecurityGroup\",\r\n             \"Properties\":{\r\n                \"GroupDescription\":\"Enable Access via port 80\",\r\n                \"SecurityGroupIngress\":[\r\n                   {\r\n                      \"IpProtocol\":\"tcp\",\r\n                      \"FromPort\":\"80\",\r\n                      \"ToPort\":\"80\",\r\n                      \"CidrIp\":{\r\n                         \"Ref\":\"AccessControl\"\r\n                      }\r\n                   }\r\n                ]\r\n             }\r\n          }\r\n       },\r\n       \"Outputs\":{\r\n          \"URL\":{\r\n             \"Description\":\"AWS CloudFormer Prototype URL. Use this endpoint to create templates from your account.\",\r\n             \"Value\":{\r\n                \"Fn::Join\":[\r\n                   \"\",\r\n                   [\r\n                      \"http://\",\r\n                      {\r\n                         \"Fn::GetAtt\":[\r\n                            \"WebServer\",\r\n                            \"PublicDnsName\"\r\n                         ]\r\n                      }\r\n                   ]\r\n                ]\r\n             }\r\n          }\r\n       }\r\n    }\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "This is a valid JSON file, please let me know any issue with the JSON file \"Resources\":{ \"EC2Instance\":{ \"Type\":\"AWS::EC2::Instance\", \"Properties\":{ \"InstanceType\":{ \"Ref\":\"InstanceType\" }, \"SecurityGroups\":[ { \"Ref\":\"InstanceSecurityGroup\" } ], \"KeyName\":{ \"Ref\":\"KeyName\" }, \"UserData\":{ \"Fn::Base64\":{ \"Fn::Join\":[ \"\", [ \"#!/bin/bash \\n\", \"sudo apt-get update \\n\", \"sudo apt-get install wget python -y \\n\", \"echo UD_OF_EC2_1 >> /var/log/user-data.log \\n\", \"echo UD_OF_EC2_2 >> /var/log/user-data.log \\n\", \"echo UD_OF_EC2_3 >> /var/log/user-data.log \\n\" ] ] } }, The minimal reproducible example for scenario I am attaching please verify this template what is the problem ?? ", "keywords": ["instance"]}, {"source": "Text", "text": "This template creates a single t1.micro instance in your account to run the application - you will be billed for the instance at normal AWS EC2 rates for the t1.micro.\", \"Parameters\":{ \"AccessControl\":{ \"Description\":\" ", "keywords": ["bill", "instance"]}, {"source": "Text", "text": "}, \"sa-east-1\":{ \"AMI\":\"ami-592d8c44\" }, \"us-gov-west-1\":{ \"AMI\":\"ami-23c1a500\" } } }, \"Resources\":{ \"CFNRole\":{ \"Type\":\"AWS::IAM::Role\", \"Properties\":{ \"AssumeRolePolicyDocument\":{ \"Statement\":[ { \"Effect\":\"Allow\", \"Principal\":{ \"Service\":[ \"ec2.amazonaws.com\" ] }, \"Action\":[ \"sts:AssumeRole\" ] } ] }, \"Path\":\"/\" } }, \"UserData\":{ \"Fn::Base64\":{ \"Fn::Join\":[ \",\", [ \"#!/bin/bash -xe\", \"/bin/touch /tmp/confirm_work.txt\" ] ] } }, \"CFNRolePolicy\":{ \"Type\":\"AWS::IAM::Policy\", \"Properties\":{ \"PolicyName\":\"CloudFormerPolicy\", \"PolicyDocument\":{ \"Statement\":[ { \"Effect\":\"Allow\", \"Action\":[ \"autoscaling:Describe*\", \"cloudfront:List*\", \"cloudwatch:Describe*\", \"dynamodb:List*\", \"dynamodb:Describe*\", \"ec2:Describe*\", \"elasticloadbalancing:Describe*\", \"elasticache:Describe*\", \"rds:Describe*\", \"rds:List*\", \"route53:List*\", \"s3:List*\", \"s3:Get*\", \"s3:PutObject\", \"sdb:Get*\", \"sdb:List*\", \"sns:Get*\", \"sns:List*\", \"sqs:Get*\", \"sqs:List*\" ], \"Resource\":\"*\" } ] }, \"Roles\":[ { \"Ref\":\"CFNRole\" } ] } }, \"CFNInstanceProfile\":{ \"Type\":\"AWS::IAM::InstanceProfile\", \"Properties\":{ \"Path\":\"/\", \"Roles\":[ { \"Ref\":\"CFNRole\" ", "keywords": ["policy"]}, {"source": "Text", "text": "} ] } }, \"WebServer\":{ \"Type\":\"AWS::EC2::Instance\", \"Properties\":{ \"InstanceType\":\"t1.micro\", \"SecurityGroups\":[ { \"Ref\":\"InstanceSecurityGroup\" } ], \"ImageId\":{ \"Fn::FindInMap\":[ \"RegionMap\", { \"Ref\":\"AWS::Region\" }, \"AMI\" ] }, \"IamInstanceProfile\":{ \"Ref\":\"CFNInstanceProfile\" } } }, \"InstanceSecurityGroup\":{ \"Type\":\"AWS::EC2::SecurityGroup\", \"Properties\":{ \"GroupDescription\":\"Enable Access via port 80\", \"SecurityGroupIngress\":[ { \"IpProtocol\":\"tcp\", \"FromPort\":\"80\", \"ToPort\":\"80\", \"CidrIp\":{ \"Ref\":\"AccessControl\" } } ] } } }, \"Outputs\":{ \"URL\":{ \"Description\":\"AWS CloudFormer Prototype URL. Use this endpoint to create templates from your account", "keywords": ["instance"]}]}, {"Id": "203937247", "PostHistoryTypeId": "6", "PostId": "57563631", "RevisionGUID": "e7b8c497-4869-4a14-a88a-ad58a2317b22", "CreationDate": "2019-08-22T03:54:26.457", "UserId": "2591123", "Comment": "edited tags", "Text": "|amazon-web-services|amazon-ec2|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}