{"Id": "51928834", "PostTypeId": "1", "CreationDate": "2018-08-20T10:31:37.883", "Score": "3", "ViewCount": "11786", "Body": "<p>I am getting </p>\n\n<blockquote>\n  <p>API: s3:CreateBucket Access Denied</p>\n</blockquote>\n\n<p>in CloudFormation template, but when I try the same code to create the S3 bucket, in another barebones template, it works</p>\n\n<pre><code>AWSTemplateFormatVersion : '2010-09-09'\nTransform: AWS::Serverless-2016-10-31\nDescription: 'Testing'\n\nParameters:\n  TagCostCenter:\n    Type: String\n  TagDeveloper:\n    Type: String\n  TagProject:\n    Type: String\n\nResources:\n  S3Artifacts:\n    Type: AWS::S3::Bucket\n    Properties:\n      BucketName: !Sub ${AWS::StackName}-artifacts\n      AccessControl: Private\n      Tags:\n        - Key: Cost Center\n          Value: !Ref TagCostCenter\n        - Key: Developer\n          Value: !Ref TagDeveloper\n        - Key: Project\n          Value: !Ref TagProject\n</code></pre>\n\n<p>What is wrong? The stack used to work, all I did was add in the S3 bucket</p>\n", "OwnerUserId": "292291", "LastEditorUserId": "292291", "LastEditDate": "2018-08-20T10:55:57.583", "LastActivityDate": "2022-11-29T04:20:27.850", "Title": "Cloudformation: API: s3:CreateBucket Access Denied", "Tags": "|amazon-web-services|amazon-s3|aws-cloudformation|", "AnswerCount": "3", "CommentCount": "4", "FavoriteCount": "0", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "97056377", "PostId": "51928834", "Score": "0", "Text": "Did you solve this?", "CreationDate": "2019-03-14T09:09:12.607", "UserId": "799275", "filtered-sentences": []}, {"Id": "97124366", "PostId": "51928834", "Score": "0", "Text": "@ChrisPaton I cant remember specifically, but perhaps yes. Can you check if your user or the role CloudFormation runs in has the CreateBucket permission?", "CreationDate": "2019-03-16T03:25:04.600", "UserId": "292291", "filtered-sentences": []}, {"Id": "97264565", "PostId": "51928834", "Score": "0", "Text": "Yeah I had that permission. I think it had to do with ACL permissions, etc. I just added admin in the end. Will revisit at some stage but the error is misleading as I needed permissions involved in creating a bucket (ACL, CORS, etc.) but not specifically s3:CreateBucket.", "CreationDate": "2019-03-20T17:16:48.377", "UserId": "799275", "filtered-sentences": []}, {"Id": "99148347", "PostId": "51928834", "Score": "0", "Text": "@JiewMeng any solution for this?", "CreationDate": "2019-05-22T23:07:44.140", "UserId": "4525819", "filtered-sentences": []}], "history": [{"Id": "180095052", "PostHistoryTypeId": "2", "PostId": "51928834", "RevisionGUID": "bdf90305-8630-42f2-99da-a3e234722305", "CreationDate": "2018-08-20T10:31:37.883", "UserId": "292291", "Text": "I am getting \r\n\r\n> API: s3:CreateBucket Access Denied\r\n\r\nBut when I try the same code to create the S3 bucket, in another barebones template, it works\r\n\r\n    AWSTemplateFormatVersion : '2010-09-09'\r\n    Transform: AWS::Serverless-2016-10-31\r\n    Description: 'Testing'\r\n    \r\n    Parameters:\r\n      TagCostCenter:\r\n        Type: String\r\n      TagDeveloper:\r\n        Type: String\r\n      TagProject:\r\n        Type: String\r\n    \r\n    Resources:\r\n      S3Artifacts:\r\n        Type: AWS::S3::Bucket\r\n        Properties:\r\n          BucketName: !Sub ${AWS::StackName}-artifacts\r\n          AccessControl: Private\r\n          Tags:\r\n            - Key: Cost Center\r\n              Value: !Ref TagCostCenter\r\n            - Key: Developer\r\n              Value: !Ref TagDeveloper\r\n            - Key: Project\r\n              Value: !Ref TagProject\r\n\r\nWhat is wrong? The stack used to work, all I did was add in the S3 bucket", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am getting > API: s3:CreateBucket Access Denied But when I try the same code to create the S3 bucket, in another barebones template, it works AWSTemplateFormatVersion : '2010-09-09' Transform: AWS::Serverless-2016-10-31 Description: 'Testing' Parameters: TagCostCenter: Type: String TagDeveloper: Type: String TagProject: Type: String Resources: S3Artifacts: Type: AWS::S3::Bucket Properties: BucketName: !Sub ${AWS::StackName}-artifacts AccessControl: Private Tags: - Key: Cost Center Value: !Ref TagCostCenter - Key: Developer Value: !Ref TagDeveloper - Key: Project Value: !Ref TagProject What is wrong? The stack used to work, all I did was add in the S3 bucket", "keywords": ["cost", "test"]}]}, {"Id": "180095053", "PostHistoryTypeId": "1", "PostId": "51928834", "RevisionGUID": "bdf90305-8630-42f2-99da-a3e234722305", "CreationDate": "2018-08-20T10:31:37.883", "UserId": "292291", "Text": "Cloudformation: API: s3:CreateBucket Access Denied", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "180095054", "PostHistoryTypeId": "3", "PostId": "51928834", "RevisionGUID": "bdf90305-8630-42f2-99da-a3e234722305", "CreationDate": "2018-08-20T10:31:37.883", "UserId": "292291", "Text": "|amazon-web-services|amazon-s3|aws-cloudformation|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "180096640", "PostHistoryTypeId": "5", "PostId": "51928834", "RevisionGUID": "efbdbe99-7f41-4f8f-8ac5-54a9b955fbdc", "CreationDate": "2018-08-20T10:55:57.583", "UserId": "292291", "Comment": "added 28 characters in body", "Text": "I am getting \r\n\r\n> API: s3:CreateBucket Access Denied\r\n\r\nin CloudFormation template, but when I try the same code to create the S3 bucket, in another barebones template, it works\r\n\r\n    AWSTemplateFormatVersion : '2010-09-09'\r\n    Transform: AWS::Serverless-2016-10-31\r\n    Description: 'Testing'\r\n    \r\n    Parameters:\r\n      TagCostCenter:\r\n        Type: String\r\n      TagDeveloper:\r\n        Type: String\r\n      TagProject:\r\n        Type: String\r\n    \r\n    Resources:\r\n      S3Artifacts:\r\n        Type: AWS::S3::Bucket\r\n        Properties:\r\n          BucketName: !Sub ${AWS::StackName}-artifacts\r\n          AccessControl: Private\r\n          Tags:\r\n            - Key: Cost Center\r\n              Value: !Ref TagCostCenter\r\n            - Key: Developer\r\n              Value: !Ref TagDeveloper\r\n            - Key: Project\r\n              Value: !Ref TagProject\r\n\r\nWhat is wrong? The stack used to work, all I did was add in the S3 bucket", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I am getting > API: s3:CreateBucket Access Denied in CloudFormation template, but when I try the same code to create the S3 bucket, in another barebones template, it works AWSTemplateFormatVersion : '2010-09-09' Transform: AWS::Serverless-2016-10-31 Description: 'Testing' Parameters: TagCostCenter: Type: String TagDeveloper: Type: String TagProject: Type: String Resources: S3Artifacts: Type: AWS::S3::Bucket Properties: BucketName: !Sub ${AWS::StackName}-artifacts AccessControl: Private Tags: - Key: Cost Center Value: !Ref TagCostCenter - Key: Developer Value: !Ref TagDeveloper - Key: Project Value: !Ref TagProject What is wrong? The stack used to work, all I did was add in the S3 bucket", "keywords": ["cost", "test"]}]}], "answers": [{"Id": "51929354", "PostTypeId": "2", "ParentId": "51928834", "CreationDate": "2018-08-20T11:03:39.420", "Score": "2", "Body": "<p>You should have permission to create S3 bucket. Add <code>CreateBucket</code> policy to your IAM user.</p>\n", "OwnerUserId": "4745154", "LastActivityDate": "2018-08-20T11:03:39.420", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "90808343", "PostId": "51929354", "Score": "2", "Text": "I do have I can create the S3 bucket if I do it in another CloudFormation template ... not sure why ... I dont expect other resources in CloudFormation template to affect the results of this? Esp, since its an access denied error", "CreationDate": "2018-08-20T11:06:17.563", "UserId": "292291", "filtered-sentences": []}], "history": [{"Id": "180097198", "PostHistoryTypeId": "2", "PostId": "51929354", "RevisionGUID": "47000589-8f43-4c92-8dae-ed83a86e0eb8", "CreationDate": "2018-08-20T11:03:39.420", "UserId": "4745154", "Text": "You should have permission to create S3 bucket. Add `CreateBucket` policy to your IAM user.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Add `CreateBucket` policy to your IAM user.", "keywords": ["policy"]}]}], "filtered-sentences": [{"source": "Body", "text": "Add CreateBucket policy to your IAM user.", "keywords": ["policy"]}]}, {"Id": "64647223", "PostTypeId": "2", "ParentId": "51928834", "CreationDate": "2020-11-02T14:15:37.733", "Score": "0", "Body": "<p>I encountered the error because the IAM role that I was using had a policy that had a <em><strong>CreateBucket</strong></em> action but the action was referencing the wrong <em><strong>Resource</strong></em>. I added the action to the right resource and the error was solved.</p>\n", "OwnerUserId": "3771015", "LastActivityDate": "2020-11-02T14:15:37.733", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "234091632", "PostHistoryTypeId": "2", "PostId": "64647223", "RevisionGUID": "4d02d5d3-b33c-4480-aebd-5d83912c24af", "CreationDate": "2020-11-02T14:15:37.733", "UserId": "3771015", "Text": "I encountered the error because the IAM role that I was using had a policy that had a ***CreateBucket*** action but the action was referencing the wrong ***Resource***. I added the action to the right resource and the error was solved.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "I encountered the error because the IAM role that I was using had a policy that had a ***CreateBucket*** action but the action was referencing the wrong ***Resource***. ", "keywords": ["policy"]}]}], "filtered-sentences": [{"source": "Body", "text": "I encountered the error because the IAM role that I was using had a policy that had a CreateBucket action but the action was referencing the wrong Resource. ", "keywords": ["policy"]}]}, {"Id": "74609132", "PostTypeId": "2", "ParentId": "51928834", "CreationDate": "2022-11-29T04:20:27.850", "Score": "1", "Body": "<p>Try adding the s3:PutBucketAcl permission.  Worked for me.</p>\n", "OwnerUserId": "20629442", "LastActivityDate": "2022-11-29T04:20:27.850", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "283201098", "PostHistoryTypeId": "2", "PostId": "74609132", "RevisionGUID": "7b8d316d-dc6e-4c0f-93af-671d091ab518", "CreationDate": "2022-11-29T04:20:27.850", "UserId": "20629442", "Text": "Try adding the s3:PutBucketAcl permission.  Worked for me.", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}