{"Id": "70399646", "PostTypeId": "1", "AcceptedAnswerId": "70400348", "CreationDate": "2021-12-17T22:57:40.850", "Score": "2", "ViewCount": "398", "Body": "<p>I am currently trying to wrap my head around how to use AWS CloudFormation service. This might be a really simple question, but I think it is very hard to understand the platform so far.\nI followed Amazon's tutorial on how to create a basic web server. Going off the final template from there, I want to modify it to enable a user-defined VPC IP range. For this, I tried to add a VPC CIDR Block property, as well as modify the PublicSubnet settings to get a /24 subnet from the block property, but when trying to create a stack I get the following error message:</p>\n<p><img src=\"https://i.stack.imgur.com/hdaVq.png\" alt=\"https://i.stack.imgur.com/hdaVq.png\" /></p>\n<p>Here's the template I am trying to use:</p>\n<pre><code>{\n    &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,\n    &quot;Description&quot;: &quot;AWS CloudFormation Sample Template VPC_Single_Instance_In_Subnet: Sample template showing how to create a VPC and add an EC2 instance with an Elastic IP address and a security group. **WARNING** This template creates an Amazon EC2 instance. You will be billed for the AWS resources used if you create a stack from this template.&quot;,\n    &quot;Parameters&quot;: {\n        &quot;InstanceType&quot;: {\n            &quot;Description&quot;: &quot;WebServer EC2 instance type&quot;,\n            &quot;Type&quot;: &quot;String&quot;,\n            &quot;Default&quot;: &quot;t2.micro&quot;,\n            &quot;AllowedValues&quot;: [\n                &quot;t1.micro&quot;,\n                &quot;t2.micro&quot;,\n                &quot;t2.small&quot;,\n                &quot;t2.medium&quot;\n            ],\n            &quot;ConstraintDescription&quot;: &quot;must be a valid EC2 instance type.&quot;\n        },\n        &quot;KeyName&quot;: {\n            &quot;Description&quot;: &quot;Name of an existing EC2 KeyPair to enable SSH access to the instance.&quot;,\n            &quot;Type&quot;: &quot;AWS::EC2::KeyPair::KeyName&quot;,\n            &quot;ConstraintDescription&quot;: &quot;must be the name of an existing EC2 KeyPair.&quot;\n        },\n        &quot;SSHLocation&quot;: {\n            &quot;Description&quot;: &quot; The IP address range that can be used access the web server using SSH.&quot;,\n            &quot;Type&quot;: &quot;String&quot;,\n            &quot;MinLength&quot;: &quot;9&quot;,\n            &quot;MaxLength&quot;: &quot;18&quot;,\n            &quot;Default&quot;: &quot;0.0.0.0/0&quot;,\n            &quot;AllowedPattern&quot;: &quot;(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})&quot;,\n            &quot;ConstraintDescription&quot;: &quot;must be a valid IP CIDR range of the form x.x.x.x/x.&quot;\n        }\n    },\n    &quot;Mappings&quot;: {\n        &quot;AWSInstanceType2Arch&quot;: {\n            &quot;t1.micro&quot;: {&quot;Arch&quot;: &quot;PV64&quot;},\n            &quot;t2.micro&quot;: {&quot;Arch&quot;: &quot;HVM64&quot;},\n            &quot;t2.small&quot;: {&quot;Arch&quot;: &quot;HVM64&quot;},\n            &quot;t2.medium&quot;: {&quot;Arch&quot;: &quot;HVM64&quot;}\n        },\n        &quot;AWSRegionArch2AMI&quot;: {\n            &quot;us-east-1&quot;: {\n                &quot;PV64&quot;: &quot;ami-1ccae774&quot;,\n                &quot;HVM64&quot;: &quot;ami-1ecae776&quot;,\n                &quot;HVMG2&quot;: &quot;ami-8c6b40e4&quot;\n            }\n        }\n    },\n    &quot;Resources&quot;: {\n        &quot;VPC&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::VPC&quot;,\n            &quot;Properties&quot;: {\n                &quot;EnableDnsSupport&quot;: &quot;true&quot;,\n                &quot;EnableDnsHostnames&quot;: &quot;true&quot;,\n                &quot;CidrBlock&quot;: &quot;10.0.0.0/16&quot;\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;96a791f0-938b-4ebe-9f3c-b3fe2a588aee&quot;}\n            }\n        },\n        &quot;VpcCidrBlock&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::VPCCidrBlock&quot;,\n            &quot;Properties&quot;: {\n                &quot;VpcId&quot;: {&quot;Ref&quot;: &quot;VPC&quot;},\n                &quot;CidrBlock&quot;: &quot;10.0.0.0/16&quot;\n            }\n        },\n        &quot;PublicSubnet&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::Subnet&quot;,\n            &quot;Properties&quot;: {\n                &quot;CidrBlock&quot;: { &quot;Fn::Select&quot; : [ &quot;0&quot;, { &quot;Fn::Cidr&quot; : [&quot;10.0.0.0/24&quot;, 1, 8 ]}]},\n                &quot;VpcId&quot;: {&quot;Ref&quot;: &quot;VPC&quot;}\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;3df467ad-673c-4c48-a41c-3ac1626961e3&quot;}\n            }\n        },\n        &quot;InternetGateway&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::InternetGateway&quot;,\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;a166c4f5-7cc4-429b-b9d8-2c8c43facc63&quot;}\n            }\n        },\n        &quot;VPCGatewayAttachment&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::VPCGatewayAttachment&quot;,\n            &quot;Properties&quot;: {\n                &quot;VpcId&quot;: {&quot;Ref&quot;: &quot;VPC&quot;},\n                &quot;InternetGatewayId&quot;: {&quot;Ref&quot;: &quot;InternetGateway&quot;}\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;1790ebeb-2e41-4293-8cc1-aaba134fd1e0&quot;}\n            }\n        },\n        &quot;PublicRouteTable&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::RouteTable&quot;,\n            &quot;Properties&quot;: {\n                &quot;VpcId&quot;: {&quot;Ref&quot;: &quot;VPC&quot;}\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;175bad80-0988-4588-a919-331be705b02d&quot;}\n            }\n        },\n        &quot;PublicRoute&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::Route&quot;,\n            &quot;DependsOn&quot;: &quot;VPCGatewayAttachment&quot;,\n            &quot;Properties&quot;: {\n                &quot;RouteTableId&quot;: {&quot;Ref&quot;: &quot;PublicRouteTable&quot;},\n                &quot;DestinationCidrBlock&quot;: &quot;0.0.0.0/0&quot;,\n                &quot;GatewayId&quot;: {&quot;Ref&quot;: &quot;InternetGateway&quot;}\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;143bbaa1-66a2-42a5-885f-e6300817103c&quot;}\n            }\n        },\n        &quot;PublicSubnetRouteTableAssociation&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::SubnetRouteTableAssociation&quot;,\n            &quot;Properties&quot;: {\n                &quot;SubnetId&quot;: {&quot;Ref&quot;: &quot;PublicSubnet&quot;},\n                &quot;RouteTableId&quot;: {&quot;Ref&quot;: &quot;PublicRouteTable&quot;}\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;528e2b71-46e6-4e09-815a-f70630755219&quot;}\n            }\n        },\n        &quot;WebServerSecurityGroup&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::SecurityGroup&quot;,\n            &quot;Properties&quot;: {\n                &quot;VpcId&quot;: {&quot;Ref&quot;: &quot;VPC&quot;},\n                &quot;GroupDescription&quot;: &quot;Allow access from HTTP and SSH traffic&quot;,\n                &quot;SecurityGroupIngress&quot;: [\n                    {\n                        &quot;IpProtocol&quot;: &quot;tcp&quot;,\n                        &quot;FromPort&quot;: &quot;80&quot;,\n                        &quot;ToPort&quot;: &quot;80&quot;,\n                        &quot;CidrIp&quot;: &quot;0.0.0.0/0&quot;\n                    },\n                    {\n                        &quot;IpProtocol&quot;: &quot;tcp&quot;,\n                        &quot;FromPort&quot;: &quot;22&quot;,\n                        &quot;ToPort&quot;: &quot;22&quot;,\n                        &quot;CidrIp&quot;: {&quot;Ref&quot;: &quot;SSHLocation&quot;}\n                    }\n                ]\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;2e76192b-a4f8-48a5-92b6-abbfa8b83263&quot;}\n            }\n        },\n        &quot;WebServerInstance&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::Instance&quot;,\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Init&quot;: {\n                    &quot;configSets&quot;: {\n                        &quot;All&quot;: [&quot;ConfigureSampleApp&quot;]\n                    },\n                    &quot;ConfigureSampleApp&quot;: {\n                        &quot;packages&quot;: {\n                            &quot;yum&quot;: {\n                                &quot;httpd&quot;: []\n                            }\n                        },\n                        &quot;files&quot;: {\n                            &quot;/var/www/html/index.html&quot;: {\n                                &quot;content&quot;: {\n                                    &quot;Fn::Join&quot;: [\n                                        &quot;\\n&quot;,\n                                        [&quot;&lt;h1&gt;Congratulations, you have successfully launched the AWS CloudFormation sample.&lt;/h1&gt;&quot;]\n                                    ]\n                                },\n                                &quot;mode&quot;: &quot;000644&quot;,\n                                &quot;owner&quot;: &quot;root&quot;,\n                                &quot;group&quot;: &quot;root&quot;\n                            }\n                        },\n                        &quot;services&quot;: {\n                            &quot;sysvinit&quot;: {\n                                &quot;httpd&quot;: {\n                                    &quot;enabled&quot;: &quot;true&quot;,\n                                    &quot;ensureRunning&quot;: &quot;true&quot;\n                                }\n                            }\n                        }\n                    }\n                },\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;0f900c9e-1272-4ec2-8a42-790b074baa39&quot;}\n            },\n            &quot;Properties&quot;: {\n                &quot;InstanceType&quot;: {&quot;Ref&quot;: &quot;InstanceType&quot;},\n                &quot;ImageId&quot;: {\n                    &quot;Fn::FindInMap&quot;: [\n                        &quot;AWSRegionArch2AMI&quot;,\n                        {&quot;Ref&quot;: &quot;AWS::Region&quot;},\n                        {\n                            &quot;Fn::FindInMap&quot;: [\n                                &quot;AWSInstanceType2Arch&quot;,\n                                {&quot;Ref&quot;: &quot;InstanceType&quot;},\n                                &quot;Arch&quot;\n                            ]\n                        }\n                    ]\n                },\n                &quot;KeyName&quot;: {&quot;Ref&quot;: &quot;KeyName&quot;},\n                &quot;NetworkInterfaces&quot;: [\n                    {\n                        &quot;GroupSet&quot;: [\n                            {&quot;Ref&quot;: &quot;WebServerSecurityGroup&quot;}\n                        ],\n                        &quot;AssociatePublicIpAddress&quot;: &quot;true&quot;,\n                        &quot;DeviceIndex&quot;: &quot;0&quot;,\n                        &quot;DeleteOnTermination&quot;: &quot;true&quot;,\n                        &quot;SubnetId&quot;: {&quot;Ref&quot;: &quot;PublicSubnet&quot;}\n                    }\n                ],\n                &quot;UserData&quot;: {\n                    &quot;Fn::Base64&quot;: {\n                        &quot;Fn::Join&quot;: [\n                            &quot;&quot;,\n                            [\n                                &quot;#!/bin/bash -xe\\n&quot;,\n                                &quot;yum update -y aws-cfn-bootstrap\\n&quot;,\n                                &quot;# Install the files and packages from the metadata\\n&quot;,\n                                &quot;/opt/aws/bin/cfn-init -v &quot;,\n                                &quot;         --stack &quot;,\n                                {&quot;Ref&quot;: &quot;AWS::StackName&quot;},\n                                &quot;         --resource WebServerInstance &quot;,\n                                &quot;         --configsets All &quot;,\n                                &quot;         --region &quot;,\n                                {&quot;Ref&quot;: &quot;AWS::Region&quot;},\n                                &quot;\\n&quot;,\n                                &quot;# Signal the status from cfn-init\\n&quot;,\n                                &quot;/opt/aws/bin/cfn-signal -e $? &quot;,\n                                &quot;         --stack &quot;,\n                                {&quot;Ref&quot;: &quot;AWS::StackName&quot;},\n                                &quot;         --resource WebServerInstance &quot;,\n                                &quot;         --region &quot;,\n                                {&quot;Ref&quot;: &quot;AWS::Region&quot;},\n                                &quot;\\n&quot;\n                            ]\n                        ]\n                    }\n                }\n            },\n            &quot;CreationPolicy&quot;: {\n                &quot;ResourceSignal&quot;: {&quot;Timeout&quot;: &quot;PT5M&quot;}\n            }\n        }\n    },\n    &quot;Outputs&quot;: {\n        &quot;URL&quot;: {\n            &quot;Value&quot;: {\n                &quot;Fn::Join&quot;: [\n                    &quot;&quot;,\n                    [\n                        &quot;http://&quot;,\n                        {\n                            &quot;Fn::GetAtt&quot;: [\n                                &quot;WebServerInstance&quot;,\n                                &quot;PublicIp&quot;\n                            ]\n                        }\n                    ]\n                ]\n            },\n            &quot;Description&quot;: &quot;Newly created application URL&quot;\n        },\n        &quot;SubnetCIDR&quot;: {\n            &quot;Value&quot;: {&quot;Ref&quot;: &quot;PublicSubnet&quot;},\n            &quot;Description&quot;: &quot;Subnet for the application&quot;\n        }\n    },\n    &quot;Metadata&quot;: {\n        &quot;AWS::CloudFormation::Designer&quot;: {\n            &quot;a166c4f5-7cc4-429b-b9d8-2c8c43facc63&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 60,\n                    &quot;height&quot;: 60\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: -40,\n                    &quot;y&quot;: 210\n                },\n                &quot;z&quot;: 1,\n                &quot;embeds&quot;: []\n            },\n            &quot;96a791f0-938b-4ebe-9f3c-b3fe2a588aee&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 320,\n                    &quot;height&quot;: 250\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: 70,\n                    &quot;y&quot;: 190\n                },\n                &quot;z&quot;: 1,\n                &quot;embeds&quot;: [\n                    &quot;2e76192b-a4f8-48a5-92b6-abbfa8b83263&quot;,\n                    &quot;175bad80-0988-4588-a919-331be705b02d&quot;\n                ]\n            },\n            &quot;2e76192b-a4f8-48a5-92b6-abbfa8b83263&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 60,\n                    &quot;height&quot;: 60\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: 280,\n                    &quot;y&quot;: 370\n                },\n                &quot;z&quot;: 2,\n                &quot;parent&quot;: &quot;96a791f0-938b-4ebe-9f3c-b3fe2a588aee&quot;,\n                &quot;embeds&quot;: []\n            },\n            &quot;175bad80-0988-4588-a919-331be705b02d&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 120,\n                    &quot;height&quot;: 120\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: 90,\n                    &quot;y&quot;: 230\n                },\n                &quot;z&quot;: 2,\n                &quot;parent&quot;: &quot;96a791f0-938b-4ebe-9f3c-b3fe2a588aee&quot;,\n                &quot;embeds&quot;: [&quot;143bbaa1-66a2-42a5-885f-e6300817103c&quot;]\n            },\n            &quot;1790ebeb-2e41-4293-8cc1-aaba134fd1e0&quot;: {\n                &quot;source&quot;: {&quot;id&quot;: &quot;a166c4f5-7cc4-429b-b9d8-2c8c43facc63&quot;},\n                &quot;target&quot;: {&quot;id&quot;: &quot;96a791f0-938b-4ebe-9f3c-b3fe2a588aee&quot;},\n                &quot;z&quot;: 1\n            },\n            &quot;143bbaa1-66a2-42a5-885f-e6300817103c&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 60,\n                    &quot;height&quot;: 60\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: 120,\n                    &quot;y&quot;: 260\n                },\n                &quot;z&quot;: 3,\n                &quot;parent&quot;: &quot;175bad80-0988-4588-a919-331be705b02d&quot;,\n                &quot;embeds&quot;: [],\n                &quot;references&quot;: [&quot;a166c4f5-7cc4-429b-b9d8-2c8c43facc63&quot;],\n                &quot;dependson&quot;: [&quot;1790ebeb-2e41-4293-8cc1-aaba134fd1e0&quot;],\n                &quot;isrelatedto&quot;: [&quot;a166c4f5-7cc4-429b-b9d8-2c8c43facc63&quot;]\n            },\n            &quot;3df467ad-673c-4c48-a41c-3ac1626961e3&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 120,\n                    &quot;height&quot;: 120\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: 250,\n                    &quot;y&quot;: 230\n                },\n                &quot;z&quot;: 0,\n                &quot;embeds&quot;: [&quot;0f900c9e-1272-4ec2-8a42-790b074baa39&quot;]\n            },\n            &quot;0f900c9e-1272-4ec2-8a42-790b074baa39&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 60,\n                    &quot;height&quot;: 60\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: 280,\n                    &quot;y&quot;: 260\n                },\n                &quot;z&quot;: 3,\n                &quot;parent&quot;: &quot;3df467ad-673c-4c48-a41c-3ac1626961e3&quot;,\n                &quot;embeds&quot;: [],\n                &quot;isrelatedto&quot;: [&quot;2e76192b-a4f8-48a5-92b6-abbfa8b83263&quot;]\n            },\n            &quot;13e0e0da-40c9-45d0-8460-7732ed20d764&quot;: {\n                &quot;source&quot;: {&quot;id&quot;: &quot;96a791f0-938b-4ebe-9f3c-b3fe2a588aee&quot;},\n                &quot;target&quot;: {&quot;id&quot;: &quot;3df467ad-673c-4c48-a41c-3ac1626961e3&quot;},\n                &quot;z&quot;: 2\n            },\n            &quot;528e2b71-46e6-4e09-815a-f70630755219&quot;: {\n                &quot;source&quot;: {&quot;id&quot;: &quot;175bad80-0988-4588-a919-331be705b02d&quot;},\n                &quot;target&quot;: {&quot;id&quot;: &quot;3df467ad-673c-4c48-a41c-3ac1626961e3&quot;},\n                &quot;z&quot;: 2\n            }\n        }\n    }\n}\n</code></pre>\n", "OwnerUserId": "10931107", "LastEditorUserId": "174777", "LastEditDate": "2021-12-18T00:53:47.730", "LastActivityDate": "2021-12-18T01:23:26.813", "Title": "AWS Cloudformation CIDR block conflict", "Tags": "|amazon-web-services|cloud|aws-cloudformation|cidr|", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "260294782", "PostHistoryTypeId": "5", "PostId": "70399646", "RevisionGUID": "b5cebadb-ef46-4b8d-87b7-97ee76beaa4b", "CreationDate": "2021-12-18T00:53:47.730", "UserId": "174777", "Comment": "In-lined image", "Text": "I am currently trying to wrap my head around how to use AWS CloudFormation service. This might be a really simple question, but I think it is very hard to understand the platform so far.\r\nI followed Amazon's tutorial on how to create a basic web server. Going off the final template from there, I want to modify it to enable a user-defined VPC IP range. For this, I tried to add a VPC CIDR Block property, as well as modify the PublicSubnet settings to get a /24 subnet from the block property, but when trying to create a stack I get the following error message:\r\n\r\n![https://i.stack.imgur.com/hdaVq.png][1]\r\n\r\n  [1]: https://i.stack.imgur.com/hdaVq.png\r\n\r\nHere's the template I am trying to use:\r\n\r\n```\r\n{\r\n    \"AWSTemplateFormatVersion\": \"2010-09-09\",\r\n    \"Description\": \"AWS CloudFormation Sample Template VPC_Single_Instance_In_Subnet: Sample template showing how to create a VPC and add an EC2 instance with an Elastic IP address and a security group. **WARNING** This template creates an Amazon EC2 instance. You will be billed for the AWS resources used if you create a stack from this template.\",\r\n    \"Parameters\": {\r\n        \"InstanceType\": {\r\n            \"Description\": \"WebServer EC2 instance type\",\r\n            \"Type\": \"String\",\r\n            \"Default\": \"t2.micro\",\r\n            \"AllowedValues\": [\r\n                \"t1.micro\",\r\n                \"t2.micro\",\r\n                \"t2.small\",\r\n                \"t2.medium\"\r\n            ],\r\n            \"ConstraintDescription\": \"must be a valid EC2 instance type.\"\r\n        },\r\n        \"KeyName\": {\r\n            \"Description\": \"Name of an existing EC2 KeyPair to enable SSH access to the instance.\",\r\n            \"Type\": \"AWS::EC2::KeyPair::KeyName\",\r\n            \"ConstraintDescription\": \"must be the name of an existing EC2 KeyPair.\"\r\n        },\r\n        \"SSHLocation\": {\r\n            \"Description\": \" The IP address range that can be used access the web server using SSH.\",\r\n            \"Type\": \"String\",\r\n            \"MinLength\": \"9\",\r\n            \"MaxLength\": \"18\",\r\n            \"Default\": \"0.0.0.0/0\",\r\n            \"AllowedPattern\": \"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\",\r\n            \"ConstraintDescription\": \"must be a valid IP CIDR range of the form x.x.x.x/x.\"\r\n        }\r\n    },\r\n    \"Mappings\": {\r\n        \"AWSInstanceType2Arch\": {\r\n            \"t1.micro\": {\"Arch\": \"PV64\"},\r\n            \"t2.micro\": {\"Arch\": \"HVM64\"},\r\n            \"t2.small\": {\"Arch\": \"HVM64\"},\r\n            \"t2.medium\": {\"Arch\": \"HVM64\"}\r\n        },\r\n        \"AWSRegionArch2AMI\": {\r\n            \"us-east-1\": {\r\n                \"PV64\": \"ami-1ccae774\",\r\n                \"HVM64\": \"ami-1ecae776\",\r\n                \"HVMG2\": \"ami-8c6b40e4\"\r\n            }\r\n        }\r\n    },\r\n    \"Resources\": {\r\n        \"VPC\": {\r\n            \"Type\": \"AWS::EC2::VPC\",\r\n            \"Properties\": {\r\n                \"EnableDnsSupport\": \"true\",\r\n                \"EnableDnsHostnames\": \"true\",\r\n                \"CidrBlock\": \"10.0.0.0/16\"\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"}\r\n            }\r\n        },\r\n        \"VpcCidrBlock\": {\r\n            \"Type\": \"AWS::EC2::VPCCidrBlock\",\r\n            \"Properties\": {\r\n                \"VpcId\": {\"Ref\": \"VPC\"},\r\n                \"CidrBlock\": \"10.0.0.0/16\"\r\n            }\r\n        },\r\n        \"PublicSubnet\": {\r\n            \"Type\": \"AWS::EC2::Subnet\",\r\n            \"Properties\": {\r\n                \"CidrBlock\": { \"Fn::Select\" : [ \"0\", { \"Fn::Cidr\" : [\"10.0.0.0/24\", 1, 8 ]}]},\r\n                \"VpcId\": {\"Ref\": \"VPC\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"}\r\n            }\r\n        },\r\n        \"InternetGateway\": {\r\n            \"Type\": \"AWS::EC2::InternetGateway\",\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"}\r\n            }\r\n        },\r\n        \"VPCGatewayAttachment\": {\r\n            \"Type\": \"AWS::EC2::VPCGatewayAttachment\",\r\n            \"Properties\": {\r\n                \"VpcId\": {\"Ref\": \"VPC\"},\r\n                \"InternetGatewayId\": {\"Ref\": \"InternetGateway\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\"}\r\n            }\r\n        },\r\n        \"PublicRouteTable\": {\r\n            \"Type\": \"AWS::EC2::RouteTable\",\r\n            \"Properties\": {\r\n                \"VpcId\": {\"Ref\": \"VPC\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"175bad80-0988-4588-a919-331be705b02d\"}\r\n            }\r\n        },\r\n        \"PublicRoute\": {\r\n            \"Type\": \"AWS::EC2::Route\",\r\n            \"DependsOn\": \"VPCGatewayAttachment\",\r\n            \"Properties\": {\r\n                \"RouteTableId\": {\"Ref\": \"PublicRouteTable\"},\r\n                \"DestinationCidrBlock\": \"0.0.0.0/0\",\r\n                \"GatewayId\": {\"Ref\": \"InternetGateway\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"143bbaa1-66a2-42a5-885f-e6300817103c\"}\r\n            }\r\n        },\r\n        \"PublicSubnetRouteTableAssociation\": {\r\n            \"Type\": \"AWS::EC2::SubnetRouteTableAssociation\",\r\n            \"Properties\": {\r\n                \"SubnetId\": {\"Ref\": \"PublicSubnet\"},\r\n                \"RouteTableId\": {\"Ref\": \"PublicRouteTable\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"528e2b71-46e6-4e09-815a-f70630755219\"}\r\n            }\r\n        },\r\n        \"WebServerSecurityGroup\": {\r\n            \"Type\": \"AWS::EC2::SecurityGroup\",\r\n            \"Properties\": {\r\n                \"VpcId\": {\"Ref\": \"VPC\"},\r\n                \"GroupDescription\": \"Allow access from HTTP and SSH traffic\",\r\n                \"SecurityGroupIngress\": [\r\n                    {\r\n                        \"IpProtocol\": \"tcp\",\r\n                        \"FromPort\": \"80\",\r\n                        \"ToPort\": \"80\",\r\n                        \"CidrIp\": \"0.0.0.0/0\"\r\n                    },\r\n                    {\r\n                        \"IpProtocol\": \"tcp\",\r\n                        \"FromPort\": \"22\",\r\n                        \"ToPort\": \"22\",\r\n                        \"CidrIp\": {\"Ref\": \"SSHLocation\"}\r\n                    }\r\n                ]\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\"}\r\n            }\r\n        },\r\n        \"WebServerInstance\": {\r\n            \"Type\": \"AWS::EC2::Instance\",\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Init\": {\r\n                    \"configSets\": {\r\n                        \"All\": [\"ConfigureSampleApp\"]\r\n                    },\r\n                    \"ConfigureSampleApp\": {\r\n                        \"packages\": {\r\n                            \"yum\": {\r\n                                \"httpd\": []\r\n                            }\r\n                        },\r\n                        \"files\": {\r\n                            \"/var/www/html/index.html\": {\r\n                                \"content\": {\r\n                                    \"Fn::Join\": [\r\n                                        \"\\n\",\r\n                                        [\"<h1>Congratulations, you have successfully launched the AWS CloudFormation sample.</h1>\"]\r\n                                    ]\r\n                                },\r\n                                \"mode\": \"000644\",\r\n                                \"owner\": \"root\",\r\n                                \"group\": \"root\"\r\n                            }\r\n                        },\r\n                        \"services\": {\r\n                            \"sysvinit\": {\r\n                                \"httpd\": {\r\n                                    \"enabled\": \"true\",\r\n                                    \"ensureRunning\": \"true\"\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"0f900c9e-1272-4ec2-8a42-790b074baa39\"}\r\n            },\r\n            \"Properties\": {\r\n                \"InstanceType\": {\"Ref\": \"InstanceType\"},\r\n                \"ImageId\": {\r\n                    \"Fn::FindInMap\": [\r\n                        \"AWSRegionArch2AMI\",\r\n                        {\"Ref\": \"AWS::Region\"},\r\n                        {\r\n                            \"Fn::FindInMap\": [\r\n                                \"AWSInstanceType2Arch\",\r\n                                {\"Ref\": \"InstanceType\"},\r\n                                \"Arch\"\r\n                            ]\r\n                        }\r\n                    ]\r\n                },\r\n                \"KeyName\": {\"Ref\": \"KeyName\"},\r\n                \"NetworkInterfaces\": [\r\n                    {\r\n                        \"GroupSet\": [\r\n                            {\"Ref\": \"WebServerSecurityGroup\"}\r\n                        ],\r\n                        \"AssociatePublicIpAddress\": \"true\",\r\n                        \"DeviceIndex\": \"0\",\r\n                        \"DeleteOnTermination\": \"true\",\r\n                        \"SubnetId\": {\"Ref\": \"PublicSubnet\"}\r\n                    }\r\n                ],\r\n                \"UserData\": {\r\n                    \"Fn::Base64\": {\r\n                        \"Fn::Join\": [\r\n                            \"\",\r\n                            [\r\n                                \"#!/bin/bash -xe\\n\",\r\n                                \"yum update -y aws-cfn-bootstrap\\n\",\r\n                                \"# Install the files and packages from the metadata\\n\",\r\n                                \"/opt/aws/bin/cfn-init -v \",\r\n                                \"         --stack \",\r\n                                {\"Ref\": \"AWS::StackName\"},\r\n                                \"         --resource WebServerInstance \",\r\n                                \"         --configsets All \",\r\n                                \"         --region \",\r\n                                {\"Ref\": \"AWS::Region\"},\r\n                                \"\\n\",\r\n                                \"# Signal the status from cfn-init\\n\",\r\n                                \"/opt/aws/bin/cfn-signal -e $? \",\r\n                                \"         --stack \",\r\n                                {\"Ref\": \"AWS::StackName\"},\r\n                                \"         --resource WebServerInstance \",\r\n                                \"         --region \",\r\n                                {\"Ref\": \"AWS::Region\"},\r\n                                \"\\n\"\r\n                            ]\r\n                        ]\r\n                    }\r\n                }\r\n            },\r\n            \"CreationPolicy\": {\r\n                \"ResourceSignal\": {\"Timeout\": \"PT5M\"}\r\n            }\r\n        }\r\n    },\r\n    \"Outputs\": {\r\n        \"URL\": {\r\n            \"Value\": {\r\n                \"Fn::Join\": [\r\n                    \"\",\r\n                    [\r\n                        \"http://\",\r\n                        {\r\n                            \"Fn::GetAtt\": [\r\n                                \"WebServerInstance\",\r\n                                \"PublicIp\"\r\n                            ]\r\n                        }\r\n                    ]\r\n                ]\r\n            },\r\n            \"Description\": \"Newly created application URL\"\r\n        },\r\n        \"SubnetCIDR\": {\r\n            \"Value\": {\"Ref\": \"PublicSubnet\"},\r\n            \"Description\": \"Subnet for the application\"\r\n        }\r\n    },\r\n    \"Metadata\": {\r\n        \"AWS::CloudFormation::Designer\": {\r\n            \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\": {\r\n                \"size\": {\r\n                    \"width\": 60,\r\n                    \"height\": 60\r\n                },\r\n                \"position\": {\r\n                    \"x\": -40,\r\n                    \"y\": 210\r\n                },\r\n                \"z\": 1,\r\n                \"embeds\": []\r\n            },\r\n            \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\": {\r\n                \"size\": {\r\n                    \"width\": 320,\r\n                    \"height\": 250\r\n                },\r\n                \"position\": {\r\n                    \"x\": 70,\r\n                    \"y\": 190\r\n                },\r\n                \"z\": 1,\r\n                \"embeds\": [\r\n                    \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\",\r\n                    \"175bad80-0988-4588-a919-331be705b02d\"\r\n                ]\r\n            },\r\n            \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\": {\r\n                \"size\": {\r\n                    \"width\": 60,\r\n                    \"height\": 60\r\n                },\r\n                \"position\": {\r\n                    \"x\": 280,\r\n                    \"y\": 370\r\n                },\r\n                \"z\": 2,\r\n                \"parent\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\",\r\n                \"embeds\": []\r\n            },\r\n            \"175bad80-0988-4588-a919-331be705b02d\": {\r\n                \"size\": {\r\n                    \"width\": 120,\r\n                    \"height\": 120\r\n                },\r\n                \"position\": {\r\n                    \"x\": 90,\r\n                    \"y\": 230\r\n                },\r\n                \"z\": 2,\r\n                \"parent\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\",\r\n                \"embeds\": [\"143bbaa1-66a2-42a5-885f-e6300817103c\"]\r\n            },\r\n            \"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\": {\r\n                \"source\": {\"id\": \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"},\r\n                \"target\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"},\r\n                \"z\": 1\r\n            },\r\n            \"143bbaa1-66a2-42a5-885f-e6300817103c\": {\r\n                \"size\": {\r\n                    \"width\": 60,\r\n                    \"height\": 60\r\n                },\r\n                \"position\": {\r\n                    \"x\": 120,\r\n                    \"y\": 260\r\n                },\r\n                \"z\": 3,\r\n                \"parent\": \"175bad80-0988-4588-a919-331be705b02d\",\r\n                \"embeds\": [],\r\n                \"references\": [\"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"],\r\n                \"dependson\": [\"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\"],\r\n                \"isrelatedto\": [\"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"]\r\n            },\r\n            \"3df467ad-673c-4c48-a41c-3ac1626961e3\": {\r\n                \"size\": {\r\n                    \"width\": 120,\r\n                    \"height\": 120\r\n                },\r\n                \"position\": {\r\n                    \"x\": 250,\r\n                    \"y\": 230\r\n                },\r\n                \"z\": 0,\r\n                \"embeds\": [\"0f900c9e-1272-4ec2-8a42-790b074baa39\"]\r\n            },\r\n            \"0f900c9e-1272-4ec2-8a42-790b074baa39\": {\r\n                \"size\": {\r\n                    \"width\": 60,\r\n                    \"height\": 60\r\n                },\r\n                \"position\": {\r\n                    \"x\": 280,\r\n                    \"y\": 260\r\n                },\r\n                \"z\": 3,\r\n                \"parent\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\",\r\n                \"embeds\": [],\r\n                \"isrelatedto\": [\"2e76192b-a4f8-48a5-92b6-abbfa8b83263\"]\r\n            },\r\n            \"13e0e0da-40c9-45d0-8460-7732ed20d764\": {\r\n                \"source\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"},\r\n                \"target\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"},\r\n                \"z\": 2\r\n            },\r\n            \"528e2b71-46e6-4e09-815a-f70630755219\": {\r\n                \"source\": {\"id\": \"175bad80-0988-4588-a919-331be705b02d\"},\r\n                \"target\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"},\r\n                \"z\": 2\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "For this, I tried to add a VPC CIDR Block property, as well as modify the PublicSubnet settings to get a /24 subnet from the block property, but when trying to create a stack I get the following error message: ![https://i.stack.imgur.com/hdaVq.png][1] [1]: https://i.stack.imgur.com/hdaVq.png Here's the template I am trying to use: ``` { \"AWSTemplateFormatVersion\": \"2010-09-09\", \"Description\": \"AWS CloudFormation Sample Template VPC_Single_Instance_In_Subnet: Sample template showing how to create a VPC and add an EC2 instance with an Elastic IP address and a security group. ", "keywords": ["instance"]}, {"source": "Text", "text": "This template creates an Amazon EC2 instance. ", "keywords": ["instance"]}, {"source": "Text", "text": "You will be billed for the AWS resources used if you create a stack from this template.\", \"Parameters\": { \"InstanceType\": { \"Description\": \"WebServer EC2 instance type\", \"Type\": \"String\", \"Default\": \"t2.micro\", \"AllowedValues\": [ \"t1.micro\", \"t2.micro\", \"t2.small\", \"t2.medium\" ], \"ConstraintDescription\": \"must be a valid EC2 instance type.\" }, \"KeyName\": { \"Description\": \"Name of an existing EC2 KeyPair to enable SSH access to the instance.\", \"Type\": \"AWS::EC2::KeyPair::KeyName\", \"ConstraintDescription\": \"must be the name of an existing EC2 KeyPair.\" }, \"SSHLocation\": { \"Description\": \" The IP address range that can be used access the web server using SSH.\", \"Type\": \"String\", \"MinLength\": \"9\", \"MaxLength\": \"18\", \"Default\": \"0.0.0.0/0\", \"AllowedPattern\": \"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\", \"ConstraintDescription\": \"must be a valid IP CIDR range of the form x.x.x.x/x.\" } }, \"Mappings\": { \"AWSInstanceType2Arch\": { \"t1.micro\": {\"Arch\": \"PV64\"}, \"t2.micro\": {\"Arch\": \"HVM64\"}, \"t2.small\": {\"Arch\": \"HVM64\"}, \"t2.medium\": {\"Arch\": \"HVM64\"} }, \"AWSRegionArch2AMI\": { \"us-east-1\": { \"PV64\": \"ami-1ccae774\", \"HVM64\": \"ami-1ecae776\", \"HVMG2\": \"ami-8c6b40e4\" } } }, \"Resources\": { \"VPC\": { \"Type\": \"AWS::EC2::VPC\", \"Properties\": { \"EnableDnsSupport\": \"true\", \"EnableDnsHostnames\": \"true\", \"CidrBlock\": \"10.0.0.0/16\" }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"} } }, \"VpcCidrBlock\": { \"Type\": \"AWS::EC2::VPCCidrBlock\", \"Properties\": { \"VpcId\": {\"Ref\": \"VPC\"}, \"CidrBlock\": \"10.0.0.0/16\" } }, \"PublicSubnet\": { \"Type\": \"AWS::EC2::Subnet\", \"Properties\": { \"CidrBlock\": { \"Fn::Select\" : [ \"0\", { \"Fn::Cidr\" : [\"10.0.0.0/24\", 1, 8 ]}]}, \"VpcId\": {\"Ref\": \"VPC\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"} } }, \"InternetGateway\": { \"Type\": \"AWS::EC2::InternetGateway\", \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"} } }, \"VPCGatewayAttachment\": { \"Type\": \"AWS::EC2::VPCGatewayAttachment\", \"Properties\": { \"VpcId\": {\"Ref\": \"VPC\"}, \"InternetGatewayId\": {\"Ref\": \"InternetGateway\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\"} } }, \"PublicRouteTable\": { \"Type\": \"AWS::EC2::RouteTable\", \"Properties\": { \"VpcId\": {\"Ref\": \"VPC\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"175bad80-0988-4588-a919-331be705b02d\"} } }, \"PublicRoute\": { \"Type\": \"AWS::EC2::Route\", \"DependsOn\": \"VPCGatewayAttachment\", \"Properties\": { \"RouteTableId\": {\"Ref\": \"PublicRouteTable\"}, \"DestinationCidrBlock\": \"0.0.0.0/0\", \"GatewayId\": {\"Ref\": \"InternetGateway\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"143bbaa1-66a2-42a5-885f-e6300817103c\"} } }, \"PublicSubnetRouteTableAssociation\": { \"Type\": \"AWS::EC2::SubnetRouteTableAssociation\", \"Properties\": { \"SubnetId\": {\"Ref\": \"PublicSubnet\"}, \"RouteTableId\": {\"Ref\": \"PublicRouteTable\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"528e2b71-46e6-4e09-815a-f70630755219\"} } }, \"WebServerSecurityGroup\": { \"Type\": \"AWS::EC2::SecurityGroup\", \"Properties\": { \"VpcId\": {\"Ref\": \"VPC\"}, \"GroupDescription\": \"Allow access from HTTP and SSH traffic\", \"SecurityGroupIngress\": [ { \"IpProtocol\": \"tcp\", \"FromPort\": \"80\", \"ToPort\": \"80\", \"CidrIp\": \"0.0.0.0/0\" }, { \"IpProtocol\": \"tcp\", \"FromPort\": \"22\", \"ToPort\": \"22\", \"CidrIp\": {\"Ref\": \"SSHLocation\"} } ] }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\"} } }, \"WebServerInstance\": { \"Type\": \"AWS::EC2::Instance\", \"Metadata\": { \"AWS::CloudFormation::Init\": { \"configSets\": { \"All\": [\"ConfigureSampleApp\"] }, \"ConfigureSampleApp\": { \"packages\": { \"yum\": { \"httpd\": [] } }, \"files\": { \"/var/www/html/index.html\": { \"content\": { \"Fn::Join\": [ \"\\n\", [\"Congratulations, you have successfully launched the AWS CloudFormation sample.\"] ] }, \"mode\": \"000644\", \"owner\": \"root\", \"group\": \"root\" } }, \"services\": { \"sysvinit\": { \"httpd\": { \"enabled\": \"true\", \"ensureRunning\": \"true\" } } } } }, \"AWS::CloudFormation::Designer\": {\"id\": \"0f900c9e-1272-4ec2-8a42-790b074baa39\"} }, \"Properties\": { \"InstanceType\": {\"Ref\": \"InstanceType\"}, \"ImageId\": { \"Fn::FindInMap\": [ \"AWSRegionArch2AMI\", {\"Ref\": \"AWS::Region\"}, { \"Fn::FindInMap\": [ \"AWSInstanceType2Arch\", {\"Ref\": \"InstanceType\"}, \"Arch\" ] } ] }, \"KeyName\": {\"Ref\": \"KeyName\"}, \"NetworkInterfaces\": [ { \"GroupSet\": [ {\"Ref\": \"WebServerSecurityGroup\"} ], \"AssociatePublicIpAddress\": \"true\", \"DeviceIndex\": \"0\", \"DeleteOnTermination\": \"true\", \"SubnetId\": {\"Ref\": \"PublicSubnet\"} } ], \"UserData\": { \"Fn::Base64\": { \"Fn::Join\": [ \"\", [ \"#!/bin/bash -xe\\n\", \"yum update -y aws-cfn-bootstrap\\n\", \"# Install the files and packages from the metadata\\n\", \"/opt/aws/bin/cfn-init -v \", \" --stack \", {\"Ref\": \"AWS::StackName\"}, \" --resource WebServerInstance \", \" --configsets All \", \" --region \", {\"Ref\": \"AWS::Region\"}, \"\\n\", \"# Signal the status from cfn-init\\n\", \"/opt/aws/bin/cfn-signal -e $? \", \" --stack \", {\"Ref\": \"AWS::StackName\"}, \" --resource WebServerInstance \", \" --region \", {\"Ref\": \"AWS::Region\"}, \"\\n\" ] ] } } }, \"CreationPolicy\": { \"ResourceSignal\": {\"Timeout\": \"PT5M\"} } } }, \"Outputs\": { \"URL\": { \"Value\": { \"Fn::Join\": [ \"\", [ \"http://\", { \"Fn::GetAtt\": [ \"WebServerInstance\", \"PublicIp\" ] } ] ] }, \"Description\": \"Newly created application URL\" }, \"SubnetCIDR\": { \"Value\": {\"Ref\": \"PublicSubnet\"}, \"Description\": \"Subnet for the application\" } }, \"Metadata\": { \"AWS::CloudFormation::Designer\": { \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\": { \"size\": { \"width\": 60, \"height\": 60 }, \"position\": { \"x\": -40, \"y\": 210 }, \"z\": 1, \"embeds\": [] }, \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\": { \"size\": { \"width\": 320, \"height\": 250 }, \"position\": { \"x\": 70, \"y\": 190 }, \"z\": 1, \"embeds\": [ \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\", \"175bad80-0988-4588-a919-331be705b02d\" ] }, \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\": { \"size\": { \"width\": 60, \"height\": 60 }, \"position\": { \"x\": 280, \"y\": 370 }, \"z\": 2, \"parent\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\", \"embeds\": [] }, \"175bad80-0988-4588-a919-331be705b02d\": { \"size\": { \"width\": 120, \"height\": 120 }, \"position\": { \"x\": 90, \"y\": 230 }, \"z\": 2, \"parent\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\", \"embeds\": [\"143bbaa1-66a2-42a5-885f-e6300817103c\"] }, \"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\": { \"source\": {\"id\": \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"}, \"target\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"}, \"z\": 1 }, \"143bbaa1-66a2-42a5-885f-e6300817103c\": { \"size\": { \"width\": 60, \"height\": 60 }, \"position\": { \"x\": 120, \"y\": 260 }, \"z\": 3, \"parent\": \"175bad80-0988-4588-a919-331be705b02d\", \"embeds\": [], \"references\": [\"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"], \"dependson\": [\"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\"], \"isrelatedto\": [\"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"] }, \"3df467ad-673c-4c48-a41c-3ac1626961e3\": { \"size\": { \"width\": 120, \"height\": 120 }, \"position\": { \"x\": 250, \"y\": 230 }, \"z\": 0, \"embeds\": [\"0f900c9e-1272-4ec2-8a42-790b074baa39\"] }, \"0f900c9e-1272-4ec2-8a42-790b074baa39\": { \"size\": { \"width\": 60, \"height\": 60 }, \"position\": { \"x\": 280, \"y\": 260 }, \"z\": 3, \"parent\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\", \"embeds\": [], \"isrelatedto\": [\"2e76192b-a4f8-48a5-92b6-abbfa8b83263\"] }, \"13e0e0da-40c9-45d0-8460-7732ed20d764\": { \"source\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"}, \"target\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"}, \"z\": 2 }, \"528e2b71-46e6-4e09-815a-f70630755219\": { \"source\": {\"id\": \"175bad80-0988-4588-a919-331be705b02d\"}, \"target\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"}, \"z\": 2 } } } ", "keywords": ["bill", "instance", "billing mode"]}]}, {"Id": "260287850", "PostHistoryTypeId": "2", "PostId": "70399646", "RevisionGUID": "dcc66592-9a73-4d24-9e2c-349dfbdf3d89", "CreationDate": "2021-12-17T22:57:40.850", "UserId": "10931107", "Text": "I am currently trying to wrap my head around how to use AWS CloudFormation service. This might be a really simple question, but I think it is very hard to understand the platform so far.\r\nI followed Amazon's tutorial on how to create a basic web server. Going off the final template from there, I want to modify it to enable a user-defined VPC IP range. For this, I tried to add a VPC CIDR Block property, as well as modify the PublicSubnet settings to get a /24 subnet from the block property, but when trying to create a stack I get the following error message:\r\n[https://i.stack.imgur.com/hdaVq.png][1]\r\n\r\n  [1]: https://i.stack.imgur.com/hdaVq.png\r\n\r\nHere's the template I am trying to use:\r\n\r\n```\r\n{\r\n    \"AWSTemplateFormatVersion\": \"2010-09-09\",\r\n    \"Description\": \"AWS CloudFormation Sample Template VPC_Single_Instance_In_Subnet: Sample template showing how to create a VPC and add an EC2 instance with an Elastic IP address and a security group. **WARNING** This template creates an Amazon EC2 instance. You will be billed for the AWS resources used if you create a stack from this template.\",\r\n    \"Parameters\": {\r\n        \"InstanceType\": {\r\n            \"Description\": \"WebServer EC2 instance type\",\r\n            \"Type\": \"String\",\r\n            \"Default\": \"t2.micro\",\r\n            \"AllowedValues\": [\r\n                \"t1.micro\",\r\n                \"t2.micro\",\r\n                \"t2.small\",\r\n                \"t2.medium\"\r\n            ],\r\n            \"ConstraintDescription\": \"must be a valid EC2 instance type.\"\r\n        },\r\n        \"KeyName\": {\r\n            \"Description\": \"Name of an existing EC2 KeyPair to enable SSH access to the instance.\",\r\n            \"Type\": \"AWS::EC2::KeyPair::KeyName\",\r\n            \"ConstraintDescription\": \"must be the name of an existing EC2 KeyPair.\"\r\n        },\r\n        \"SSHLocation\": {\r\n            \"Description\": \" The IP address range that can be used access the web server using SSH.\",\r\n            \"Type\": \"String\",\r\n            \"MinLength\": \"9\",\r\n            \"MaxLength\": \"18\",\r\n            \"Default\": \"0.0.0.0/0\",\r\n            \"AllowedPattern\": \"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\",\r\n            \"ConstraintDescription\": \"must be a valid IP CIDR range of the form x.x.x.x/x.\"\r\n        }\r\n    },\r\n    \"Mappings\": {\r\n        \"AWSInstanceType2Arch\": {\r\n            \"t1.micro\": {\"Arch\": \"PV64\"},\r\n            \"t2.micro\": {\"Arch\": \"HVM64\"},\r\n            \"t2.small\": {\"Arch\": \"HVM64\"},\r\n            \"t2.medium\": {\"Arch\": \"HVM64\"}\r\n        },\r\n        \"AWSRegionArch2AMI\": {\r\n            \"us-east-1\": {\r\n                \"PV64\": \"ami-1ccae774\",\r\n                \"HVM64\": \"ami-1ecae776\",\r\n                \"HVMG2\": \"ami-8c6b40e4\"\r\n            }\r\n        }\r\n    },\r\n    \"Resources\": {\r\n        \"VPC\": {\r\n            \"Type\": \"AWS::EC2::VPC\",\r\n            \"Properties\": {\r\n                \"EnableDnsSupport\": \"true\",\r\n                \"EnableDnsHostnames\": \"true\",\r\n                \"CidrBlock\": \"10.0.0.0/16\"\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"}\r\n            }\r\n        },\r\n        \"VpcCidrBlock\": {\r\n            \"Type\": \"AWS::EC2::VPCCidrBlock\",\r\n            \"Properties\": {\r\n                \"VpcId\": {\"Ref\": \"VPC\"},\r\n                \"CidrBlock\": \"10.0.0.0/16\"\r\n            }\r\n        },\r\n        \"PublicSubnet\": {\r\n            \"Type\": \"AWS::EC2::Subnet\",\r\n            \"Properties\": {\r\n                \"CidrBlock\": { \"Fn::Select\" : [ \"0\", { \"Fn::Cidr\" : [\"10.0.0.0/24\", 1, 8 ]}]},\r\n                \"VpcId\": {\"Ref\": \"VPC\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"}\r\n            }\r\n        },\r\n        \"InternetGateway\": {\r\n            \"Type\": \"AWS::EC2::InternetGateway\",\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"}\r\n            }\r\n        },\r\n        \"VPCGatewayAttachment\": {\r\n            \"Type\": \"AWS::EC2::VPCGatewayAttachment\",\r\n            \"Properties\": {\r\n                \"VpcId\": {\"Ref\": \"VPC\"},\r\n                \"InternetGatewayId\": {\"Ref\": \"InternetGateway\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\"}\r\n            }\r\n        },\r\n        \"PublicRouteTable\": {\r\n            \"Type\": \"AWS::EC2::RouteTable\",\r\n            \"Properties\": {\r\n                \"VpcId\": {\"Ref\": \"VPC\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"175bad80-0988-4588-a919-331be705b02d\"}\r\n            }\r\n        },\r\n        \"PublicRoute\": {\r\n            \"Type\": \"AWS::EC2::Route\",\r\n            \"DependsOn\": \"VPCGatewayAttachment\",\r\n            \"Properties\": {\r\n                \"RouteTableId\": {\"Ref\": \"PublicRouteTable\"},\r\n                \"DestinationCidrBlock\": \"0.0.0.0/0\",\r\n                \"GatewayId\": {\"Ref\": \"InternetGateway\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"143bbaa1-66a2-42a5-885f-e6300817103c\"}\r\n            }\r\n        },\r\n        \"PublicSubnetRouteTableAssociation\": {\r\n            \"Type\": \"AWS::EC2::SubnetRouteTableAssociation\",\r\n            \"Properties\": {\r\n                \"SubnetId\": {\"Ref\": \"PublicSubnet\"},\r\n                \"RouteTableId\": {\"Ref\": \"PublicRouteTable\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"528e2b71-46e6-4e09-815a-f70630755219\"}\r\n            }\r\n        },\r\n        \"WebServerSecurityGroup\": {\r\n            \"Type\": \"AWS::EC2::SecurityGroup\",\r\n            \"Properties\": {\r\n                \"VpcId\": {\"Ref\": \"VPC\"},\r\n                \"GroupDescription\": \"Allow access from HTTP and SSH traffic\",\r\n                \"SecurityGroupIngress\": [\r\n                    {\r\n                        \"IpProtocol\": \"tcp\",\r\n                        \"FromPort\": \"80\",\r\n                        \"ToPort\": \"80\",\r\n                        \"CidrIp\": \"0.0.0.0/0\"\r\n                    },\r\n                    {\r\n                        \"IpProtocol\": \"tcp\",\r\n                        \"FromPort\": \"22\",\r\n                        \"ToPort\": \"22\",\r\n                        \"CidrIp\": {\"Ref\": \"SSHLocation\"}\r\n                    }\r\n                ]\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\"}\r\n            }\r\n        },\r\n        \"WebServerInstance\": {\r\n            \"Type\": \"AWS::EC2::Instance\",\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Init\": {\r\n                    \"configSets\": {\r\n                        \"All\": [\"ConfigureSampleApp\"]\r\n                    },\r\n                    \"ConfigureSampleApp\": {\r\n                        \"packages\": {\r\n                            \"yum\": {\r\n                                \"httpd\": []\r\n                            }\r\n                        },\r\n                        \"files\": {\r\n                            \"/var/www/html/index.html\": {\r\n                                \"content\": {\r\n                                    \"Fn::Join\": [\r\n                                        \"\\n\",\r\n                                        [\"<h1>Congratulations, you have successfully launched the AWS CloudFormation sample.</h1>\"]\r\n                                    ]\r\n                                },\r\n                                \"mode\": \"000644\",\r\n                                \"owner\": \"root\",\r\n                                \"group\": \"root\"\r\n                            }\r\n                        },\r\n                        \"services\": {\r\n                            \"sysvinit\": {\r\n                                \"httpd\": {\r\n                                    \"enabled\": \"true\",\r\n                                    \"ensureRunning\": \"true\"\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"0f900c9e-1272-4ec2-8a42-790b074baa39\"}\r\n            },\r\n            \"Properties\": {\r\n                \"InstanceType\": {\"Ref\": \"InstanceType\"},\r\n                \"ImageId\": {\r\n                    \"Fn::FindInMap\": [\r\n                        \"AWSRegionArch2AMI\",\r\n                        {\"Ref\": \"AWS::Region\"},\r\n                        {\r\n                            \"Fn::FindInMap\": [\r\n                                \"AWSInstanceType2Arch\",\r\n                                {\"Ref\": \"InstanceType\"},\r\n                                \"Arch\"\r\n                            ]\r\n                        }\r\n                    ]\r\n                },\r\n                \"KeyName\": {\"Ref\": \"KeyName\"},\r\n                \"NetworkInterfaces\": [\r\n                    {\r\n                        \"GroupSet\": [\r\n                            {\"Ref\": \"WebServerSecurityGroup\"}\r\n                        ],\r\n                        \"AssociatePublicIpAddress\": \"true\",\r\n                        \"DeviceIndex\": \"0\",\r\n                        \"DeleteOnTermination\": \"true\",\r\n                        \"SubnetId\": {\"Ref\": \"PublicSubnet\"}\r\n                    }\r\n                ],\r\n                \"UserData\": {\r\n                    \"Fn::Base64\": {\r\n                        \"Fn::Join\": [\r\n                            \"\",\r\n                            [\r\n                                \"#!/bin/bash -xe\\n\",\r\n                                \"yum update -y aws-cfn-bootstrap\\n\",\r\n                                \"# Install the files and packages from the metadata\\n\",\r\n                                \"/opt/aws/bin/cfn-init -v \",\r\n                                \"         --stack \",\r\n                                {\"Ref\": \"AWS::StackName\"},\r\n                                \"         --resource WebServerInstance \",\r\n                                \"         --configsets All \",\r\n                                \"         --region \",\r\n                                {\"Ref\": \"AWS::Region\"},\r\n                                \"\\n\",\r\n                                \"# Signal the status from cfn-init\\n\",\r\n                                \"/opt/aws/bin/cfn-signal -e $? \",\r\n                                \"         --stack \",\r\n                                {\"Ref\": \"AWS::StackName\"},\r\n                                \"         --resource WebServerInstance \",\r\n                                \"         --region \",\r\n                                {\"Ref\": \"AWS::Region\"},\r\n                                \"\\n\"\r\n                            ]\r\n                        ]\r\n                    }\r\n                }\r\n            },\r\n            \"CreationPolicy\": {\r\n                \"ResourceSignal\": {\"Timeout\": \"PT5M\"}\r\n            }\r\n        }\r\n    },\r\n    \"Outputs\": {\r\n        \"URL\": {\r\n            \"Value\": {\r\n                \"Fn::Join\": [\r\n                    \"\",\r\n                    [\r\n                        \"http://\",\r\n                        {\r\n                            \"Fn::GetAtt\": [\r\n                                \"WebServerInstance\",\r\n                                \"PublicIp\"\r\n                            ]\r\n                        }\r\n                    ]\r\n                ]\r\n            },\r\n            \"Description\": \"Newly created application URL\"\r\n        },\r\n        \"SubnetCIDR\": {\r\n            \"Value\": {\"Ref\": \"PublicSubnet\"},\r\n            \"Description\": \"Subnet for the application\"\r\n        }\r\n    },\r\n    \"Metadata\": {\r\n        \"AWS::CloudFormation::Designer\": {\r\n            \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\": {\r\n                \"size\": {\r\n                    \"width\": 60,\r\n                    \"height\": 60\r\n                },\r\n                \"position\": {\r\n                    \"x\": -40,\r\n                    \"y\": 210\r\n                },\r\n                \"z\": 1,\r\n                \"embeds\": []\r\n            },\r\n            \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\": {\r\n                \"size\": {\r\n                    \"width\": 320,\r\n                    \"height\": 250\r\n                },\r\n                \"position\": {\r\n                    \"x\": 70,\r\n                    \"y\": 190\r\n                },\r\n                \"z\": 1,\r\n                \"embeds\": [\r\n                    \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\",\r\n                    \"175bad80-0988-4588-a919-331be705b02d\"\r\n                ]\r\n            },\r\n            \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\": {\r\n                \"size\": {\r\n                    \"width\": 60,\r\n                    \"height\": 60\r\n                },\r\n                \"position\": {\r\n                    \"x\": 280,\r\n                    \"y\": 370\r\n                },\r\n                \"z\": 2,\r\n                \"parent\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\",\r\n                \"embeds\": []\r\n            },\r\n            \"175bad80-0988-4588-a919-331be705b02d\": {\r\n                \"size\": {\r\n                    \"width\": 120,\r\n                    \"height\": 120\r\n                },\r\n                \"position\": {\r\n                    \"x\": 90,\r\n                    \"y\": 230\r\n                },\r\n                \"z\": 2,\r\n                \"parent\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\",\r\n                \"embeds\": [\"143bbaa1-66a2-42a5-885f-e6300817103c\"]\r\n            },\r\n            \"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\": {\r\n                \"source\": {\"id\": \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"},\r\n                \"target\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"},\r\n                \"z\": 1\r\n            },\r\n            \"143bbaa1-66a2-42a5-885f-e6300817103c\": {\r\n                \"size\": {\r\n                    \"width\": 60,\r\n                    \"height\": 60\r\n                },\r\n                \"position\": {\r\n                    \"x\": 120,\r\n                    \"y\": 260\r\n                },\r\n                \"z\": 3,\r\n                \"parent\": \"175bad80-0988-4588-a919-331be705b02d\",\r\n                \"embeds\": [],\r\n                \"references\": [\"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"],\r\n                \"dependson\": [\"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\"],\r\n                \"isrelatedto\": [\"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"]\r\n            },\r\n            \"3df467ad-673c-4c48-a41c-3ac1626961e3\": {\r\n                \"size\": {\r\n                    \"width\": 120,\r\n                    \"height\": 120\r\n                },\r\n                \"position\": {\r\n                    \"x\": 250,\r\n                    \"y\": 230\r\n                },\r\n                \"z\": 0,\r\n                \"embeds\": [\"0f900c9e-1272-4ec2-8a42-790b074baa39\"]\r\n            },\r\n            \"0f900c9e-1272-4ec2-8a42-790b074baa39\": {\r\n                \"size\": {\r\n                    \"width\": 60,\r\n                    \"height\": 60\r\n                },\r\n                \"position\": {\r\n                    \"x\": 280,\r\n                    \"y\": 260\r\n                },\r\n                \"z\": 3,\r\n                \"parent\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\",\r\n                \"embeds\": [],\r\n                \"isrelatedto\": [\"2e76192b-a4f8-48a5-92b6-abbfa8b83263\"]\r\n            },\r\n            \"13e0e0da-40c9-45d0-8460-7732ed20d764\": {\r\n                \"source\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"},\r\n                \"target\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"},\r\n                \"z\": 2\r\n            },\r\n            \"528e2b71-46e6-4e09-815a-f70630755219\": {\r\n                \"source\": {\"id\": \"175bad80-0988-4588-a919-331be705b02d\"},\r\n                \"target\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"},\r\n                \"z\": 2\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "For this, I tried to add a VPC CIDR Block property, as well as modify the PublicSubnet settings to get a /24 subnet from the block property, but when trying to create a stack I get the following error message: [https://i.stack.imgur.com/hdaVq.png][1] [1]: https://i.stack.imgur.com/hdaVq.png Here's the template I am trying to use: ``` { \"AWSTemplateFormatVersion\": \"2010-09-09\", \"Description\": \"AWS CloudFormation Sample Template VPC_Single_Instance_In_Subnet: Sample template showing how to create a VPC and add an EC2 instance with an Elastic IP address and a security group. ", "keywords": ["instance"]}, {"source": "Text", "text": "This template creates an Amazon EC2 instance. ", "keywords": ["instance"]}, {"source": "Text", "text": "You will be billed for the AWS resources used if you create a stack from this template.\", \"Parameters\": { \"InstanceType\": { \"Description\": \"WebServer EC2 instance type\", \"Type\": \"String\", \"Default\": \"t2.micro\", \"AllowedValues\": [ \"t1.micro\", \"t2.micro\", \"t2.small\", \"t2.medium\" ], \"ConstraintDescription\": \"must be a valid EC2 instance type.\" }, \"KeyName\": { \"Description\": \"Name of an existing EC2 KeyPair to enable SSH access to the instance.\", \"Type\": \"AWS::EC2::KeyPair::KeyName\", \"ConstraintDescription\": \"must be the name of an existing EC2 KeyPair.\" }, \"SSHLocation\": { \"Description\": \" The IP address range that can be used access the web server using SSH.\", \"Type\": \"String\", \"MinLength\": \"9\", \"MaxLength\": \"18\", \"Default\": \"0.0.0.0/0\", \"AllowedPattern\": \"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\", \"ConstraintDescription\": \"must be a valid IP CIDR range of the form x.x.x.x/x.\" } }, \"Mappings\": { \"AWSInstanceType2Arch\": { \"t1.micro\": {\"Arch\": \"PV64\"}, \"t2.micro\": {\"Arch\": \"HVM64\"}, \"t2.small\": {\"Arch\": \"HVM64\"}, \"t2.medium\": {\"Arch\": \"HVM64\"} }, \"AWSRegionArch2AMI\": { \"us-east-1\": { \"PV64\": \"ami-1ccae774\", \"HVM64\": \"ami-1ecae776\", \"HVMG2\": \"ami-8c6b40e4\" } } }, \"Resources\": { \"VPC\": { \"Type\": \"AWS::EC2::VPC\", \"Properties\": { \"EnableDnsSupport\": \"true\", \"EnableDnsHostnames\": \"true\", \"CidrBlock\": \"10.0.0.0/16\" }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"} } }, \"VpcCidrBlock\": { \"Type\": \"AWS::EC2::VPCCidrBlock\", \"Properties\": { \"VpcId\": {\"Ref\": \"VPC\"}, \"CidrBlock\": \"10.0.0.0/16\" } }, \"PublicSubnet\": { \"Type\": \"AWS::EC2::Subnet\", \"Properties\": { \"CidrBlock\": { \"Fn::Select\" : [ \"0\", { \"Fn::Cidr\" : [\"10.0.0.0/24\", 1, 8 ]}]}, \"VpcId\": {\"Ref\": \"VPC\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"} } }, \"InternetGateway\": { \"Type\": \"AWS::EC2::InternetGateway\", \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"} } }, \"VPCGatewayAttachment\": { \"Type\": \"AWS::EC2::VPCGatewayAttachment\", \"Properties\": { \"VpcId\": {\"Ref\": \"VPC\"}, \"InternetGatewayId\": {\"Ref\": \"InternetGateway\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\"} } }, \"PublicRouteTable\": { \"Type\": \"AWS::EC2::RouteTable\", \"Properties\": { \"VpcId\": {\"Ref\": \"VPC\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"175bad80-0988-4588-a919-331be705b02d\"} } }, \"PublicRoute\": { \"Type\": \"AWS::EC2::Route\", \"DependsOn\": \"VPCGatewayAttachment\", \"Properties\": { \"RouteTableId\": {\"Ref\": \"PublicRouteTable\"}, \"DestinationCidrBlock\": \"0.0.0.0/0\", \"GatewayId\": {\"Ref\": \"InternetGateway\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"143bbaa1-66a2-42a5-885f-e6300817103c\"} } }, \"PublicSubnetRouteTableAssociation\": { \"Type\": \"AWS::EC2::SubnetRouteTableAssociation\", \"Properties\": { \"SubnetId\": {\"Ref\": \"PublicSubnet\"}, \"RouteTableId\": {\"Ref\": \"PublicRouteTable\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"528e2b71-46e6-4e09-815a-f70630755219\"} } }, \"WebServerSecurityGroup\": { \"Type\": \"AWS::EC2::SecurityGroup\", \"Properties\": { \"VpcId\": {\"Ref\": \"VPC\"}, \"GroupDescription\": \"Allow access from HTTP and SSH traffic\", \"SecurityGroupIngress\": [ { \"IpProtocol\": \"tcp\", \"FromPort\": \"80\", \"ToPort\": \"80\", \"CidrIp\": \"0.0.0.0/0\" }, { \"IpProtocol\": \"tcp\", \"FromPort\": \"22\", \"ToPort\": \"22\", \"CidrIp\": {\"Ref\": \"SSHLocation\"} } ] }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\"} } }, \"WebServerInstance\": { \"Type\": \"AWS::EC2::Instance\", \"Metadata\": { \"AWS::CloudFormation::Init\": { \"configSets\": { \"All\": [\"ConfigureSampleApp\"] }, \"ConfigureSampleApp\": { \"packages\": { \"yum\": { \"httpd\": [] } }, \"files\": { \"/var/www/html/index.html\": { \"content\": { \"Fn::Join\": [ \"\\n\", [\"Congratulations, you have successfully launched the AWS CloudFormation sample.\"] ] }, \"mode\": \"000644\", \"owner\": \"root\", \"group\": \"root\" } }, \"services\": { \"sysvinit\": { \"httpd\": { \"enabled\": \"true\", \"ensureRunning\": \"true\" } } } } }, \"AWS::CloudFormation::Designer\": {\"id\": \"0f900c9e-1272-4ec2-8a42-790b074baa39\"} }, \"Properties\": { \"InstanceType\": {\"Ref\": \"InstanceType\"}, \"ImageId\": { \"Fn::FindInMap\": [ \"AWSRegionArch2AMI\", {\"Ref\": \"AWS::Region\"}, { \"Fn::FindInMap\": [ \"AWSInstanceType2Arch\", {\"Ref\": \"InstanceType\"}, \"Arch\" ] } ] }, \"KeyName\": {\"Ref\": \"KeyName\"}, \"NetworkInterfaces\": [ { \"GroupSet\": [ {\"Ref\": \"WebServerSecurityGroup\"} ], \"AssociatePublicIpAddress\": \"true\", \"DeviceIndex\": \"0\", \"DeleteOnTermination\": \"true\", \"SubnetId\": {\"Ref\": \"PublicSubnet\"} } ], \"UserData\": { \"Fn::Base64\": { \"Fn::Join\": [ \"\", [ \"#!/bin/bash -xe\\n\", \"yum update -y aws-cfn-bootstrap\\n\", \"# Install the files and packages from the metadata\\n\", \"/opt/aws/bin/cfn-init -v \", \" --stack \", {\"Ref\": \"AWS::StackName\"}, \" --resource WebServerInstance \", \" --configsets All \", \" --region \", {\"Ref\": \"AWS::Region\"}, \"\\n\", \"# Signal the status from cfn-init\\n\", \"/opt/aws/bin/cfn-signal -e $? \", \" --stack \", {\"Ref\": \"AWS::StackName\"}, \" --resource WebServerInstance \", \" --region \", {\"Ref\": \"AWS::Region\"}, \"\\n\" ] ] } } }, \"CreationPolicy\": { \"ResourceSignal\": {\"Timeout\": \"PT5M\"} } } }, \"Outputs\": { \"URL\": { \"Value\": { \"Fn::Join\": [ \"\", [ \"http://\", { \"Fn::GetAtt\": [ \"WebServerInstance\", \"PublicIp\" ] } ] ] }, \"Description\": \"Newly created application URL\" }, \"SubnetCIDR\": { \"Value\": {\"Ref\": \"PublicSubnet\"}, \"Description\": \"Subnet for the application\" } }, \"Metadata\": { \"AWS::CloudFormation::Designer\": { \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\": { \"size\": { \"width\": 60, \"height\": 60 }, \"position\": { \"x\": -40, \"y\": 210 }, \"z\": 1, \"embeds\": [] }, \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\": { \"size\": { \"width\": 320, \"height\": 250 }, \"position\": { \"x\": 70, \"y\": 190 }, \"z\": 1, \"embeds\": [ \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\", \"175bad80-0988-4588-a919-331be705b02d\" ] }, \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\": { \"size\": { \"width\": 60, \"height\": 60 }, \"position\": { \"x\": 280, \"y\": 370 }, \"z\": 2, \"parent\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\", \"embeds\": [] }, \"175bad80-0988-4588-a919-331be705b02d\": { \"size\": { \"width\": 120, \"height\": 120 }, \"position\": { \"x\": 90, \"y\": 230 }, \"z\": 2, \"parent\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\", \"embeds\": [\"143bbaa1-66a2-42a5-885f-e6300817103c\"] }, \"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\": { \"source\": {\"id\": \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"}, \"target\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"}, \"z\": 1 }, \"143bbaa1-66a2-42a5-885f-e6300817103c\": { \"size\": { \"width\": 60, \"height\": 60 }, \"position\": { \"x\": 120, \"y\": 260 }, \"z\": 3, \"parent\": \"175bad80-0988-4588-a919-331be705b02d\", \"embeds\": [], \"references\": [\"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"], \"dependson\": [\"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\"], \"isrelatedto\": [\"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"] }, \"3df467ad-673c-4c48-a41c-3ac1626961e3\": { \"size\": { \"width\": 120, \"height\": 120 }, \"position\": { \"x\": 250, \"y\": 230 }, \"z\": 0, \"embeds\": [\"0f900c9e-1272-4ec2-8a42-790b074baa39\"] }, \"0f900c9e-1272-4ec2-8a42-790b074baa39\": { \"size\": { \"width\": 60, \"height\": 60 }, \"position\": { \"x\": 280, \"y\": 260 }, \"z\": 3, \"parent\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\", \"embeds\": [], \"isrelatedto\": [\"2e76192b-a4f8-48a5-92b6-abbfa8b83263\"] }, \"13e0e0da-40c9-45d0-8460-7732ed20d764\": { \"source\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"}, \"target\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"}, \"z\": 2 }, \"528e2b71-46e6-4e09-815a-f70630755219\": { \"source\": {\"id\": \"175bad80-0988-4588-a919-331be705b02d\"}, \"target\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"}, \"z\": 2 } } } ", "keywords": ["bill", "instance", "billing mode"]}]}, {"Id": "260287852", "PostHistoryTypeId": "1", "PostId": "70399646", "RevisionGUID": "dcc66592-9a73-4d24-9e2c-349dfbdf3d89", "CreationDate": "2021-12-17T22:57:40.850", "UserId": "10931107", "Text": "AWS Cloudformation CIDR block conflict", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "260287853", "PostHistoryTypeId": "3", "PostId": "70399646", "RevisionGUID": "dcc66592-9a73-4d24-9e2c-349dfbdf3d89", "CreationDate": "2021-12-17T22:57:40.850", "UserId": "10931107", "Text": "|amazon-web-services|cloud|aws-cloudformation|cidr|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "70400348", "PostTypeId": "2", "ParentId": "70399646", "CreationDate": "2021-12-18T01:23:26.813", "Score": "0", "Body": "<p>You don't need <code>AWS::EC2::VPCCidrBlock</code>. Instead you add <code>VPCCidr</code> parameter to your template and use that:</p>\n<pre><code>{\n    &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,\n    &quot;Description&quot;: &quot;AWS CloudFormation Sample Template VPC_Single_Instance_In_Subnet: Sample template showing how to create a VPC and add an EC2 instance with an Elastic IP address and a security group. **WARNING** This template creates an Amazon EC2 instance. You will be billed for the AWS resources used if you create a stack from this template.&quot;,\n    &quot;Parameters&quot;: {\n        &quot;InstanceType&quot;: {\n            &quot;Description&quot;: &quot;WebServer EC2 instance type&quot;,\n            &quot;Type&quot;: &quot;String&quot;,\n            &quot;Default&quot;: &quot;t2.micro&quot;,\n            &quot;AllowedValues&quot;: [\n                &quot;t1.micro&quot;,\n                &quot;t2.micro&quot;,\n                &quot;t2.small&quot;,\n                &quot;t2.medium&quot;\n            ],\n            &quot;ConstraintDescription&quot;: &quot;must be a valid EC2 instance type.&quot;\n        },\n        &quot;KeyName&quot;: {\n            &quot;Description&quot;: &quot;Name of an existing EC2 KeyPair to enable SSH access to the instance.&quot;,\n            &quot;Type&quot;: &quot;AWS::EC2::KeyPair::KeyName&quot;,\n            &quot;ConstraintDescription&quot;: &quot;must be the name of an existing EC2 KeyPair.&quot;\n        },\n        &quot;VPCCidr&quot;: {\n            &quot;Type&quot;: &quot;String&quot;,\n            &quot;Default&quot;: &quot;10.0.0.0/16&quot;\n        },\n        &quot;SSHLocation&quot;: {\n            &quot;Description&quot;: &quot; The IP address range that can be used access the web server using SSH.&quot;,\n            &quot;Type&quot;: &quot;String&quot;,\n            &quot;MinLength&quot;: &quot;9&quot;,\n            &quot;MaxLength&quot;: &quot;18&quot;,\n            &quot;Default&quot;: &quot;0.0.0.0/0&quot;,\n            &quot;AllowedPattern&quot;: &quot;(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})&quot;,\n            &quot;ConstraintDescription&quot;: &quot;must be a valid IP CIDR range of the form x.x.x.x/x.&quot;\n        }\n    },\n    &quot;Mappings&quot;: {\n        &quot;AWSInstanceType2Arch&quot;: {\n            &quot;t1.micro&quot;: {&quot;Arch&quot;: &quot;PV64&quot;},\n            &quot;t2.micro&quot;: {&quot;Arch&quot;: &quot;HVM64&quot;},\n            &quot;t2.small&quot;: {&quot;Arch&quot;: &quot;HVM64&quot;},\n            &quot;t2.medium&quot;: {&quot;Arch&quot;: &quot;HVM64&quot;}\n        },\n        &quot;AWSRegionArch2AMI&quot;: {\n            &quot;us-east-1&quot;: {\n                &quot;PV64&quot;: &quot;ami-1ccae774&quot;,\n                &quot;HVM64&quot;: &quot;ami-1ecae776&quot;,\n                &quot;HVMG2&quot;: &quot;ami-8c6b40e4&quot;\n            }\n        }\n    },\n    &quot;Resources&quot;: {\n        &quot;VPC&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::VPC&quot;,\n            &quot;Properties&quot;: {\n                &quot;EnableDnsSupport&quot;: &quot;true&quot;,\n                &quot;EnableDnsHostnames&quot;: &quot;true&quot;,\n                &quot;CidrBlock&quot;: {&quot;Ref&quot;: &quot;VPCCidr&quot;}\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;96a791f0-938b-4ebe-9f3c-b3fe2a588aee&quot;}\n            }\n        },\n        &quot;PublicSubnet&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::Subnet&quot;,\n            &quot;Properties&quot;: {\n                &quot;CidrBlock&quot;: { &quot;Fn::Select&quot; : [ &quot;0&quot;, { &quot;Fn::Cidr&quot; : [{&quot;Ref&quot;: &quot;VPCCidr&quot;}, 1, 8 ]}]},\n                &quot;VpcId&quot;: {&quot;Ref&quot;: &quot;VPC&quot;}\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;3df467ad-673c-4c48-a41c-3ac1626961e3&quot;}\n            }\n        },\n        &quot;InternetGateway&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::InternetGateway&quot;,\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;a166c4f5-7cc4-429b-b9d8-2c8c43facc63&quot;}\n            }\n        },\n        &quot;VPCGatewayAttachment&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::VPCGatewayAttachment&quot;,\n            &quot;Properties&quot;: {\n                &quot;VpcId&quot;: {&quot;Ref&quot;: &quot;VPC&quot;},\n                &quot;InternetGatewayId&quot;: {&quot;Ref&quot;: &quot;InternetGateway&quot;}\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;1790ebeb-2e41-4293-8cc1-aaba134fd1e0&quot;}\n            }\n        },\n        &quot;PublicRouteTable&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::RouteTable&quot;,\n            &quot;Properties&quot;: {\n                &quot;VpcId&quot;: {&quot;Ref&quot;: &quot;VPC&quot;}\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;175bad80-0988-4588-a919-331be705b02d&quot;}\n            }\n        },\n        &quot;PublicRoute&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::Route&quot;,\n            &quot;DependsOn&quot;: &quot;VPCGatewayAttachment&quot;,\n            &quot;Properties&quot;: {\n                &quot;RouteTableId&quot;: {&quot;Ref&quot;: &quot;PublicRouteTable&quot;},\n                &quot;DestinationCidrBlock&quot;: &quot;0.0.0.0/0&quot;,\n                &quot;GatewayId&quot;: {&quot;Ref&quot;: &quot;InternetGateway&quot;}\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;143bbaa1-66a2-42a5-885f-e6300817103c&quot;}\n            }\n        },\n        &quot;PublicSubnetRouteTableAssociation&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::SubnetRouteTableAssociation&quot;,\n            &quot;Properties&quot;: {\n                &quot;SubnetId&quot;: {&quot;Ref&quot;: &quot;PublicSubnet&quot;},\n                &quot;RouteTableId&quot;: {&quot;Ref&quot;: &quot;PublicRouteTable&quot;}\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;528e2b71-46e6-4e09-815a-f70630755219&quot;}\n            }\n        },\n        &quot;WebServerSecurityGroup&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::SecurityGroup&quot;,\n            &quot;Properties&quot;: {\n                &quot;VpcId&quot;: {&quot;Ref&quot;: &quot;VPC&quot;},\n                &quot;GroupDescription&quot;: &quot;Allow access from HTTP and SSH traffic&quot;,\n                &quot;SecurityGroupIngress&quot;: [\n                    {\n                        &quot;IpProtocol&quot;: &quot;tcp&quot;,\n                        &quot;FromPort&quot;: &quot;80&quot;,\n                        &quot;ToPort&quot;: &quot;80&quot;,\n                        &quot;CidrIp&quot;: &quot;0.0.0.0/0&quot;\n                    },\n                    {\n                        &quot;IpProtocol&quot;: &quot;tcp&quot;,\n                        &quot;FromPort&quot;: &quot;22&quot;,\n                        &quot;ToPort&quot;: &quot;22&quot;,\n                        &quot;CidrIp&quot;: {&quot;Ref&quot;: &quot;SSHLocation&quot;}\n                    }\n                ]\n            },\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;2e76192b-a4f8-48a5-92b6-abbfa8b83263&quot;}\n            }\n        },\n        &quot;WebServerInstance&quot;: {\n            &quot;Type&quot;: &quot;AWS::EC2::Instance&quot;,\n            &quot;Metadata&quot;: {\n                &quot;AWS::CloudFormation::Init&quot;: {\n                    &quot;configSets&quot;: {\n                        &quot;All&quot;: [&quot;ConfigureSampleApp&quot;]\n                    },\n                    &quot;ConfigureSampleApp&quot;: {\n                        &quot;packages&quot;: {\n                            &quot;yum&quot;: {\n                                &quot;httpd&quot;: []\n                            }\n                        },\n                        &quot;files&quot;: {\n                            &quot;/var/www/html/index.html&quot;: {\n                                &quot;content&quot;: {\n                                    &quot;Fn::Join&quot;: [\n                                        &quot;\\n&quot;,\n                                        [&quot;&lt;h1&gt;Congratulations, you have successfully launched the AWS CloudFormation sample.&lt;/h1&gt;&quot;]\n                                    ]\n                                },\n                                &quot;mode&quot;: &quot;000644&quot;,\n                                &quot;owner&quot;: &quot;root&quot;,\n                                &quot;group&quot;: &quot;root&quot;\n                            }\n                        },\n                        &quot;services&quot;: {\n                            &quot;sysvinit&quot;: {\n                                &quot;httpd&quot;: {\n                                    &quot;enabled&quot;: &quot;true&quot;,\n                                    &quot;ensureRunning&quot;: &quot;true&quot;\n                                }\n                            }\n                        }\n                    }\n                },\n                &quot;AWS::CloudFormation::Designer&quot;: {&quot;id&quot;: &quot;0f900c9e-1272-4ec2-8a42-790b074baa39&quot;}\n            },\n            &quot;Properties&quot;: {\n                &quot;InstanceType&quot;: {&quot;Ref&quot;: &quot;InstanceType&quot;},\n                &quot;ImageId&quot;: {\n                    &quot;Fn::FindInMap&quot;: [\n                        &quot;AWSRegionArch2AMI&quot;,\n                        {&quot;Ref&quot;: &quot;AWS::Region&quot;},\n                        {\n                            &quot;Fn::FindInMap&quot;: [\n                                &quot;AWSInstanceType2Arch&quot;,\n                                {&quot;Ref&quot;: &quot;InstanceType&quot;},\n                                &quot;Arch&quot;\n                            ]\n                        }\n                    ]\n                },\n                &quot;KeyName&quot;: {&quot;Ref&quot;: &quot;KeyName&quot;},\n                &quot;NetworkInterfaces&quot;: [\n                    {\n                        &quot;GroupSet&quot;: [\n                            {&quot;Ref&quot;: &quot;WebServerSecurityGroup&quot;}\n                        ],\n                        &quot;AssociatePublicIpAddress&quot;: &quot;true&quot;,\n                        &quot;DeviceIndex&quot;: &quot;0&quot;,\n                        &quot;DeleteOnTermination&quot;: &quot;true&quot;,\n                        &quot;SubnetId&quot;: {&quot;Ref&quot;: &quot;PublicSubnet&quot;}\n                    }\n                ],\n                &quot;UserData&quot;: {\n                    &quot;Fn::Base64&quot;: {\n                        &quot;Fn::Join&quot;: [\n                            &quot;&quot;,\n                            [\n                                &quot;#!/bin/bash -xe\\n&quot;,\n                                &quot;yum update -y aws-cfn-bootstrap\\n&quot;,\n                                &quot;# Install the files and packages from the metadata\\n&quot;,\n                                &quot;/opt/aws/bin/cfn-init -v &quot;,\n                                &quot;         --stack &quot;,\n                                {&quot;Ref&quot;: &quot;AWS::StackName&quot;},\n                                &quot;         --resource WebServerInstance &quot;,\n                                &quot;         --configsets All &quot;,\n                                &quot;         --region &quot;,\n                                {&quot;Ref&quot;: &quot;AWS::Region&quot;},\n                                &quot;\\n&quot;,\n                                &quot;# Signal the status from cfn-init\\n&quot;,\n                                &quot;/opt/aws/bin/cfn-signal -e $? &quot;,\n                                &quot;         --stack &quot;,\n                                {&quot;Ref&quot;: &quot;AWS::StackName&quot;},\n                                &quot;         --resource WebServerInstance &quot;,\n                                &quot;         --region &quot;,\n                                {&quot;Ref&quot;: &quot;AWS::Region&quot;},\n                                &quot;\\n&quot;\n                            ]\n                        ]\n                    }\n                }\n            },\n            &quot;CreationPolicy&quot;: {\n                &quot;ResourceSignal&quot;: {&quot;Timeout&quot;: &quot;PT5M&quot;}\n            }\n        }\n    },\n    &quot;Outputs&quot;: {\n        &quot;URL&quot;: {\n            &quot;Value&quot;: {\n                &quot;Fn::Join&quot;: [\n                    &quot;&quot;,\n                    [\n                        &quot;http://&quot;,\n                        {\n                            &quot;Fn::GetAtt&quot;: [\n                                &quot;WebServerInstance&quot;,\n                                &quot;PublicIp&quot;\n                            ]\n                        }\n                    ]\n                ]\n            },\n            &quot;Description&quot;: &quot;Newly created application URL&quot;\n        },\n        &quot;SubnetCIDR&quot;: {\n            &quot;Value&quot;: {&quot;Ref&quot;: &quot;PublicSubnet&quot;},\n            &quot;Description&quot;: &quot;Subnet for the application&quot;\n        }\n    },\n    &quot;Metadata&quot;: {\n        &quot;AWS::CloudFormation::Designer&quot;: {\n            &quot;a166c4f5-7cc4-429b-b9d8-2c8c43facc63&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 60,\n                    &quot;height&quot;: 60\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: -40,\n                    &quot;y&quot;: 210\n                },\n                &quot;z&quot;: 1,\n                &quot;embeds&quot;: []\n            },\n            &quot;96a791f0-938b-4ebe-9f3c-b3fe2a588aee&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 320,\n                    &quot;height&quot;: 250\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: 70,\n                    &quot;y&quot;: 190\n                },\n                &quot;z&quot;: 1,\n                &quot;embeds&quot;: [\n                    &quot;2e76192b-a4f8-48a5-92b6-abbfa8b83263&quot;,\n                    &quot;175bad80-0988-4588-a919-331be705b02d&quot;\n                ]\n            },\n            &quot;2e76192b-a4f8-48a5-92b6-abbfa8b83263&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 60,\n                    &quot;height&quot;: 60\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: 280,\n                    &quot;y&quot;: 370\n                },\n                &quot;z&quot;: 2,\n                &quot;parent&quot;: &quot;96a791f0-938b-4ebe-9f3c-b3fe2a588aee&quot;,\n                &quot;embeds&quot;: []\n            },\n            &quot;175bad80-0988-4588-a919-331be705b02d&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 120,\n                    &quot;height&quot;: 120\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: 90,\n                    &quot;y&quot;: 230\n                },\n                &quot;z&quot;: 2,\n                &quot;parent&quot;: &quot;96a791f0-938b-4ebe-9f3c-b3fe2a588aee&quot;,\n                &quot;embeds&quot;: [&quot;143bbaa1-66a2-42a5-885f-e6300817103c&quot;]\n            },\n            &quot;1790ebeb-2e41-4293-8cc1-aaba134fd1e0&quot;: {\n                &quot;source&quot;: {&quot;id&quot;: &quot;a166c4f5-7cc4-429b-b9d8-2c8c43facc63&quot;},\n                &quot;target&quot;: {&quot;id&quot;: &quot;96a791f0-938b-4ebe-9f3c-b3fe2a588aee&quot;},\n                &quot;z&quot;: 1\n            },\n            &quot;143bbaa1-66a2-42a5-885f-e6300817103c&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 60,\n                    &quot;height&quot;: 60\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: 120,\n                    &quot;y&quot;: 260\n                },\n                &quot;z&quot;: 3,\n                &quot;parent&quot;: &quot;175bad80-0988-4588-a919-331be705b02d&quot;,\n                &quot;embeds&quot;: [],\n                &quot;references&quot;: [&quot;a166c4f5-7cc4-429b-b9d8-2c8c43facc63&quot;],\n                &quot;dependson&quot;: [&quot;1790ebeb-2e41-4293-8cc1-aaba134fd1e0&quot;],\n                &quot;isrelatedto&quot;: [&quot;a166c4f5-7cc4-429b-b9d8-2c8c43facc63&quot;]\n            },\n            &quot;3df467ad-673c-4c48-a41c-3ac1626961e3&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 120,\n                    &quot;height&quot;: 120\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: 250,\n                    &quot;y&quot;: 230\n                },\n                &quot;z&quot;: 0,\n                &quot;embeds&quot;: [&quot;0f900c9e-1272-4ec2-8a42-790b074baa39&quot;]\n            },\n            &quot;0f900c9e-1272-4ec2-8a42-790b074baa39&quot;: {\n                &quot;size&quot;: {\n                    &quot;width&quot;: 60,\n                    &quot;height&quot;: 60\n                },\n                &quot;position&quot;: {\n                    &quot;x&quot;: 280,\n                    &quot;y&quot;: 260\n                },\n                &quot;z&quot;: 3,\n                &quot;parent&quot;: &quot;3df467ad-673c-4c48-a41c-3ac1626961e3&quot;,\n                &quot;embeds&quot;: [],\n                &quot;isrelatedto&quot;: [&quot;2e76192b-a4f8-48a5-92b6-abbfa8b83263&quot;]\n            },\n            &quot;13e0e0da-40c9-45d0-8460-7732ed20d764&quot;: {\n                &quot;source&quot;: {&quot;id&quot;: &quot;96a791f0-938b-4ebe-9f3c-b3fe2a588aee&quot;},\n                &quot;target&quot;: {&quot;id&quot;: &quot;3df467ad-673c-4c48-a41c-3ac1626961e3&quot;},\n                &quot;z&quot;: 2\n            },\n            &quot;528e2b71-46e6-4e09-815a-f70630755219&quot;: {\n                &quot;source&quot;: {&quot;id&quot;: &quot;175bad80-0988-4588-a919-331be705b02d&quot;},\n                &quot;target&quot;: {&quot;id&quot;: &quot;3df467ad-673c-4c48-a41c-3ac1626961e3&quot;},\n                &quot;z&quot;: 2\n            }\n        }\n    }\n}\n</code></pre>\n", "OwnerUserId": "248823", "LastActivityDate": "2021-12-18T01:23:26.813", "CommentCount": "2", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "124460248", "PostId": "70400348", "Score": "2", "Text": "thanks! It solves my problem perfectly!", "CreationDate": "2021-12-19T00:49:35.027", "UserId": "10931107", "filtered-sentences": []}, {"Id": "124460372", "PostId": "70400348", "Score": "1", "Text": "@wander No problem. Glad it worked out:-)", "CreationDate": "2021-12-19T01:07:52.220", "UserId": "248823", "filtered-sentences": []}], "history": [{"Id": "260296343", "PostHistoryTypeId": "2", "PostId": "70400348", "RevisionGUID": "d1f47222-6d81-4fb4-8079-af81ffba30c1", "CreationDate": "2021-12-18T01:23:26.813", "UserId": "248823", "Text": "You don't need `AWS::EC2::VPCCidrBlock`. Instead you add `VPCCidr` parameter to your template and use that:\r\n\r\n```\r\n{\r\n    \"AWSTemplateFormatVersion\": \"2010-09-09\",\r\n    \"Description\": \"AWS CloudFormation Sample Template VPC_Single_Instance_In_Subnet: Sample template showing how to create a VPC and add an EC2 instance with an Elastic IP address and a security group. **WARNING** This template creates an Amazon EC2 instance. You will be billed for the AWS resources used if you create a stack from this template.\",\r\n    \"Parameters\": {\r\n        \"InstanceType\": {\r\n            \"Description\": \"WebServer EC2 instance type\",\r\n            \"Type\": \"String\",\r\n            \"Default\": \"t2.micro\",\r\n            \"AllowedValues\": [\r\n                \"t1.micro\",\r\n                \"t2.micro\",\r\n                \"t2.small\",\r\n                \"t2.medium\"\r\n            ],\r\n            \"ConstraintDescription\": \"must be a valid EC2 instance type.\"\r\n        },\r\n        \"KeyName\": {\r\n            \"Description\": \"Name of an existing EC2 KeyPair to enable SSH access to the instance.\",\r\n            \"Type\": \"AWS::EC2::KeyPair::KeyName\",\r\n            \"ConstraintDescription\": \"must be the name of an existing EC2 KeyPair.\"\r\n        },\r\n        \"VPCCidr\": {\r\n            \"Type\": \"String\",\r\n            \"Default\": \"10.0.0.0/16\"\r\n        },\r\n        \"SSHLocation\": {\r\n            \"Description\": \" The IP address range that can be used access the web server using SSH.\",\r\n            \"Type\": \"String\",\r\n            \"MinLength\": \"9\",\r\n            \"MaxLength\": \"18\",\r\n            \"Default\": \"0.0.0.0/0\",\r\n            \"AllowedPattern\": \"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\",\r\n            \"ConstraintDescription\": \"must be a valid IP CIDR range of the form x.x.x.x/x.\"\r\n        }\r\n    },\r\n    \"Mappings\": {\r\n        \"AWSInstanceType2Arch\": {\r\n            \"t1.micro\": {\"Arch\": \"PV64\"},\r\n            \"t2.micro\": {\"Arch\": \"HVM64\"},\r\n            \"t2.small\": {\"Arch\": \"HVM64\"},\r\n            \"t2.medium\": {\"Arch\": \"HVM64\"}\r\n        },\r\n        \"AWSRegionArch2AMI\": {\r\n            \"us-east-1\": {\r\n                \"PV64\": \"ami-1ccae774\",\r\n                \"HVM64\": \"ami-1ecae776\",\r\n                \"HVMG2\": \"ami-8c6b40e4\"\r\n            }\r\n        }\r\n    },\r\n    \"Resources\": {\r\n        \"VPC\": {\r\n            \"Type\": \"AWS::EC2::VPC\",\r\n            \"Properties\": {\r\n                \"EnableDnsSupport\": \"true\",\r\n                \"EnableDnsHostnames\": \"true\",\r\n                \"CidrBlock\": {\"Ref\": \"VPCCidr\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"}\r\n            }\r\n        },\r\n        \"PublicSubnet\": {\r\n            \"Type\": \"AWS::EC2::Subnet\",\r\n            \"Properties\": {\r\n                \"CidrBlock\": { \"Fn::Select\" : [ \"0\", { \"Fn::Cidr\" : [{\"Ref\": \"VPCCidr\"}, 1, 8 ]}]},\r\n                \"VpcId\": {\"Ref\": \"VPC\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"}\r\n            }\r\n        },\r\n        \"InternetGateway\": {\r\n            \"Type\": \"AWS::EC2::InternetGateway\",\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"}\r\n            }\r\n        },\r\n        \"VPCGatewayAttachment\": {\r\n            \"Type\": \"AWS::EC2::VPCGatewayAttachment\",\r\n            \"Properties\": {\r\n                \"VpcId\": {\"Ref\": \"VPC\"},\r\n                \"InternetGatewayId\": {\"Ref\": \"InternetGateway\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\"}\r\n            }\r\n        },\r\n        \"PublicRouteTable\": {\r\n            \"Type\": \"AWS::EC2::RouteTable\",\r\n            \"Properties\": {\r\n                \"VpcId\": {\"Ref\": \"VPC\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"175bad80-0988-4588-a919-331be705b02d\"}\r\n            }\r\n        },\r\n        \"PublicRoute\": {\r\n            \"Type\": \"AWS::EC2::Route\",\r\n            \"DependsOn\": \"VPCGatewayAttachment\",\r\n            \"Properties\": {\r\n                \"RouteTableId\": {\"Ref\": \"PublicRouteTable\"},\r\n                \"DestinationCidrBlock\": \"0.0.0.0/0\",\r\n                \"GatewayId\": {\"Ref\": \"InternetGateway\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"143bbaa1-66a2-42a5-885f-e6300817103c\"}\r\n            }\r\n        },\r\n        \"PublicSubnetRouteTableAssociation\": {\r\n            \"Type\": \"AWS::EC2::SubnetRouteTableAssociation\",\r\n            \"Properties\": {\r\n                \"SubnetId\": {\"Ref\": \"PublicSubnet\"},\r\n                \"RouteTableId\": {\"Ref\": \"PublicRouteTable\"}\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"528e2b71-46e6-4e09-815a-f70630755219\"}\r\n            }\r\n        },\r\n        \"WebServerSecurityGroup\": {\r\n            \"Type\": \"AWS::EC2::SecurityGroup\",\r\n            \"Properties\": {\r\n                \"VpcId\": {\"Ref\": \"VPC\"},\r\n                \"GroupDescription\": \"Allow access from HTTP and SSH traffic\",\r\n                \"SecurityGroupIngress\": [\r\n                    {\r\n                        \"IpProtocol\": \"tcp\",\r\n                        \"FromPort\": \"80\",\r\n                        \"ToPort\": \"80\",\r\n                        \"CidrIp\": \"0.0.0.0/0\"\r\n                    },\r\n                    {\r\n                        \"IpProtocol\": \"tcp\",\r\n                        \"FromPort\": \"22\",\r\n                        \"ToPort\": \"22\",\r\n                        \"CidrIp\": {\"Ref\": \"SSHLocation\"}\r\n                    }\r\n                ]\r\n            },\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\"}\r\n            }\r\n        },\r\n        \"WebServerInstance\": {\r\n            \"Type\": \"AWS::EC2::Instance\",\r\n            \"Metadata\": {\r\n                \"AWS::CloudFormation::Init\": {\r\n                    \"configSets\": {\r\n                        \"All\": [\"ConfigureSampleApp\"]\r\n                    },\r\n                    \"ConfigureSampleApp\": {\r\n                        \"packages\": {\r\n                            \"yum\": {\r\n                                \"httpd\": []\r\n                            }\r\n                        },\r\n                        \"files\": {\r\n                            \"/var/www/html/index.html\": {\r\n                                \"content\": {\r\n                                    \"Fn::Join\": [\r\n                                        \"\\n\",\r\n                                        [\"<h1>Congratulations, you have successfully launched the AWS CloudFormation sample.</h1>\"]\r\n                                    ]\r\n                                },\r\n                                \"mode\": \"000644\",\r\n                                \"owner\": \"root\",\r\n                                \"group\": \"root\"\r\n                            }\r\n                        },\r\n                        \"services\": {\r\n                            \"sysvinit\": {\r\n                                \"httpd\": {\r\n                                    \"enabled\": \"true\",\r\n                                    \"ensureRunning\": \"true\"\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                \"AWS::CloudFormation::Designer\": {\"id\": \"0f900c9e-1272-4ec2-8a42-790b074baa39\"}\r\n            },\r\n            \"Properties\": {\r\n                \"InstanceType\": {\"Ref\": \"InstanceType\"},\r\n                \"ImageId\": {\r\n                    \"Fn::FindInMap\": [\r\n                        \"AWSRegionArch2AMI\",\r\n                        {\"Ref\": \"AWS::Region\"},\r\n                        {\r\n                            \"Fn::FindInMap\": [\r\n                                \"AWSInstanceType2Arch\",\r\n                                {\"Ref\": \"InstanceType\"},\r\n                                \"Arch\"\r\n                            ]\r\n                        }\r\n                    ]\r\n                },\r\n                \"KeyName\": {\"Ref\": \"KeyName\"},\r\n                \"NetworkInterfaces\": [\r\n                    {\r\n                        \"GroupSet\": [\r\n                            {\"Ref\": \"WebServerSecurityGroup\"}\r\n                        ],\r\n                        \"AssociatePublicIpAddress\": \"true\",\r\n                        \"DeviceIndex\": \"0\",\r\n                        \"DeleteOnTermination\": \"true\",\r\n                        \"SubnetId\": {\"Ref\": \"PublicSubnet\"}\r\n                    }\r\n                ],\r\n                \"UserData\": {\r\n                    \"Fn::Base64\": {\r\n                        \"Fn::Join\": [\r\n                            \"\",\r\n                            [\r\n                                \"#!/bin/bash -xe\\n\",\r\n                                \"yum update -y aws-cfn-bootstrap\\n\",\r\n                                \"# Install the files and packages from the metadata\\n\",\r\n                                \"/opt/aws/bin/cfn-init -v \",\r\n                                \"         --stack \",\r\n                                {\"Ref\": \"AWS::StackName\"},\r\n                                \"         --resource WebServerInstance \",\r\n                                \"         --configsets All \",\r\n                                \"         --region \",\r\n                                {\"Ref\": \"AWS::Region\"},\r\n                                \"\\n\",\r\n                                \"# Signal the status from cfn-init\\n\",\r\n                                \"/opt/aws/bin/cfn-signal -e $? \",\r\n                                \"         --stack \",\r\n                                {\"Ref\": \"AWS::StackName\"},\r\n                                \"         --resource WebServerInstance \",\r\n                                \"         --region \",\r\n                                {\"Ref\": \"AWS::Region\"},\r\n                                \"\\n\"\r\n                            ]\r\n                        ]\r\n                    }\r\n                }\r\n            },\r\n            \"CreationPolicy\": {\r\n                \"ResourceSignal\": {\"Timeout\": \"PT5M\"}\r\n            }\r\n        }\r\n    },\r\n    \"Outputs\": {\r\n        \"URL\": {\r\n            \"Value\": {\r\n                \"Fn::Join\": [\r\n                    \"\",\r\n                    [\r\n                        \"http://\",\r\n                        {\r\n                            \"Fn::GetAtt\": [\r\n                                \"WebServerInstance\",\r\n                                \"PublicIp\"\r\n                            ]\r\n                        }\r\n                    ]\r\n                ]\r\n            },\r\n            \"Description\": \"Newly created application URL\"\r\n        },\r\n        \"SubnetCIDR\": {\r\n            \"Value\": {\"Ref\": \"PublicSubnet\"},\r\n            \"Description\": \"Subnet for the application\"\r\n        }\r\n    },\r\n    \"Metadata\": {\r\n        \"AWS::CloudFormation::Designer\": {\r\n            \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\": {\r\n                \"size\": {\r\n                    \"width\": 60,\r\n                    \"height\": 60\r\n                },\r\n                \"position\": {\r\n                    \"x\": -40,\r\n                    \"y\": 210\r\n                },\r\n                \"z\": 1,\r\n                \"embeds\": []\r\n            },\r\n            \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\": {\r\n                \"size\": {\r\n                    \"width\": 320,\r\n                    \"height\": 250\r\n                },\r\n                \"position\": {\r\n                    \"x\": 70,\r\n                    \"y\": 190\r\n                },\r\n                \"z\": 1,\r\n                \"embeds\": [\r\n                    \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\",\r\n                    \"175bad80-0988-4588-a919-331be705b02d\"\r\n                ]\r\n            },\r\n            \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\": {\r\n                \"size\": {\r\n                    \"width\": 60,\r\n                    \"height\": 60\r\n                },\r\n                \"position\": {\r\n                    \"x\": 280,\r\n                    \"y\": 370\r\n                },\r\n                \"z\": 2,\r\n                \"parent\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\",\r\n                \"embeds\": []\r\n            },\r\n            \"175bad80-0988-4588-a919-331be705b02d\": {\r\n                \"size\": {\r\n                    \"width\": 120,\r\n                    \"height\": 120\r\n                },\r\n                \"position\": {\r\n                    \"x\": 90,\r\n                    \"y\": 230\r\n                },\r\n                \"z\": 2,\r\n                \"parent\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\",\r\n                \"embeds\": [\"143bbaa1-66a2-42a5-885f-e6300817103c\"]\r\n            },\r\n            \"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\": {\r\n                \"source\": {\"id\": \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"},\r\n                \"target\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"},\r\n                \"z\": 1\r\n            },\r\n            \"143bbaa1-66a2-42a5-885f-e6300817103c\": {\r\n                \"size\": {\r\n                    \"width\": 60,\r\n                    \"height\": 60\r\n                },\r\n                \"position\": {\r\n                    \"x\": 120,\r\n                    \"y\": 260\r\n                },\r\n                \"z\": 3,\r\n                \"parent\": \"175bad80-0988-4588-a919-331be705b02d\",\r\n                \"embeds\": [],\r\n                \"references\": [\"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"],\r\n                \"dependson\": [\"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\"],\r\n                \"isrelatedto\": [\"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"]\r\n            },\r\n            \"3df467ad-673c-4c48-a41c-3ac1626961e3\": {\r\n                \"size\": {\r\n                    \"width\": 120,\r\n                    \"height\": 120\r\n                },\r\n                \"position\": {\r\n                    \"x\": 250,\r\n                    \"y\": 230\r\n                },\r\n                \"z\": 0,\r\n                \"embeds\": [\"0f900c9e-1272-4ec2-8a42-790b074baa39\"]\r\n            },\r\n            \"0f900c9e-1272-4ec2-8a42-790b074baa39\": {\r\n                \"size\": {\r\n                    \"width\": 60,\r\n                    \"height\": 60\r\n                },\r\n                \"position\": {\r\n                    \"x\": 280,\r\n                    \"y\": 260\r\n                },\r\n                \"z\": 3,\r\n                \"parent\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\",\r\n                \"embeds\": [],\r\n                \"isrelatedto\": [\"2e76192b-a4f8-48a5-92b6-abbfa8b83263\"]\r\n            },\r\n            \"13e0e0da-40c9-45d0-8460-7732ed20d764\": {\r\n                \"source\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"},\r\n                \"target\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"},\r\n                \"z\": 2\r\n            },\r\n            \"528e2b71-46e6-4e09-815a-f70630755219\": {\r\n                \"source\": {\"id\": \"175bad80-0988-4588-a919-331be705b02d\"},\r\n                \"target\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"},\r\n                \"z\": 2\r\n            }\r\n        }\r\n    }\r\n}\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Instead you add `VPCCidr` parameter to your template and use that: ``` { \"AWSTemplateFormatVersion\": \"2010-09-09\", \"Description\": \"AWS CloudFormation Sample Template VPC_Single_Instance_In_Subnet: Sample template showing how to create a VPC and add an EC2 instance with an Elastic IP address and a security group. ", "keywords": ["instance"]}, {"source": "Text", "text": "This template creates an Amazon EC2 instance. ", "keywords": ["instance"]}, {"source": "Text", "text": "You will be billed for the AWS resources used if you create a stack from this template.\", \"Parameters\": { \"InstanceType\": { \"Description\": \"WebServer EC2 instance type\", \"Type\": \"String\", \"Default\": \"t2.micro\", \"AllowedValues\": [ \"t1.micro\", \"t2.micro\", \"t2.small\", \"t2.medium\" ], \"ConstraintDescription\": \"must be a valid EC2 instance type.\" }, \"KeyName\": { \"Description\": \"Name of an existing EC2 KeyPair to enable SSH access to the instance.\", \"Type\": \"AWS::EC2::KeyPair::KeyName\", \"ConstraintDescription\": \"must be the name of an existing EC2 KeyPair.\" }, \"VPCCidr\": { \"Type\": \"String\", \"Default\": \"10.0.0.0/16\" }, \"SSHLocation\": { \"Description\": \" The IP address range that can be used access the web server using SSH.\", \"Type\": \"String\", \"MinLength\": \"9\", \"MaxLength\": \"18\", \"Default\": \"0.0.0.0/0\", \"AllowedPattern\": \"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\", \"ConstraintDescription\": \"must be a valid IP CIDR range of the form x.x.x.x/x.\" } }, \"Mappings\": { \"AWSInstanceType2Arch\": { \"t1.micro\": {\"Arch\": \"PV64\"}, \"t2.micro\": {\"Arch\": \"HVM64\"}, \"t2.small\": {\"Arch\": \"HVM64\"}, \"t2.medium\": {\"Arch\": \"HVM64\"} }, \"AWSRegionArch2AMI\": { \"us-east-1\": { \"PV64\": \"ami-1ccae774\", \"HVM64\": \"ami-1ecae776\", \"HVMG2\": \"ami-8c6b40e4\" } } }, \"Resources\": { \"VPC\": { \"Type\": \"AWS::EC2::VPC\", \"Properties\": { \"EnableDnsSupport\": \"true\", \"EnableDnsHostnames\": \"true\", \"CidrBlock\": {\"Ref\": \"VPCCidr\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"} } }, \"PublicSubnet\": { \"Type\": \"AWS::EC2::Subnet\", \"Properties\": { \"CidrBlock\": { \"Fn::Select\" : [ \"0\", { \"Fn::Cidr\" : [{\"Ref\": \"VPCCidr\"}, 1, 8 ]}]}, \"VpcId\": {\"Ref\": \"VPC\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"} } }, \"InternetGateway\": { \"Type\": \"AWS::EC2::InternetGateway\", \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"} } }, \"VPCGatewayAttachment\": { \"Type\": \"AWS::EC2::VPCGatewayAttachment\", \"Properties\": { \"VpcId\": {\"Ref\": \"VPC\"}, \"InternetGatewayId\": {\"Ref\": \"InternetGateway\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\"} } }, \"PublicRouteTable\": { \"Type\": \"AWS::EC2::RouteTable\", \"Properties\": { \"VpcId\": {\"Ref\": \"VPC\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"175bad80-0988-4588-a919-331be705b02d\"} } }, \"PublicRoute\": { \"Type\": \"AWS::EC2::Route\", \"DependsOn\": \"VPCGatewayAttachment\", \"Properties\": { \"RouteTableId\": {\"Ref\": \"PublicRouteTable\"}, \"DestinationCidrBlock\": \"0.0.0.0/0\", \"GatewayId\": {\"Ref\": \"InternetGateway\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"143bbaa1-66a2-42a5-885f-e6300817103c\"} } }, \"PublicSubnetRouteTableAssociation\": { \"Type\": \"AWS::EC2::SubnetRouteTableAssociation\", \"Properties\": { \"SubnetId\": {\"Ref\": \"PublicSubnet\"}, \"RouteTableId\": {\"Ref\": \"PublicRouteTable\"} }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"528e2b71-46e6-4e09-815a-f70630755219\"} } }, \"WebServerSecurityGroup\": { \"Type\": \"AWS::EC2::SecurityGroup\", \"Properties\": { \"VpcId\": {\"Ref\": \"VPC\"}, \"GroupDescription\": \"Allow access from HTTP and SSH traffic\", \"SecurityGroupIngress\": [ { \"IpProtocol\": \"tcp\", \"FromPort\": \"80\", \"ToPort\": \"80\", \"CidrIp\": \"0.0.0.0/0\" }, { \"IpProtocol\": \"tcp\", \"FromPort\": \"22\", \"ToPort\": \"22\", \"CidrIp\": {\"Ref\": \"SSHLocation\"} } ] }, \"Metadata\": { \"AWS::CloudFormation::Designer\": {\"id\": \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\"} } }, \"WebServerInstance\": { \"Type\": \"AWS::EC2::Instance\", \"Metadata\": { \"AWS::CloudFormation::Init\": { \"configSets\": { \"All\": [\"ConfigureSampleApp\"] }, \"ConfigureSampleApp\": { \"packages\": { \"yum\": { \"httpd\": [] } }, \"files\": { \"/var/www/html/index.html\": { \"content\": { \"Fn::Join\": [ \"\\n\", [\"Congratulations, you have successfully launched the AWS CloudFormation sample.\"] ] }, \"mode\": \"000644\", \"owner\": \"root\", \"group\": \"root\" } }, \"services\": { \"sysvinit\": { \"httpd\": { \"enabled\": \"true\", \"ensureRunning\": \"true\" } } } } }, \"AWS::CloudFormation::Designer\": {\"id\": \"0f900c9e-1272-4ec2-8a42-790b074baa39\"} }, \"Properties\": { \"InstanceType\": {\"Ref\": \"InstanceType\"}, \"ImageId\": { \"Fn::FindInMap\": [ \"AWSRegionArch2AMI\", {\"Ref\": \"AWS::Region\"}, { \"Fn::FindInMap\": [ \"AWSInstanceType2Arch\", {\"Ref\": \"InstanceType\"}, \"Arch\" ] } ] }, \"KeyName\": {\"Ref\": \"KeyName\"}, \"NetworkInterfaces\": [ { \"GroupSet\": [ {\"Ref\": \"WebServerSecurityGroup\"} ], \"AssociatePublicIpAddress\": \"true\", \"DeviceIndex\": \"0\", \"DeleteOnTermination\": \"true\", \"SubnetId\": {\"Ref\": \"PublicSubnet\"} } ], \"UserData\": { \"Fn::Base64\": { \"Fn::Join\": [ \"\", [ \"#!/bin/bash -xe\\n\", \"yum update -y aws-cfn-bootstrap\\n\", \"# Install the files and packages from the metadata\\n\", \"/opt/aws/bin/cfn-init -v \", \" --stack \", {\"Ref\": \"AWS::StackName\"}, \" --resource WebServerInstance \", \" --configsets All \", \" --region \", {\"Ref\": \"AWS::Region\"}, \"\\n\", \"# Signal the status from cfn-init\\n\", \"/opt/aws/bin/cfn-signal -e $? \", \" --stack \", {\"Ref\": \"AWS::StackName\"}, \" --resource WebServerInstance \", \" --region \", {\"Ref\": \"AWS::Region\"}, \"\\n\" ] ] } } }, \"CreationPolicy\": { \"ResourceSignal\": {\"Timeout\": \"PT5M\"} } } }, \"Outputs\": { \"URL\": { \"Value\": { \"Fn::Join\": [ \"\", [ \"http://\", { \"Fn::GetAtt\": [ \"WebServerInstance\", \"PublicIp\" ] } ] ] }, \"Description\": \"Newly created application URL\" }, \"SubnetCIDR\": { \"Value\": {\"Ref\": \"PublicSubnet\"}, \"Description\": \"Subnet for the application\" } }, \"Metadata\": { \"AWS::CloudFormation::Designer\": { \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\": { \"size\": { \"width\": 60, \"height\": 60 }, \"position\": { \"x\": -40, \"y\": 210 }, \"z\": 1, \"embeds\": [] }, \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\": { \"size\": { \"width\": 320, \"height\": 250 }, \"position\": { \"x\": 70, \"y\": 190 }, \"z\": 1, \"embeds\": [ \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\", \"175bad80-0988-4588-a919-331be705b02d\" ] }, \"2e76192b-a4f8-48a5-92b6-abbfa8b83263\": { \"size\": { \"width\": 60, \"height\": 60 }, \"position\": { \"x\": 280, \"y\": 370 }, \"z\": 2, \"parent\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\", \"embeds\": [] }, \"175bad80-0988-4588-a919-331be705b02d\": { \"size\": { \"width\": 120, \"height\": 120 }, \"position\": { \"x\": 90, \"y\": 230 }, \"z\": 2, \"parent\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\", \"embeds\": [\"143bbaa1-66a2-42a5-885f-e6300817103c\"] }, \"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\": { \"source\": {\"id\": \"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"}, \"target\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"}, \"z\": 1 }, \"143bbaa1-66a2-42a5-885f-e6300817103c\": { \"size\": { \"width\": 60, \"height\": 60 }, \"position\": { \"x\": 120, \"y\": 260 }, \"z\": 3, \"parent\": \"175bad80-0988-4588-a919-331be705b02d\", \"embeds\": [], \"references\": [\"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"], \"dependson\": [\"1790ebeb-2e41-4293-8cc1-aaba134fd1e0\"], \"isrelatedto\": [\"a166c4f5-7cc4-429b-b9d8-2c8c43facc63\"] }, \"3df467ad-673c-4c48-a41c-3ac1626961e3\": { \"size\": { \"width\": 120, \"height\": 120 }, \"position\": { \"x\": 250, \"y\": 230 }, \"z\": 0, \"embeds\": [\"0f900c9e-1272-4ec2-8a42-790b074baa39\"] }, \"0f900c9e-1272-4ec2-8a42-790b074baa39\": { \"size\": { \"width\": 60, \"height\": 60 }, \"position\": { \"x\": 280, \"y\": 260 }, \"z\": 3, \"parent\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\", \"embeds\": [], \"isrelatedto\": [\"2e76192b-a4f8-48a5-92b6-abbfa8b83263\"] }, \"13e0e0da-40c9-45d0-8460-7732ed20d764\": { \"source\": {\"id\": \"96a791f0-938b-4ebe-9f3c-b3fe2a588aee\"}, \"target\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"}, \"z\": 2 }, \"528e2b71-46e6-4e09-815a-f70630755219\": { \"source\": {\"id\": \"175bad80-0988-4588-a919-331be705b02d\"}, \"target\": {\"id\": \"3df467ad-673c-4c48-a41c-3ac1626961e3\"}, \"z\": 2 } } } ", "keywords": ["bill", "instance", "billing mode"]}]}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": []}