{"Id": "69368331", "PostTypeId": "1", "AcceptedAnswerId": "69368533", "CreationDate": "2021-09-28T20:51:15.447", "Score": "1", "ViewCount": "550", "Body": "<p>I'm using <code>sls</code> with AWS Fargate. I'm trying use <code>sls deploy -v</code> but am getting an error in my <code>fargate-template.yml</code> when I try to set the <code>Memory</code> property under <code>FargateECSTaskDefinition</code>. Here's the relevant <code>yml</code> section:</p>\n<pre><code>FargateECSTaskDefinition:\n    Type: &quot;AWS::ECS::TaskDefinition&quot;\n    Properties:\n      Cpu: 256\n      Memory: 512 MB\n</code></pre>\n<p>And here's the error I get:</p>\n<pre><code>An error occurred: FargateECSTaskDefinition - Resource handler returned message: &quot;Invalid request provided: Create TaskDefinition: Invalid 'memory' setting for task. (Service: AmazonECS; Status Code: 400; Error Code: InvalidParameterException; Request ID: f4d1c13d-1885-4157-bf21-4299b06cf3ff; Proxy: null)&quot; (RequestToken: b872e59f-4329-35ed-5191-cfb0c486f49f, HandlerErrorCode: InvalidRequest).\n</code></pre>\n<p>Setting <code>Memory: 1GB</code> works without a problem. I tried both <code>Memory: 512 MB</code> and <code>Memory: 512MB</code>, thinking that the space would make a difference. Both returned an error though. I'm following <a href=\"https://docs.aws.amazon.com/AmazonECS/latest/developerguide/create-task-definition.html\" rel=\"nofollow noreferrer\">this</a> documentation, which suggests that a combination of 256 CPU units and <code>512 MB</code> memory is compatible, so I'm not sure what the issue could be.</p>\n<p>The difference between 512MB and 1GB is trivial from a cost perspective, but at this point I want to solve this on principle.</p>\n", "OwnerUserId": "14908234", "LastEditorUserId": "248823", "LastEditDate": "2021-09-28T21:12:22.810", "LastActivityDate": "2021-09-28T21:12:22.810", "Title": "Error in Fargate configuration file: FargateECSTaskDefinition", "Tags": "|amazon-web-services|amazon-ec2|aws-lambda|aws-cloudformation|aws-fargate|", "AnswerCount": "1", "CommentCount": "0", "ContentLicense": "CC BY-SA 4.0", "history": [{"Id": "254719517", "PostHistoryTypeId": "2", "PostId": "69368331", "RevisionGUID": "4ec6155d-e468-492e-93a2-ead8317a28d1", "CreationDate": "2021-09-28T20:51:15.447", "UserId": "14908234", "Text": "I'm using `sls` with AWS Fargate. I'm trying use `sls deploy -v` but am getting an error in my `fargate-template.yml` when I try to set the `Memory` property under `FargateECSTaskDefinition`. Here's the relevant `yml` section:\r\n\r\n```\r\nFargateECSTaskDefinition:\r\n    Type: \"AWS::ECS::TaskDefinition\"\r\n    Properties:\r\n      Cpu: 256\r\n      Memory: 512 MB\r\n```\r\n\r\nAnd here's the error I get:\r\n```\r\nAn error occurred: FargateECSTaskDefinition - Resource handler returned message: \"Invalid request provided: Create TaskDefinition: Invalid 'memory' setting for task. (Service: AmazonECS; Status Code: 400; Error Code: InvalidParameterException; Request ID: f4d1c13d-1885-4157-bf21-4299b06cf3ff; Proxy: null)\" (RequestToken: b872e59f-4329-35ed-5191-cfb0c486f49f, HandlerErrorCode: InvalidRequest).\r\n```\r\n\r\nSetting `Memory: 1GB` works without a problem. I tried both `Memory: 512 MB` and `Memory: 512MB`, thinking that the space would make a difference. Both returned an error though. I'm following [this][1] documentation, which suggests that a combination of 256 CPU units and `512 MB` memory is compatible, so I'm not sure what the issue could be. \r\n\r\nThe difference between 512MB and 1GB is trivial from a cost perspective, but at this point I want to solve this on principle.\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AmazonECS/latest/developerguide/create-task-definition.html", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "Here's the relevant `yml` section: ``` FargateECSTaskDefinition: Type: \"AWS::ECS::TaskDefinition\" Properties: Cpu: 256 Memory: 512 MB ``` ", "keywords": ["cpu"]}, {"source": "Text", "text": "I'm following [this][1] documentation, which suggests that a combination of 256 CPU units and `512 MB` memory is compatible, so I'm not sure what the issue could be. ", "keywords": ["cpu"]}, {"source": "Text", "text": "The difference between 512MB and 1GB is trivial from a cost perspective, but at this point I want to solve this on principle. ", "keywords": ["cost"]}]}, {"Id": "254719519", "PostHistoryTypeId": "1", "PostId": "69368331", "RevisionGUID": "4ec6155d-e468-492e-93a2-ead8317a28d1", "CreationDate": "2021-09-28T20:51:15.447", "UserId": "14908234", "Text": "Error in Fargate configuration file: FargateECSTaskDefinition", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "254719520", "PostHistoryTypeId": "3", "PostId": "69368331", "RevisionGUID": "4ec6155d-e468-492e-93a2-ead8317a28d1", "CreationDate": "2021-09-28T20:51:15.447", "UserId": "14908234", "Text": "|python|amazon-web-services|amazon-ec2|aws-lambda|aws-fargate|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}, {"Id": "254720667", "PostHistoryTypeId": "6", "PostId": "69368331", "RevisionGUID": "3785350f-bab5-4aca-b356-5a0c5ebd7594", "CreationDate": "2021-09-28T21:12:22.810", "UserId": "248823", "Comment": "edited tags", "Text": "|amazon-web-services|amazon-ec2|aws-lambda|aws-cloudformation|aws-fargate|", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": []}], "answers": [{"Id": "69368533", "PostTypeId": "2", "ParentId": "69368331", "CreationDate": "2021-09-28T21:12:03.510", "Score": "1", "Body": "<p>In CloudFormation the valid values are listed <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-memory\" rel=\"nofollow noreferrer\">here</a>. It should be:</p>\n<pre><code>FargateECSTaskDefinition:\n    Type: &quot;AWS::ECS::TaskDefinition&quot;\n    Properties:\n      Cpu: 256\n      Memory: 512\n</code></pre>\n", "OwnerUserId": "248823", "LastActivityDate": "2021-09-28T21:12:03.510", "CommentCount": "1", "ContentLicense": "CC BY-SA 4.0", "comments": [{"Id": "122657338", "PostId": "69368533", "Score": "1", "Text": "went perfectly - thanks (as usual, at this point) for the help :)", "CreationDate": "2021-09-30T17:01:17.340", "UserId": "14908234", "filtered-sentences": []}], "history": [{"Id": "254720637", "PostHistoryTypeId": "2", "PostId": "69368533", "RevisionGUID": "8c2877d1-57f8-44f6-951e-e5c074042fd8", "CreationDate": "2021-09-28T21:12:03.510", "UserId": "248823", "Text": "In CloudFormation the valid values are listed [here](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html#cfn-ecs-taskdefinition-memory). It should be:\r\n\r\n```\r\nFargateECSTaskDefinition:\r\n    Type: \"AWS::ECS::TaskDefinition\"\r\n    Properties:\r\n      Cpu: 256\r\n      Memory: 512\r\n```", "ContentLicense": "CC BY-SA 4.0", "filtered-sentences": [{"source": "Text", "text": "It should be: ``` FargateECSTaskDefinition: Type: \"AWS::ECS::TaskDefinition\" Properties: Cpu: 256 Memory: 512 ```", "keywords": ["cpu"]}]}], "filtered-sentences": []}], "contains-topic": true, "filtered-sentences": [{"source": "Body", "text": "I'm following this documentation, which suggests that a combination of 256 CPU units and 512 MB memory is compatible, so I'm not sure what the issue could be. ", "keywords": ["cpu"]}, {"source": "Body", "text": "The difference between 512MB and 1GB is trivial from a cost perspective, but at this point I want to solve this on principle.", "keywords": ["cost"]}]}